"use strict";var production="false"===$("#appjs").data("mode"),friendo_url=$("#appjs").data("site"),device=deviceCheck();Vue.config.devtools=!production,Vue.config.debug=!production,Vue.config.silent=!production;var md=new MobileDetect(window.navigator.userAgent),tag=document.createElement("script");function findGetParameter(e){var t=null,n=[];return location.search.substr(1).split("&").forEach(function(o){(n=o.split("="))[0]===e&&(t=decodeURIComponent(n[1]))}),t}function checkCookie(e){var t=null,n=[];return document.cookie.split(";").forEach(function(o){" "==o.charAt(0)&&(o=o.substring(1)),(n=o.split("="))[0]===e&&(t=n[1])}),t}function deviceCheck(){var o={},e=new MobileDetect(window.navigator.userAgent);return e.match(/android/i)?(o.os="android",o.version=e.version("android")):e.match(/(iphone|ipad|ipod);?/i)?(o.os="ios",o.version=e.version("iOS")):(o.os="pc",o.version=e.version("Chrome")),o}$(function(){console.log("v1.0"),console.log(device),$(".nav").menu()}),Vue.mixin({data:function(){return{status:"",start_date:"2100/08/09 12:09:10",error_msg:"",mode:production?"Started":"Testing",loading:!1,popuptop:"",navHeight:"",rewardShake:!0,lineHref:""}},computed:{openCome:function(){return!("Testing"==this.mode||start_date<=0)}},watch:{error_msg:function(o){$("body").toggleClass("_freeze")}},methods:{gaEvant:function(o){dataLayer.push({event:o}),console.log("ga:",o)},server_busy:function(){var o=this;o.error_msg="系統忙碌中，請稍後在試!",o.loading=!1,o.error_cou=6},setCookie:function(o,e,t){var n=new Date;n.setTime(n.getTime()+1e3*t);var r="expires="+n.toUTCString();document.cookie=o+"="+e+";"+r+";"},logger:function(o,e,t){if(production){_LTracker.push({level:["ERROR","DEBUG","WARNING","INFO","ALL"][o],content:JSON.stringify(e),path:window.location.href,tag:t||null,device:device,timestamp:Date.now()})}},errorDone:function(){this.error_msg=""},checkOnline:function(){navigator.onLine||alert("Internet 連線已斷開，請確認您的網路狀態。")},state_check:function(){var t=this;return $.ajax({method:"GET",url:friendo_url+"GetProjectInfo",success:function(o){var e=o.Data;t.start_date=e.StartDateTime,t.mode=e.Status}})},scrollTo:function(o){var e=this;e.room=null,e.allPopupClose(),$("html,body").animate({scrollTop:$(o).offset().top-e.navHeight},500)},popupOpen:function(){var o=this;o.popuptop&&0!==o.popuptop||(o.popuptop=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop)),$("body").addClass("_freeze")},popupClose:function(){$("body").removeClass("_freeze"),$("html, body").scrollTop(this.popuptop),this.popuptop=0},afterEnter:function(){this.popupOpen()},getToken:function(){return $.ajax({url:friendo_url+"api/auth/login?projectId=61",headers:{webtoken:"2YRiIGevkjZZ-S22iwwuSoajRcnZUSeEJ+dwslTtM+s="},method:"GET",dataType:"json"})}},components:{comingsoon:comingsoon},mounted:function(){$(".nav-lock").click(function(){$("body").removeClass("_freeze")})}}),Vue.component("comingsoon",{template:"#comingsoon",props:["StartDate","mode"],data:function(){return{comingsoon:!1,date:{total:0,days:0,hours:0,minutes:0,seconds:0}}},mounted:function(){var i=function o(e,t){return(e=""+e).length>=t?e:o("0"+e,t)},a=this,s=setInterval(function(){var o=Date.parse(new Date(a.StartDate))-Date.parse(new Date),e=Math.floor(o/1e3%60),t=Math.floor(o/1e3/60%60),n=Math.floor(o/36e5%24),r=Math.floor(o/864e5);a.date={total:o,days:i(r,2),hours:i(n,2),minutes:i(t,2),seconds:i(e,2)},a.date.total<=0||"Testing"==a.mode?(clearInterval(s),a.comingsoon=!1):a.comingsoon=!0},1e3)}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJwcm9kdWN0aW9uIiwiJCIsImRhdGEiLCJkZXZpY2UiLCJkZXZpY2VDaGVjayIsIlZ1ZSIsImNvbmZpZyIsImRldnRvb2xzIiwiZGVidWciLCJtZCIsIk1vYmlsZURldGVjdCIsIndpbmRvdyIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRhZyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImZpbmRHZXRQYXJhbWV0ZXIiLCJwYXJhbWV0ZXJOYW1lIiwicmVzdWx0IiwidG1wIiwibG9jYXRpb24iLCJzZWFyY2giLCJpdGVtIiwic3BsaXQiLCJmb3JFYWNoIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiY29va2llIiwiY2hhckF0Iiwic3Vic3RyaW5nIiwidmVyc2lvbiIsInN0YXJ0X2RhdGUiLCJtYXRjaCIsIm9zIiwiY29uc29sZSIsImxvZyIsIm1vZGUiLCJsb2FkaW5nIiwicG9wdXB0b3AiLCJuYXZIZWlnaHQiLCJyZXdhcmRTaGFrZSIsImxpbmVIcmVmIiwiY29tcHV0ZWQiLCJvcGVuQ29tZSIsImVycm9yX21zZyIsInRoaXMiLCJnYUV2YW50IiwiZGF0YUxheWVyIiwidmFsIiwiZ3RtRGF0YSIsIm1ldGhvZHMiLCJ2bSIsInB1c2giLCJldmVudCIsImVycm9yX2NvdSIsInNldENvb2tpZSIsImQiLCJzZXRUaW1lIiwiZ2V0VGltZSIsImV4cGlyZXMiLCJsb2dnZXIiLCJjbmFtZSIsImxldmVsIiwiY29udGVudCIsInRpbWUiLCJsZXZlbF9pbmZvIiwidG9VVENTdHJpbmciLCJfTFRyYWNrZXIiLCJjdmFsdWUiLCJKU09OIiwic3RyaW5naWZ5IiwicGF0aCIsImhyZWYiLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwiZXJyb3JEb25lIiwic3RhdGVfY2hlY2siLCJvbkxpbmUiLCJhbGVydCIsImFqYXgiLCJ1cmwiLCJmcmllbmRvX3VybCIsInN1Y2Nlc3MiLCJyZXMiLCJEYXRhIiwiU3RhcnREYXRlVGltZSIsIlN0YXR1cyIsInNjcm9sbFRvIiwiZSIsInBvcHVwT3BlbiIsImFsbFBvcHVwQ2xvc2UiLCJNYXRoIiwicGFnZVlPZmZzZXQiLCJwb3B1cENsb3NlIiwicmVtb3ZlQ2xhc3MiLCJtYXgiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JvbGxUb3AiLCJib2R5IiwiYWZ0ZXJFbnRlciIsImdldFRva2VuIiwibWV0aG9kIiwiaGVhZGVycyIsIndlYnRva2VuIiwiY29taW5nc29vbiIsImRhdGFUeXBlIiwiY29tcG9uZW50cyIsImNsaWNrIiwiY29tcG9uZW50IiwidG90YWwiLCJkYXlzIiwiaG91cnMiLCJtaW51dGVzIiwic2Vjb25kcyIsImRhdGUiLCJwYWRMZWZ0Iiwic3RyIiwibGVuZ3RoIiwibW91bnRlZCIsImxlbiIsInRpbWVpbnRlcnZhbCIsInNldEludGVydmFsIiwidCIsIlN0YXJ0RGF0ZSIsInBhcnNlIiwiZmxvb3IiLCJjbGVhckludGVydmFsIl0sIm1hcHBpbmdzIjoiYUFBQSxJQUNJQSxXQUEwQyxVQUE3QkMsRUFBRSxVQUFVQyxLQUFLLFFBQTlCRixZQUFhQyxFQUFFLFVBQVVDLEtBQUssUUFHNUJDLE9BQVNDLGNBRWZDLElBQUlDLE9BQU9DLFVBQVlQLFdBQXZCSyxJQUFJQyxPQUFPQyxPQUFYUCxXQUNBSyxJQUFJQyxPQUFPRSxRQUFTUixXQUdwQixJQUFJUyxHQUFLLElBQUlDLGFBQWFDLE9BQU9DLFVBQVVDLFdBRXZDQyxJQUFNQyxTQUFTQyxjQUFjLFVBU2pDLFNBQVNDLGlCQUFpQkMsR0FDdEIsSUFBSUMsRUFBUyxLQUNUQyxFQUFNLEdBYVYsT0FaQUMsU0FBU0MsT0FJREYsT0FBTUcsR0FDTkMsTUFBSUosS0FMWkssUUFBQSxTQUFBRixJQVFPSixFQUFQSSxFQUFBQyxNQUFBLE1BQ0gsS0FBQU4sSUFIZUMsRUFBU08sbUJBQW1CTixFQUFJLE9BTXhDRCxFQUdKUSxTQUFBQSxZQUFBVCxHQUVRLElBQUFDLEVBQVNTLEtBQ0xMLEVBQUFBLEdBWVJwQixPQVhLWSxTQUFBWSxPQUNEUCxNQUFN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RSxLQUFPQSxDQUNIWSxNQUFBQSxFQUNBNUUsS0FBR3NELEVBQWFNLEVBQWhCLEdBRkpDLE1BR09JLEVBQUFKLEVBQUEsR0FDSDdELFFBQUdzRCxFQUFhUSxFQUFoQixHQUNIQyxRQUFBRSxFQUFBRixFQUFBLElBRUwvRCxFQUFBZ0UsS0FBQUwsT0FBQSxHQUFBLFdBQUEzRCxFQUFBZixNQUNIMkYsY0FBQU4sR0FqREx0RSxFQUFBc0QsWUFBQSxHQTZDZ0J0RCxFQUFHc0QsWUFBYSxHQUVyQiIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdFxyXG4gICAgcHJvZHVjdGlvbiA9ICQoXCIjYXBwanNcIikuZGF0YShcIm1vZGVcIikgPT09IFwiZmFsc2VcIixcclxuICAgIGZyaWVuZG9fdXJsID0gJChcIiNhcHBqc1wiKS5kYXRhKFwic2l0ZVwiKTtcclxuXHJcbmNvbnN0IGRldmljZSA9IGRldmljZUNoZWNrKCk7XHJcblxyXG5WdWUuY29uZmlnLmRldnRvb2xzID0gIXByb2R1Y3Rpb247XHJcblZ1ZS5jb25maWcuZGVidWcgPSAhcHJvZHVjdGlvbjtcclxuVnVlLmNvbmZpZy5zaWxlbnQgPSAhcHJvZHVjdGlvbjtcclxuXHJcbnZhciBtZCA9IG5ldyBNb2JpbGVEZXRlY3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG5cclxudmFyIHRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcInYxLjBcIik7XHJcbiAgICBjb25zb2xlLmxvZyhkZXZpY2UpO1xyXG4gICAgJChcIi5uYXZcIikubWVudSgpO1xyXG59KTtcclxuXHJcblxyXG5mdW5jdGlvbiBmaW5kR2V0UGFyYW1ldGVyKHBhcmFtZXRlck5hbWUpIHtcclxuICAgIHZhciByZXN1bHQgPSBudWxsLFxyXG4gICAgICAgIHRtcCA9IFtdO1xyXG4gICAgbG9jYXRpb24uc2VhcmNoXHJcbiAgICAgICAgLnN1YnN0cigxKVxyXG4gICAgICAgIC5zcGxpdChcIiZcIilcclxuICAgICAgICAuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICB0bXAgPSBpdGVtLnNwbGl0KFwiPVwiKTtcclxuICAgICAgICAgICAgaWYgKHRtcFswXSA9PT0gcGFyYW1ldGVyTmFtZSlcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGRlY29kZVVSSUNvbXBvbmVudCh0bXBbMV0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZnVuY3Rpb24gY2hlY2tDb29raWUocGFyYW1ldGVyTmFtZSkge1xyXG4gICAgdmFyIHJlc3VsdCA9IG51bGwsXHJcbiAgICAgICAgdG1wID0gW107XHJcbiAgICB2YXIgY29va2llID0gZG9jdW1lbnQuY29va2llO1xyXG4gICAgY29va2llLnNwbGl0KFwiO1wiKVxyXG4gICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtLmNoYXJBdCgwKSA9PSBcIiBcIikge1xyXG4gICAgICAgICAgICAgICAgaXRlbSA9IGl0ZW0uc3Vic3RyaW5nKDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRtcCA9IGl0ZW0uc3BsaXQoXCI9XCIpO1xyXG4gICAgICAgICAgICBpZiAodG1wWzBdID09PSBwYXJhbWV0ZXJOYW1lKVxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdG1wWzFdO1xyXG4gICAgICAgIH0pXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmZ1bmN0aW9uIGRldmljZUNoZWNrKCkge1xyXG4gICAgdmFyIGRldmljZSA9IHt9O1xyXG4gICAgdmFyIG1kID0gbmV3IE1vYmlsZURldGVjdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcbiAgICBpZiAobWQubWF0Y2goL2FuZHJvaWQvaSkpIHtcclxuICAgICAgICBkZXZpY2Uub3MgPSBcImFuZHJvaWRcIjtcclxuICAgICAgICBkZXZpY2UudmVyc2lvbiA9IG1kLnZlcnNpb24oXCJhbmRyb2lkXCIpO1xyXG4gICAgfSBlbHNlIGlmIChtZC5tYXRjaCgvKGlwaG9uZXxpcGFkfGlwb2QpOz8vaSkpIHtcclxuICAgICAgICBkZXZpY2Uub3MgPSBcImlvc1wiO1xyXG4gICAgICAgIGRldmljZS52ZXJzaW9uID0gbWQudmVyc2lvbihcImlPU1wiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZGV2aWNlLm9zID0gXCJwY1wiO1xyXG4gICAgICAgIGRldmljZS52ZXJzaW9uID0gbWQudmVyc2lvbihcIkNocm9tZVwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBkZXZpY2U7XHJcbn1cclxuVnVlLm1peGluKHtcclxuICAgIGRhdGE6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzdGF0dXM6IFwiXCIsXHJcbiAgICAgICAgICAgIHN0YXJ0X2RhdGU6IFwiMjEwMC8wOC8wOSAxMjowOToxMFwiLFxyXG4gICAgICAgICAgICBlcnJvcl9tc2c6IFwiXCIsXHJcbiAgICAgICAgICAgIG1vZGU6IHByb2R1Y3Rpb24gPyBcIlN0YXJ0ZWRcIiA6IFwiVGVzdGluZ1wiLFxyXG4gICAgICAgICAgICBsb2FkaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgcG9wdXB0b3A6IFwiXCIsXHJcbiAgICAgICAgICAgIG5hdkhlaWdodDogXCJcIixcclxuICAgICAgICAgICAgcmV3YXJkU2hha2U6IHRydWUsXHJcbiAgICAgICAgICAgIGxpbmVIcmVmOiAnJyxcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgY29tcHV0ZWQ6IHtcclxuICAgICAgICBvcGVuQ29tZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gISh0aGlzLm1vZGUgPT0gXCJUZXN0aW5nXCIgfHwgc3RhcnRfZGF0ZSA8PSAwKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgd2F0Y2g6IHtcclxuICAgICAgICBlcnJvcl9tc2c6IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAgICAgJCgnYm9keScpLnRvZ2dsZUNsYXNzKCdfZnJlZXplJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIG1ldGhvZHM6IHtcclxuICAgICAgICBnYUV2YW50OiBmdW5jdGlvbiAoZ3RtRGF0YSkge1xyXG4gICAgICAgICAgICBkYXRhTGF5ZXIucHVzaCh7J2V2ZW50JzogZ3RtRGF0YX0pO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImdhOlwiLCBndG1EYXRhKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNlcnZlcl9idXN5OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZtLmVycm9yX21zZyA9IFwi57O757Wx5b+Z56KM5Lit77yM6KuL56iN5b6M5Zyo6KmmIVwiO1xyXG4gICAgICAgICAgICB2bS5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZtLmVycm9yX2NvdSA9IDY7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXRDb29raWU6IGZ1bmN0aW9uIChjbmFtZSwgY3ZhbHVlLCB0aW1lKSB7XHJcbiAgICAgICAgICAgIHZhciBkID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgZC5zZXRUaW1lKGQuZ2V0VGltZSgpICsgKHRpbWUgKiAxMDAwKSk7XHJcbiAgICAgICAgICAgIHZhciBleHBpcmVzID0gXCJleHBpcmVzPVwiICsgZC50b1VUQ1N0cmluZygpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBjbmFtZSArIFwiPVwiICsgY3ZhbHVlICsgXCI7XCIgKyBleHBpcmVzICsgXCI7XCI7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBsb2dnZXI6IGZ1bmN0aW9uIChsZXZlbCwgY29udGVudCwgdGFnKSB7XHJcbiAgICAgICAgICAgIGlmIChwcm9kdWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBsZXZlbCA6IFsnRVJST1InID0+IDAsIERFQlVHJyA9PiAxLCAnV0FSTklORycgPT4gMiwgJ0lORk8nID0+IDMsICdBTEwnID0+IDRdXHJcbiAgICAgICAgICAgICAgICB2YXIgbGV2ZWxfaW5mbyA9IFsnRVJST1InLCAnREVCVUcnLCAnV0FSTklORycsICdJTkZPJywgJ0FMTCddO1xyXG4gICAgICAgICAgICAgICAgX0xUcmFja2VyLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICdsZXZlbCc6IGxldmVsX2luZm9bbGV2ZWxdLFxyXG4gICAgICAgICAgICAgICAgICAgICdjb250ZW50JzogSlNPTi5zdHJpbmdpZnkoY29udGVudCksXHJcbiAgICAgICAgICAgICAgICAgICAgJ3BhdGgnOiB3aW5kb3cubG9jYXRpb24uaHJlZixcclxuICAgICAgICAgICAgICAgICAgICAndGFnJzogdGFnIHx8IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2RldmljZSc6IGRldmljZSxcclxuICAgICAgICAgICAgICAgICAgICAndGltZXN0YW1wJzogRGF0ZS5ub3coKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVycm9yRG9uZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yX21zZyA9IFwiXCI7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjaGVja09ubGluZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIW5hdmlnYXRvci5vbkxpbmUpIHtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwiSW50ZXJuZXQg6YCj57ea5bey5pa36ZaL77yM6KuL56K66KqN5oKo55qE57ay6Lev54uA5oWL44CCXCIpO1xyXG4gICAgICAgICAgICAgICAgLy8gd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdGF0ZV9jaGVjazogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gJC5hamF4KHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgICAgIHVybDogYCR7ZnJpZW5kb191cmx9R2V0UHJvamVjdEluZm9gLFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSByZXMuRGF0YTtcclxuICAgICAgICAgICAgICAgICAgICB2bS5zdGFydF9kYXRlID0gZGF0YS5TdGFydERhdGVUaW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLm1vZGUgPSBkYXRhLlN0YXR1cztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNjcm9sbFRvOiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICB2bS5yb29tID0gbnVsbDtcclxuICAgICAgICAgICAgdm0uYWxsUG9wdXBDbG9zZSgpO1xyXG4gICAgICAgICAgICAkKFwiaHRtbCxib2R5XCIpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiAkKGUpLm9mZnNldCgpLnRvcCAtIHZtLm5hdkhlaWdodFxyXG4gICAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcG9wdXBPcGVuOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgIGlmICghdm0ucG9wdXB0b3AgfHwgdm0ucG9wdXB0b3AgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHZtLnBvcHVwdG9wID0gTWF0aC5tYXgod2luZG93LnBhZ2VZT2Zmc2V0LCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wLCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdfZnJlZXplJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBwb3B1cENsb3NlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnX2ZyZWV6ZScpO1xyXG4gICAgICAgICAgICAkKCdodG1sLCBib2R5Jykuc2Nyb2xsVG9wKHZtLnBvcHVwdG9wKTtcclxuICAgICAgICAgICAgdm0ucG9wdXB0b3AgPSAwO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWZ0ZXJFbnRlcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICB2bS5wb3B1cE9wZW4oKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldFRva2VuOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAgICAgcmV0dXJuICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAvLyB1cmw6IFwiaHR0cHM6Ly9jYXJyZWZvdXIyMDE5Y255LmF6dXJld2Vic2l0ZXMubmV0L2FwaS9hdXRoL2xvZ2luP3Byb2plY3RJZD02MVwiLFxyXG4gICAgICAgICAgICAgICAgdXJsOiBgJHtmcmllbmRvX3VybH1hcGkvYXV0aC9sb2dpbj9wcm9qZWN0SWQ9NjFgLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgIFwid2VidG9rZW5cIjogXCIyWVJpSUdldmtqWlotUzIyaXd3dVNvYWpSY25aVVNlRUorZHdzbFR0TStzPVwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgY29tcG9uZW50czoge1xyXG4gICAgICAgIGNvbWluZ3Nvb246IGNvbWluZ3Nvb25cclxuICAgIH0sXHJcbiAgICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAvLyBmaXgtYm9keS1zcGFjZVxyXG4gICAgICAgIC8vIHZhciBuYXZIZWlnaHQgPSAkKCcud2luZG93LXRvcCcpLmhlaWdodCgpO1xyXG4gICAgICAgIC8vIHZtLm5hdkhlaWdodCA9IG5hdkhlaWdodCAtIDMwO1xyXG4gICAgICAgIC8vICQoJ2JvZHknKS5jc3MoJ21hcmdpbi10b3AnLCB2bS5uYXZIZWlnaHQpO1xyXG4gICAgICAgICQoXCIubmF2LWxvY2tcIikuY2xpY2soZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJChcImJvZHlcIikucmVtb3ZlQ2xhc3MoXCJfZnJlZXplXCIpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLy8gYWxlcnQoJ2EnKVxyXG4gICAgfVxyXG59KVxyXG5cclxuXHJcblZ1ZS5jb21wb25lbnQoJ2NvbWluZ3Nvb24nLCB7XHJcbiAgICB0ZW1wbGF0ZTogXCIjY29taW5nc29vblwiLFxyXG4gICAgcHJvcHM6IFsnU3RhcnREYXRlJywgJ21vZGUnXSxcclxuICAgIGRhdGE6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBjb21pbmdzb29uOiBmYWxzZSxcclxuICAgICAgICAgICAgZGF0ZToge1xyXG4gICAgICAgICAgICAgICAgdG90YWw6IDAsXHJcbiAgICAgICAgICAgICAgICBkYXlzOiAwLFxyXG4gICAgICAgICAgICAgICAgaG91cnM6IDAsXHJcbiAgICAgICAgICAgICAgICBtaW51dGVzOiAwLFxyXG4gICAgICAgICAgICAgICAgc2Vjb25kczogMFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSAgIFxyXG4gICAgfSxcclxuICAgIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcGFkTGVmdCA9IGZ1bmN0aW9uIChzdHIsIGxlbikge1xyXG4gICAgICAgICAgICBzdHIgPSAnJyArIHN0cjtcclxuICAgICAgICAgICAgaWYgKHN0ci5sZW5ndGggPj0gbGVuKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RyO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhZExlZnQoXCIwXCIgKyBzdHIsIGxlbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgLy8gdm0uc3RhdGVfY2hlY2soKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAvLyAgICAgdmFyIGRhdGEgPSByZXMuRGF0YTtcclxuICAgICAgICAvLyAgICAgdm0uc3RhcnRfZGF0ZSA9IGRhdGEuU3RhcnREYXRlVGltZTtcclxuICAgICAgICB2YXIgdGltZWludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdCA9IERhdGUucGFyc2UobmV3IERhdGUodm0uU3RhcnREYXRlKSkgLSBEYXRlLnBhcnNlKG5ldyBEYXRlKCkpO1xyXG4gICAgICAgICAgICB2YXIgc2Vjb25kcyA9IE1hdGguZmxvb3IoKHQgLyAxMDAwKSAlIDYwKTtcclxuICAgICAgICAgICAgdmFyIG1pbnV0ZXMgPSBNYXRoLmZsb29yKCh0IC8gMTAwMCAvIDYwKSAlIDYwKTtcclxuICAgICAgICAgICAgdmFyIGhvdXJzID0gTWF0aC5mbG9vcigodCAvICgxMDAwICogNjAgKiA2MCkpICUgMjQpO1xyXG4gICAgICAgICAgICB2YXIgZGF5cyA9IE1hdGguZmxvb3IodCAvICgxMDAwICogNjAgKiA2MCAqIDI0KSk7XHJcbiAgICAgICAgICAgIHZtLmRhdGUgPSB7XHJcbiAgICAgICAgICAgICAgICAndG90YWwnOiB0LFxyXG4gICAgICAgICAgICAgICAgJ2RheXMnOiBwYWRMZWZ0KGRheXMsIDIpLFxyXG4gICAgICAgICAgICAgICAgJ2hvdXJzJzogcGFkTGVmdChob3VycywgMiksXHJcbiAgICAgICAgICAgICAgICAnbWludXRlcyc6IHBhZExlZnQobWludXRlcywgMiksXHJcbiAgICAgICAgICAgICAgICAnc2Vjb25kcyc6IHBhZExlZnQoc2Vjb25kcywgMilcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaWYgKHZtLmRhdGUudG90YWwgPD0gMCB8fCB2bS5tb2RlID09IFwiVGVzdGluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVpbnRlcnZhbCk7XHJcbiAgICAgICAgICAgICAgICB2bS5jb21pbmdzb29uID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2bS5jb21pbmdzb29uID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIDEwMDApO1xyXG4gICAgICAgIC8vIH0pO1xyXG4gICAgfSxcclxufSlcclxuIl19
