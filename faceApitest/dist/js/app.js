"use strict";var production="false"===$("#appjs").data("mode"),friendo_url=$("#appjs").data("site"),device=deviceCheck();Vue.config.devtools=!production,Vue.config.debug=!production,Vue.config.silent=!production;var md=new MobileDetect(window.navigator.userAgent),tag=document.createElement("script");function findGetParameter(e){var t=null,n=[];return location.search.substr(1).split("&").forEach(function(o){(n=o.split("="))[0]===e&&(t=decodeURIComponent(n[1]))}),t}function checkCookie(e){var t=null,n=[];return document.cookie.split(";").forEach(function(o){" "==o.charAt(0)&&(o=o.substring(1)),(n=o.split("="))[0]===e&&(t=n[1])}),t}function deviceCheck(){var o={},e=new MobileDetect(window.navigator.userAgent);return e.match(/android/i)?(o.os="android",o.version=e.version("android")):e.match(/(iphone|ipad|ipod);?/i)?(o.os="ios",o.version=e.version("iOS")):(o.os="pc",o.version=e.version("Chrome")),o}$(function(){console.log("v1.0"),console.log(device),$(".nav").menu()}),Vue.mixin({data:function(){return{status:"",start_date:"2100/08/09 12:09:10",error_msg:"",mode:production?"Started":"Testing",loading:!1,popuptop:"",navHeight:"",rewardShake:!0,lineHref:""}},computed:{openCome:function(){return!("Testing"==this.mode||start_date<=0)}},watch:{error_msg:function(o){$("body").toggleClass("_freeze")}},methods:{gaEvant:function(o){dataLayer.push({event:o}),console.log("ga:",o)},server_busy:function(){var o=this;o.error_msg="系統忙碌中，請稍後在試!",o.loading=!1,o.error_cou=6},setCookie:function(o,e,t){var n=new Date;n.setTime(n.getTime()+1e3*t);var r="expires="+n.toUTCString();document.cookie=o+"="+e+";"+r+";"},logger:function(o,e,t){if(production){_LTracker.push({level:["ERROR","DEBUG","WARNING","INFO","ALL"][o],content:JSON.stringify(e),path:window.location.href,tag:t||null,device:device,timestamp:Date.now()})}},errorDone:function(){this.error_msg=""},checkOnline:function(){navigator.onLine||alert("Internet 連線已斷開，請確認您的網路狀態。")},state_check:function(){var t=this;return $.ajax({method:"GET",url:friendo_url+"GetProjectInfo",success:function(o){var e=o.Data;t.start_date=e.StartDateTime,t.mode=e.Status}})},scrollTo:function(o){var e=this;e.room=null,e.allPopupClose(),$("html,body").animate({scrollTop:$(o).offset().top-e.navHeight},500)},popupOpen:function(){var o=this;o.popuptop&&0!==o.popuptop||(o.popuptop=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop)),$("body").addClass("_freeze")},popupClose:function(){$("body").removeClass("_freeze"),$("html, body").scrollTop(this.popuptop),this.popuptop=0},afterEnter:function(){this.popupOpen()},getToken:function(){return $.ajax({url:friendo_url+"api/auth/login?projectId=61",headers:{webtoken:"2YRiIGevkjZZ-S22iwwuSoajRcnZUSeEJ+dwslTtM+s="},method:"GET",dataType:"json"})}},components:{comingsoon:comingsoon},mounted:function(){var o=$(".window-top").height();this.navHeight=o-30,$("body").css("margin-top",this.navHeight),$(".nav-lock").click(function(){$("body").removeClass("_freeze")}),alert("a")}}),Vue.component("comingsoon",{template:"#comingsoon",props:["StartDate","mode"],data:function(){return{comingsoon:!1,date:{total:0,days:0,hours:0,minutes:0,seconds:0}}},mounted:function(){var i=function o(e,t){return(e=""+e).length>=t?e:o("0"+e,t)},a=this,s=setInterval(function(){var o=Date.parse(new Date(a.StartDate))-Date.parse(new Date),e=Math.floor(o/1e3%60),t=Math.floor(o/1e3/60%60),n=Math.floor(o/36e5%24),r=Math.floor(o/864e5);a.date={total:o,days:i(r,2),hours:i(n,2),minutes:i(t,2),seconds:i(e,2)},a.date.total<=0||"Testing"==a.mode?(clearInterval(s),a.comingsoon=!1):a.comingsoon=!0},1e3)}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJwcm9kdWN0aW9uIiwiJCIsImRhdGEiLCJkZXZpY2UiLCJkZXZpY2VDaGVjayIsIlZ1ZSIsImNvbmZpZyIsImRldnRvb2xzIiwiZGVidWciLCJtZCIsIk1vYmlsZURldGVjdCIsIndpbmRvdyIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRhZyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImZpbmRHZXRQYXJhbWV0ZXIiLCJwYXJhbWV0ZXJOYW1lIiwicmVzdWx0IiwidG1wIiwibG9jYXRpb24iLCJzZWFyY2giLCJpdGVtIiwic3BsaXQiLCJmb3JFYWNoIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiY29va2llIiwiY2hhckF0Iiwic3Vic3RyaW5nIiwidmVyc2lvbiIsInN0YXJ0X2RhdGUiLCJtYXRjaCIsIm9zIiwiY29uc29sZSIsImxvZyIsIm1vZGUiLCJsb2FkaW5nIiwicG9wdXB0b3AiLCJuYXZIZWlnaHQiLCJyZXdhcmRTaGFrZSIsImxpbmVIcmVmIiwiY29tcHV0ZWQiLCJvcGVuQ29tZSIsImVycm9yX21zZyIsInRoaXMiLCJnYUV2YW50IiwiZGF0YUxheWVyIiwidmFsIiwiZ3RtRGF0YSIsIm1ldGhvZHMiLCJ2bSIsInB1c2giLCJldmVudCIsImVycm9yX2NvdSIsInNldENvb2tpZSIsImQiLCJzZXRUaW1lIiwiZ2V0VGltZSIsImV4cGlyZXMiLCJsb2dnZXIiLCJjbmFtZSIsImxldmVsIiwiY29udGVudCIsInRpbWUiLCJsZXZlbF9pbmZvIiwidG9VVENTdHJpbmciLCJfTFRyYWNrZXIiLCJjdmFsdWUiLCJKU09OIiwic3RyaW5naWZ5IiwicGF0aCIsImhyZWYiLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwiZXJyb3JEb25lIiwic3RhdGVfY2hlY2siLCJvbkxpbmUiLCJhbGVydCIsImFqYXgiLCJ1cmwiLCJmcmllbmRvX3VybCIsInN1Y2Nlc3MiLCJyZXMiLCJEYXRhIiwiU3RhcnREYXRlVGltZSIsIlN0YXR1cyIsInNjcm9sbFRvIiwiZSIsInBvcHVwT3BlbiIsImFsbFBvcHVwQ2xvc2UiLCJNYXRoIiwicGFnZVlPZmZzZXQiLCJwb3B1cENsb3NlIiwicmVtb3ZlQ2xhc3MiLCJtYXgiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JvbGxUb3AiLCJib2R5IiwiYWZ0ZXJFbnRlciIsImdldFRva2VuIiwibWV0aG9kIiwiaGVhZGVycyIsIndlYnRva2VuIiwiY29taW5nc29vbiIsImRhdGFUeXBlIiwiY29tcG9uZW50cyIsImhlaWdodCIsImNzcyIsImNsaWNrIiwiY29tcG9uZW50IiwicHJvcHMiLCJ0b3RhbCIsImRheXMiLCJob3VycyIsIm1pbnV0ZXMiLCJzZWNvbmRzIiwiZGF0ZSIsInBhZExlZnQiLCJzdHIiLCJsZW5ndGgiLCJtb3VudGVkIiwibGVuIiwidGltZWludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJ0IiwiU3RhcnREYXRlIiwicGFyc2UiLCJmbG9vciIsImNsZWFySW50ZXJ2YWwiXSwibWFwcGluZ3MiOiJhQUFBLElBQ0lBLFdBQTBDLFVBQTdCQyxFQUFFLFVBQVVDLEtBQUssUUFBOUJGLFlBQWFDLEVBQUUsVUFBVUMsS0FBSyxRQUc1QkMsT0FBU0MsY0FFZkMsSUFBSUMsT0FBT0MsVUFBWVAsV0FBdkJLLElBQUlDLE9BQU9DLE9BQVhQLFdBQ0FLLElBQUlDLE9BQU9FLFFBQVNSLFdBR3BCLElBQUlTLEdBQUssSUFBSUMsYUFBYUMsT0FBT0MsVUFBVUMsV0FFdkNDLElBQU1DLFNBQVNDLGNBQWMsVUFTakMsU0FBU0MsaUJBQWlCQyxHQUN0QixJQUFJQyxFQUFTLEtBQ1RDLEVBQU0sR0FhVixPQVpBQyxTQUFTQyxPQUlERixPQUFNRyxHQUNOQyxNQUFJSixLQUxaSyxRQUFBLFNBQUFGLElBUU9KLEVBQVBJLEVBQUFDLE1BQUEsTUFDSCxLQUFBTixJQUhlQyxFQUFTTyxtQkFBbUJOLEVBQUksT0FNeENELEVBR0pRLFNBQUFBLFlBQUFULEdBRVEsSUFBQUMsRUFBU1MsS0FDTEwsRUFBQUEsR0FZUnBC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QUFBTyxFQUhILElBQUEsSUFJTlYsRUFBQXhCLEtBQVcyQixNQUFRSCxFQUFSLElBSkwsR0FBQSxJQUtORCxFQUFBdkIsS0FBVzJCLE1BQVFGLEVBQUFBLEtBQVIsSUFMZkgsRUFBQXRCLEtBQUFxQyxNQUFBSCxFQUFBQSxPQU9BM0UsRUFBQW1FLEtBQU9BLENBQ0hZLE1BQUFBLEVBQ0EvRSxLQUFHc0QsRUFBYVMsRUFBaEIsR0FGSkMsTUFHT0ksRUFBQUosRUFBQSxHQUNIaEUsUUFBR3NELEVBQWFXLEVBQWhCLEdBQ0hDLFFBQUFFLEVBQUFGLEVBQUEsSUFFTGxFLEVBQUFtRSxLQUFBTCxPQUFBLEdBQUEsV0FBQTlELEVBQUFmLE1BQ0g4RixjQUFBTixHQWpETHpFLEVBQUFzRCxZQUFBLEdBNkNnQnRELEVBQUdzRCxZQUFhLEdBRXJCIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0XHJcbiAgICBwcm9kdWN0aW9uID0gJChcIiNhcHBqc1wiKS5kYXRhKFwibW9kZVwiKSA9PT0gXCJmYWxzZVwiLFxyXG4gICAgZnJpZW5kb191cmwgPSAkKFwiI2FwcGpzXCIpLmRhdGEoXCJzaXRlXCIpO1xyXG5cclxuY29uc3QgZGV2aWNlID0gZGV2aWNlQ2hlY2soKTtcclxuXHJcblZ1ZS5jb25maWcuZGV2dG9vbHMgPSAhcHJvZHVjdGlvbjtcclxuVnVlLmNvbmZpZy5kZWJ1ZyA9ICFwcm9kdWN0aW9uO1xyXG5WdWUuY29uZmlnLnNpbGVudCA9ICFwcm9kdWN0aW9uO1xyXG5cclxudmFyIG1kID0gbmV3IE1vYmlsZURldGVjdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcblxyXG52YXIgdGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnNvbGUubG9nKFwidjEuMFwiKTtcclxuICAgIGNvbnNvbGUubG9nKGRldmljZSk7XHJcbiAgICAkKFwiLm5hdlwiKS5tZW51KCk7XHJcbn0pO1xyXG5cclxuXHJcbmZ1bmN0aW9uIGZpbmRHZXRQYXJhbWV0ZXIocGFyYW1ldGVyTmFtZSkge1xyXG4gICAgdmFyIHJlc3VsdCA9IG51bGwsXHJcbiAgICAgICAgdG1wID0gW107XHJcbiAgICBsb2NhdGlvbi5zZWFyY2hcclxuICAgICAgICAuc3Vic3RyKDEpXHJcbiAgICAgICAgLnNwbGl0KFwiJlwiKVxyXG4gICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgIHRtcCA9IGl0ZW0uc3BsaXQoXCI9XCIpO1xyXG4gICAgICAgICAgICBpZiAodG1wWzBdID09PSBwYXJhbWV0ZXJOYW1lKVxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gZGVjb2RlVVJJQ29tcG9uZW50KHRtcFsxXSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja0Nvb2tpZShwYXJhbWV0ZXJOYW1lKSB7XHJcbiAgICB2YXIgcmVzdWx0ID0gbnVsbCxcclxuICAgICAgICB0bXAgPSBbXTtcclxuICAgIHZhciBjb29raWUgPSBkb2N1bWVudC5jb29raWU7XHJcbiAgICBjb29raWUuc3BsaXQoXCI7XCIpXHJcbiAgICAgICAgLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgaWYgKGl0ZW0uY2hhckF0KDApID09IFwiIFwiKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtID0gaXRlbS5zdWJzdHJpbmcoMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdG1wID0gaXRlbS5zcGxpdChcIj1cIik7XHJcbiAgICAgICAgICAgIGlmICh0bXBbMF0gPT09IHBhcmFtZXRlck5hbWUpXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0bXBbMV07XHJcbiAgICAgICAgfSlcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuZnVuY3Rpb24gZGV2aWNlQ2hlY2soKSB7XHJcbiAgICB2YXIgZGV2aWNlID0ge307XHJcbiAgICB2YXIgbWQgPSBuZXcgTW9iaWxlRGV0ZWN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KTtcclxuICAgIGlmIChtZC5tYXRjaCgvYW5kcm9pZC9pKSkge1xyXG4gICAgICAgIGRldmljZS5vcyA9IFwiYW5kcm9pZFwiO1xyXG4gICAgICAgIGRldmljZS52ZXJzaW9uID0gbWQudmVyc2lvbihcImFuZHJvaWRcIik7XHJcbiAgICB9IGVsc2UgaWYgKG1kLm1hdGNoKC8oaXBob25lfGlwYWR8aXBvZCk7Py9pKSkge1xyXG4gICAgICAgIGRldmljZS5vcyA9IFwiaW9zXCI7XHJcbiAgICAgICAgZGV2aWNlLnZlcnNpb24gPSBtZC52ZXJzaW9uKFwiaU9TXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBkZXZpY2Uub3MgPSBcInBjXCI7XHJcbiAgICAgICAgZGV2aWNlLnZlcnNpb24gPSBtZC52ZXJzaW9uKFwiQ2hyb21lXCIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRldmljZTtcclxufVxyXG5WdWUubWl4aW4oe1xyXG4gICAgZGF0YTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN0YXR1czogXCJcIixcclxuICAgICAgICAgICAgc3RhcnRfZGF0ZTogXCIyMTAwLzA4LzA5IDEyOjA5OjEwXCIsXHJcbiAgICAgICAgICAgIGVycm9yX21zZzogXCJcIixcclxuICAgICAgICAgICAgbW9kZTogcHJvZHVjdGlvbiA/IFwiU3RhcnRlZFwiIDogXCJUZXN0aW5nXCIsXHJcbiAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICBwb3B1cHRvcDogXCJcIixcclxuICAgICAgICAgICAgbmF2SGVpZ2h0OiBcIlwiLFxyXG4gICAgICAgICAgICByZXdhcmRTaGFrZTogdHJ1ZSxcclxuICAgICAgICAgICAgbGluZUhyZWY6ICcnLFxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBjb21wdXRlZDoge1xyXG4gICAgICAgIG9wZW5Db21lOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhKHRoaXMubW9kZSA9PSBcIlRlc3RpbmdcIiB8fCBzdGFydF9kYXRlIDw9IDApO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICB3YXRjaDoge1xyXG4gICAgICAgIGVycm9yX21zZzogZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgICAgICAgICAkKCdib2R5JykudG9nZ2xlQ2xhc3MoJ19mcmVlemUnKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgbWV0aG9kczoge1xyXG4gICAgICAgIGdhRXZhbnQ6IGZ1bmN0aW9uIChndG1EYXRhKSB7XHJcbiAgICAgICAgICAgIGRhdGFMYXllci5wdXNoKHsnZXZlbnQnOiBndG1EYXRhfSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZ2E6XCIsIGd0bURhdGEpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2VydmVyX2J1c3k6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAgICAgdm0uZXJyb3JfbXNnID0gXCLns7vntbHlv5nnoozkuK3vvIzoq4vnqI3lvozlnKjoqaYhXCI7XHJcbiAgICAgICAgICAgIHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgdm0uZXJyb3JfY291ID0gNjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldENvb2tpZTogZnVuY3Rpb24gKGNuYW1lLCBjdmFsdWUsIHRpbWUpIHtcclxuICAgICAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICBkLnNldFRpbWUoZC5nZXRUaW1lKCkgKyAodGltZSAqIDEwMDApKTtcclxuICAgICAgICAgICAgdmFyIGV4cGlyZXMgPSBcImV4cGlyZXM9XCIgKyBkLnRvVVRDU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNuYW1lICsgXCI9XCIgKyBjdmFsdWUgKyBcIjtcIiArIGV4cGlyZXMgKyBcIjtcIjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxvZ2dlcjogZnVuY3Rpb24gKGxldmVsLCBjb250ZW50LCB0YWcpIHtcclxuICAgICAgICAgICAgaWYgKHByb2R1Y3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIC8vIGxldmVsIDogWydFUlJPUicgPT4gMCwgREVCVUcnID0+IDEsICdXQVJOSU5HJyA9PiAyLCAnSU5GTycgPT4gMywgJ0FMTCcgPT4gNF1cclxuICAgICAgICAgICAgICAgIHZhciBsZXZlbF9pbmZvID0gWydFUlJPUicsICdERUJVRycsICdXQVJOSU5HJywgJ0lORk8nLCAnQUxMJ107XHJcbiAgICAgICAgICAgICAgICBfTFRyYWNrZXIucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2xldmVsJzogbGV2ZWxfaW5mb1tsZXZlbF0sXHJcbiAgICAgICAgICAgICAgICAgICAgJ2NvbnRlbnQnOiBKU09OLnN0cmluZ2lmeShjb250ZW50KSxcclxuICAgICAgICAgICAgICAgICAgICAncGF0aCc6IHdpbmRvdy5sb2NhdGlvbi5ocmVmLFxyXG4gICAgICAgICAgICAgICAgICAgICd0YWcnOiB0YWcgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAnZGV2aWNlJzogZGV2aWNlLFxyXG4gICAgICAgICAgICAgICAgICAgICd0aW1lc3RhbXAnOiBEYXRlLm5vdygpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXJyb3JEb25lOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXJyb3JfbXNnID0gXCJcIjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNoZWNrT25saW5lOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghbmF2aWdhdG9yLm9uTGluZSkge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCJJbnRlcm5ldCDpgKPnt5rlt7LmlrfplovvvIzoq4vnorroqo3mgqjnmoTntrLot6/ni4DmhYvjgIJcIik7XHJcbiAgICAgICAgICAgICAgICAvLyB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHN0YXRlX2NoZWNrOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICAgICAgdXJsOiBgJHtmcmllbmRvX3VybH1HZXRQcm9qZWN0SW5mb2AsXHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHJlcy5EYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLnN0YXJ0X2RhdGUgPSBkYXRhLlN0YXJ0RGF0ZVRpbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0ubW9kZSA9IGRhdGEuU3RhdHVzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2Nyb2xsVG86IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZtLnJvb20gPSBudWxsO1xyXG4gICAgICAgICAgICB2bS5hbGxQb3B1cENsb3NlKCk7XHJcbiAgICAgICAgICAgICQoXCJodG1sLGJvZHlcIikuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGxUb3A6ICQoZSkub2Zmc2V0KCkudG9wIC0gdm0ubmF2SGVpZ2h0XHJcbiAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBwb3B1cE9wZW46IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAgICAgaWYgKCF2bS5wb3B1cHRvcCB8fCB2bS5wb3B1cHRvcCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdm0ucG9wdXB0b3AgPSBNYXRoLm1heCh3aW5kb3cucGFnZVlPZmZzZXQsIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AsIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ19mcmVlemUnKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHBvcHVwQ2xvc2U6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAgICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCdfZnJlZXplJyk7XHJcbiAgICAgICAgICAgICQoJ2h0bWwsIGJvZHknKS5zY3JvbGxUb3Aodm0ucG9wdXB0b3ApO1xyXG4gICAgICAgICAgICB2bS5wb3B1cHRvcCA9IDA7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBhZnRlckVudGVyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZtLnBvcHVwT3BlbigpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0VG9rZW46IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gJC5hamF4KHtcclxuICAgICAgICAgICAgICAgIC8vIHVybDogXCJodHRwczovL2NhcnJlZm91cjIwMTljbnkuYXp1cmV3ZWJzaXRlcy5uZXQvYXBpL2F1dGgvbG9naW4/cHJvamVjdElkPTYxXCIsXHJcbiAgICAgICAgICAgICAgICB1cmw6IGAke2ZyaWVuZG9fdXJsfWFwaS9hdXRoL2xvZ2luP3Byb2plY3RJZD02MWAsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJ3ZWJ0b2tlblwiOiBcIjJZUmlJR2V2a2paWi1TMjJpd3d1U29halJjblpVU2VFSitkd3NsVHRNK3M9XCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBjb21wb25lbnRzOiB7XHJcbiAgICAgICAgY29taW5nc29vbjogY29taW5nc29vblxyXG4gICAgfSxcclxuICAgIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgIC8vIGZpeC1ib2R5LXNwYWNlXHJcbiAgICAgICAgdmFyIG5hdkhlaWdodCA9ICQoJy53aW5kb3ctdG9wJykuaGVpZ2h0KCk7XHJcbiAgICAgICAgdm0ubmF2SGVpZ2h0ID0gbmF2SGVpZ2h0IC0gMzA7XHJcbiAgICAgICAgJCgnYm9keScpLmNzcygnbWFyZ2luLXRvcCcsIHZtLm5hdkhlaWdodCk7XHJcbiAgICAgICAgJChcIi5uYXYtbG9ja1wiKS5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAkKFwiYm9keVwiKS5yZW1vdmVDbGFzcyhcIl9mcmVlemVcIik7XHJcbiAgICAgICAgfSlcclxuICAgICAgICBhbGVydCgnYScpXHJcbiAgICB9XHJcbn0pXHJcblxyXG5cclxuVnVlLmNvbXBvbmVudCgnY29taW5nc29vbicsIHtcclxuICAgIHRlbXBsYXRlOiBcIiNjb21pbmdzb29uXCIsXHJcbiAgICBwcm9wczogWydTdGFydERhdGUnLCAnbW9kZSddLFxyXG4gICAgZGF0YTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGNvbWluZ3Nvb246IGZhbHNlLFxyXG4gICAgICAgICAgICBkYXRlOiB7XHJcbiAgICAgICAgICAgICAgICB0b3RhbDogMCxcclxuICAgICAgICAgICAgICAgIGRheXM6IDAsXHJcbiAgICAgICAgICAgICAgICBob3VyczogMCxcclxuICAgICAgICAgICAgICAgIG1pbnV0ZXM6IDAsXHJcbiAgICAgICAgICAgICAgICBzZWNvbmRzOiAwXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ICAgXHJcbiAgICB9LFxyXG4gICAgbW91bnRlZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBwYWRMZWZ0ID0gZnVuY3Rpb24gKHN0ciwgbGVuKSB7XHJcbiAgICAgICAgICAgIHN0ciA9ICcnICsgc3RyO1xyXG4gICAgICAgICAgICBpZiAoc3RyLmxlbmd0aCA+PSBsZW4pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdHI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFkTGVmdChcIjBcIiArIHN0ciwgbGVuKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAvLyB2bS5zdGF0ZV9jaGVjaygpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgIC8vICAgICB2YXIgZGF0YSA9IHJlcy5EYXRhO1xyXG4gICAgICAgIC8vICAgICB2bS5zdGFydF9kYXRlID0gZGF0YS5TdGFydERhdGVUaW1lO1xyXG4gICAgICAgIHZhciB0aW1laW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB0ID0gRGF0ZS5wYXJzZShuZXcgRGF0ZSh2bS5TdGFydERhdGUpKSAtIERhdGUucGFyc2UobmV3IERhdGUoKSk7XHJcbiAgICAgICAgICAgIHZhciBzZWNvbmRzID0gTWF0aC5mbG9vcigodCAvIDEwMDApICUgNjApO1xyXG4gICAgICAgICAgICB2YXIgbWludXRlcyA9IE1hdGguZmxvb3IoKHQgLyAxMDAwIC8gNjApICUgNjApO1xyXG4gICAgICAgICAgICB2YXIgaG91cnMgPSBNYXRoLmZsb29yKCh0IC8gKDEwMDAgKiA2MCAqIDYwKSkgJSAyNCk7XHJcbiAgICAgICAgICAgIHZhciBkYXlzID0gTWF0aC5mbG9vcih0IC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTtcclxuICAgICAgICAgICAgdm0uZGF0ZSA9IHtcclxuICAgICAgICAgICAgICAgICd0b3RhbCc6IHQsXHJcbiAgICAgICAgICAgICAgICAnZGF5cyc6IHBhZExlZnQoZGF5cywgMiksXHJcbiAgICAgICAgICAgICAgICAnaG91cnMnOiBwYWRMZWZ0KGhvdXJzLCAyKSxcclxuICAgICAgICAgICAgICAgICdtaW51dGVzJzogcGFkTGVmdChtaW51dGVzLCAyKSxcclxuICAgICAgICAgICAgICAgICdzZWNvbmRzJzogcGFkTGVmdChzZWNvbmRzLCAyKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpZiAodm0uZGF0ZS50b3RhbCA8PSAwIHx8IHZtLm1vZGUgPT0gXCJUZXN0aW5nXCIpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZWludGVydmFsKTtcclxuICAgICAgICAgICAgICAgIHZtLmNvbWluZ3Nvb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZtLmNvbWluZ3Nvb24gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgLy8gfSk7XHJcbiAgICB9LFxyXG59KVxyXG4iXX0=
