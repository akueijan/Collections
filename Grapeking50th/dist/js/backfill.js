"use strict";var backfill_view=new Vue({el:"#app",data:{type:"",fblogin:!1,userid:"",mobile:"",inv_num:"",awarditem:"",name:"",address:"",IdcardFrontShow:"",IdcardBackShow:"",BankbookShow:"",CertificatePhotoShow:"",IdcardFront:null,IdcardBack:null,Bankbook:null,CertificatePhoto:null,agree:!1,ploading:!0},watch:{IdcardFront:function(){""==!this.IdcardFrontShow&&($("#frontpre p").css("display","none"),$("#frontpre img").css("opacity","1"))},IdcardBack:function(){""==!this.IdcardBackShow&&($("#backpre p").css("display","none"),$("#backpre img").css("opacity","1"))},Bankbook:function(){""==!this.BankbookShow&&($("#bankpre p").css("display","none"),$("#bankpre img").css("opacity","1"))},CertificatePhoto:function(){""==!this.CertificatePhotoShow&&($("#certificatepre p").css("display","none"),$("#certificatepre img").css("opacity","1"))}},methods:{readfront:function(){var t=this;document.getElementById("front").addEventListener("change",function(){var e=new FileReader;e.readAsDataURL(this.files[0]),e.onload=function(e){t.IdcardFront=e.target.result}},!1)},readpoto:function(e){var t=this,n=e.target.files.item(0),o=e.target.id;console.log(e),console.log(e.target.id),console.log(n);var i=new FileReader;i.addEventListener("load",function(e){"front"==o&&(t.IdcardFrontShow=e.target.result,t.IdcardFront=n);"back"==o&&(t.IdcardBackShow=e.target.result,t.IdcardBack=n);"bank"==o&&(t.BankbookShow=e.target.result,t.Bankbook=n);"certificate"==o&&(t.CertificatePhotoShow=e.target.result,t.CertificatePhoto=n)}),i.readAsDataURL(n)},getUserid:function(){var n=this;return new Promise(function(e,t){n.userid=findGetParameter("user"),e()})},postback:function(){var t=this;if("FB"==t.type){if(!t.loading){if(t.loading=!0,!t.name)return alert("請填入收件人"),void(t.loading=!1);if(!t.address)return alert("請填入地址"),void(t.loading=!1);if(!t.fbData.fb_id)return alert("請先登入FB"),void(t.loading=!1);if(!t.agree)return alert("請勾選我已詳閱"),void(t.loading=!1);t.getToken().then(function(){t.grecaptcha("backfill").then(function(){t.postRecipientinfo().then(function(e){e.success?alert("資料已送出，感謝您的參與！"):alert("您並無資格領取此獎項。"),window.location.href="./index.html",t.loading=!1})})})}}else if(!t.loading){if(t.loading=!0,!t.name)return alert("請填入收件人"),void(t.loading=!1);if(!t.address)return alert("請填入地址"),void(t.loading=!1);if(!t.CertificatePhoto)return alert("請上傳發票正本電子檔"),void(t.loading=!1);if(!t.agree)return alert("請勾選我已詳閱"),void(t.loading=!1);t.getToken().then(function(){t.grecaptcha("backfill").then(function(){t.postRecipientinfo().then(function(e){e.success?(alert("資料已送出，感謝您的參與！"),window.location.href="./index.html"):alert(e.responseMessage),t.loading=!1})})})}},fbLogin:function(){var t=this;FB.login(function(e){"connected"===e.status&&(t.fbData.token=e.authResponse.accessToken,t.fbData.fb_id=e.authResponse.userID,FB.api("/me","GET",{fields:"id,name,picture"},function(e){console.log(e),t.fbData.fbName=e.name,t.fbData.fbPic="http://graph.facebook.com/"+e.id+"/picture?width=140&height=140",t.fblogin=!0}))})}},created:function(){var e=this;e.getUserid().then(function(){e.getToken().then(function(){e.getRecipientinfo()})})},mounted:function(){var e,t,n,o,i;$(".nav_events").click(function(){location.href="./index.html#events"}),window.fbAsyncInit=function(){FB.init({appId:"431893260759072",status:!0,cookie:!0,xfbml:!1,version:"v4.0"})},e=document,t="script",n="facebook-jssdk",i=e.getElementsByTagName(t)[0],e.getElementById(n)||((o=e.createElement(t)).id=n,o.src="https://connect.facebook.net/en_US/sdk.js",i.parentNode.insertBefore(o,i))}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhY2tmaWxsLmpzIl0sIm5hbWVzIjpbImJhY2tmaWxsX3ZpZXciLCJWdWUiLCJlbCIsInR5cGUiLCJmYmxvZ2luIiwidXNlcmlkIiwibW9iaWxlIiwiaW52X251bSIsImF3YXJkaXRlbSIsIklkY2FyZEZyb250U2hvdyIsImFkZHJlc3MiLCJJZGNhcmRCYWNrU2hvdyIsIkJhbmtib29rU2hvdyIsIkNlcnRpZmljYXRlUGhvdG9TaG93IiwiSWRjYXJkRnJvbnQiLCJDZXJ0aWZpY2F0ZVBob3RvIiwiSWRjYXJkQmFjayIsInBsb2FkaW5nIiwid2F0Y2giLCJ0aGlzIiwiJCIsImNzcyIsIm1ldGhvZHMiLCJ2bSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsInJlYWRBc0RhdGFVUkwiLCJmaWxlcyIsIm9ubG9hZCIsImUiLCJ0YXJnZXQiLCJyZXN1bHQiLCJyZWFkcG90byIsInJlYWRGaWxlIiwiaWQiLCJjb25zb2xlIiwibG9nIiwiZmlsZSIsImltZ0xvYWQiLCJnZXRVc2VyaWQiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImZpbmRHZXRQYXJhbWV0ZXIiLCJsb2FkaW5nIiwiYWxlcnQiLCJmYkRhdGEiLCJmYl9pZCIsImFncmVlIiwiZ2V0VG9rZW4iLCJ0aGVuIiwiZ3JlY2FwdGNoYSIsInBvc3RSZWNpcGllbnRpbmZvIiwicmVzIiwic3VjY2VzcyIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsIm5hbWUiLCJyZXNwb25zZU1lc3NhZ2UiLCJmYkxvZ2luIiwiRkIiLCJsb2dpbiIsInN0YXR1cyIsImF1dGhSZXNwb25zZSIsImFjY2Vzc1Rva2VuIiwidXNlcklEIiwiYXBpIiwiZmllbGRzIiwiYXBpcmVzIiwiZmJOYW1lIiwiZmJQaWMiLCJtb3VudGVkIiwiZCIsImpzIiwiZmpzIiwiY2xpY2siLCJmYkFzeW5jSW5pdCIsImluaXQiLCJhcHBJZCIsImNvb2tpZSIsInhmYm1sIiwidmVyc2lvbiIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicyIsImNyZWF0ZUVsZW1lbnQiLCJzcmMiLCJpbnNlcnRCZWZvcmUiXSwibWFwcGluZ3MiOiJhQUFBLElBQUlBLGNBQWdCLElBQUlDLElBQUksQ0FDeEJDLEdBQUksT0FESkYsS0FBQUEsQ0FDSUcsS0FEb0IsR0FFbEJDLFNBQUEsRUFDRUMsT0FERixHQUVGRCxPQUFTLEdBQ1RDLFFBSEUsR0FJRkMsVUFKRSxHQUtGQyxLQUFTLEdBQ1RDLFFBTkUsR0FPRUMsZ0JBUEYsR0FRRkMsZUFSRSxHQVNGRCxhQUFpQixHQUNqQkUscUJBVkUsR0FXRkMsWUFYRSxLQVlGQyxXQUFBQSxLQUNBQyxTQUFhLEtBQU1DLGlCQUFBLEtBQ25CQyxPQUFVLEVBQVFDLFVBQUEsR0FDRkMsTUFBQSxDQUNoQkgsWUFBZ0IsV0FoQmQsS0FnQnNCSSxLQWhCdEJWLGtCQWtCUVcsRUFBQSxlQUFBQyxJQUFBLFVBQUEsUUFwQlVELEVBQUEsaUJBQUFDLElBQUEsVUFBQSxPQXdCaEJMLFdBQUEsV0FDOEIsS0FNckJHLEtBTkZWLGlCQUNEVyxFQUFBLGNBQW1CQyxJQUFBLFVBQXJCLFFBQ0VELEVBQUEsZ0JBQXFCQyxJQUFBLFVBQXZCLE9BR1JMLFNBQVksV0FTZSxLQVJ2QkcsS0FRT1AsZUFQQUQsRUFBQUEsY0FBa0JVLElBQUksVUFBQSxRQUN2QkQsRUFBQSxnQkFBa0JDLElBQXBCLFVBQUEsT0FYTE4saUJBQUEsV0FnQkMsS0FETUksS0FDTk4sdUJBU0lPLEVBQUUscUJBQXFCQyxJQUFJLFVBQVUsUUFSbENULEVBQUFBLHVCQUFvQlMsSUFBQSxVQUFBLFFBSTlCQyxRQXJCRSxDQXNCSFAsVUF0QkcsV0F1Qk8sSUFBR1EsRUFBVEosS0FnQkFLLFNBQUFDLGVBQUEsU0FZQUMsaUJBQUEsU0FlQSxXQUNBLElBQUFDLEVBQUEsSUFBQUMsV0FDQUQsRUFBQUUsY0FBQVYsS0FBQVcsTUFBQSxJQUNBSCxFQUFBSSxPQUFBLFNBQUFDLEdBQ0FULEVBQUFULFlBQUFrQixFQUFBQyxPQUFBQyxVQW5CQSxJQXdCQUMsU0EzRUQsU0EyRVVDLEdBQ0RULElBQUFBLEVBQVNSLEtBQ05VLEVBQUFBLEVBQUFBLE9BQWNDLE1BQUtBLEtBQTFCLEdBV0FPLEVBQUtMLEVBQUVDLE9BQU9JLEdBVmRWLFFBQU9JLElBQVNDLEdBQ1ZNLFFBQUN4QixJQUFIa0IsRUFBQUMsT0FBbUJBLElBRXZCSyxRQUFBQyxJQUFBQyxHQUNBLElBQUFiLEVBQUEsSUFBQUMsV0FXSkQsRUFBT0QsaUJBQWlCLE9BL0R2QixTQUFBTSxHQUFBLFNBQUFLLElBdURjZCxFQUFBZCxnQkFBQXVCLEVBQUFDLE9BQUFDLE9BQ2ZYLEVBQUFULFlBQUEwQixHQUVrQkgsUUFBUEosSUFDWFYsRUFBQVosZUFBQXFCLEVBQUFDLE9BQUFDLE9BQ2NELEVBQUFBLFdBQWRPLEdBRWlCWixRQUFKUyxJQUNOWCxFQUFBQSxhQUF3QmUsRUFBQUEsT0FBL0JQLE9BQ09MLEVBQUFBLFNBQVBXLEdBQ0EsZUFBU0MsSUFDSWxCLEVBQUFWLHFCQUFTbUIsRUFBQUMsT0FBQUMsT0FDWHpCLEVBQUFBLGlCQUEyQnlCLEtBZHJDUCxFQUFBRSxjQUFBVyxJQWlCR0UsVUFwR0wsV0FxR1csSUFBQy9CLEVBQUFBLEtBQ0QsT0FBQ0ssSUFBSDJCLFFBQUEsU0FBQUMsRUFBQUMsR0FDSHRCLEVBQUFsQixPQUFBeUMsaUJBQUEsUUFlREYsT0FaSXJCLFNBMUdULFdBMkdNLElBQUFBLEVBQUFKLEtBZ0JMLEdBQWMsTUFBWEksRUFBR3BCLE1BZkcsSUFBSW9CLEVBQUF3QixRQUFULENBRU9oQyxHQURBRixFQUFBQSxTQUFILEdBQ0dFLEVBQUFBLEtBaEZWLE9BaUZJaUMsTUFBQSxlQUNKekIsRUFBQXdCLFNBQUEsR0FHRCxJQUFBeEIsRUFBQWIsUUFHVyxPQUZKc0MsTUFBWSxjQUNIRixFQUFBQSxTQUFpQixHQXZGaEMsSUFBQXZCLEVBQUEwQixPQUFBQyxNQTZHVyxPQTdHWEYsTUFBQSxlQTRGRHpCLEVBQUF3QixTQUFBLEdBRVdBLElBQVB4QixFQUFnQjRCLE1BRUMsT0FEQUgsTUFBYixnQkFrQkl6QixFQUFHd0IsU0FBVSxHQWZWQSxFQUFISyxXQUFBQyxLQUFBLFdBQ0E5QixFQUFBK0IsV0FBQSxZQUFBRCxLQUFBLFdBQ0g5QixFQUFBZ0Msb0JBQUFGLEtBQUEsU0FBQUcsR0FtQmVBLEVBQUlDLFFBZmhCVCxNQUFBLGlCQWlCWUEsTUFBTSxlQWhCckJVLE9BQUFDLFNBQUFDLEtBQUEsZUF3QmVyQyxFQUFHd0IsU0FBVSxjQW5CNUIsSUFBQXhCLEVBQUF3QixRQUFBLENBQ01JLEdBMEJQNUIsRUFBR3dCLFNBQVUsR0ExQmJ4QixFQUFjc0MsS0FHVixPQUZNYixNQUFOLGVBQ0F6QixFQUFhd0IsU0FBYixHQThCSixJQUFJeEIsRUFBR2IsUUExQkE0QyxPQUZOTixNQUFBLGNBQ2FLLEVBQUFBLFNBQUssR0FrQnRCLElBQUE5QixFQUFBUixpQkFHZ0IsT0FGZGlDLE1BQUEsbUJBQ0h6QixFQUFnQndCLFNBQUEsR0FFTGMsSUFBTXRDLEVBQUE0QixNQUdULE9BRk1ILE1BQU4sZ0JBQ0F6QixFQUFhd0IsU0FBYixHQWlDSnhCLEVBQUc2QixXQUFXQyxLQUFLLFdBL0JsQjlCLEVBQUErQixXQUFBLFlBQUFELEtBQUEsV0FpQ085QixFQUFHZ0Msb0JBQW9CRixLQUFLLFNBQVNHLEdBaEM3QkEsRUFBQUMsU0FJZlQsTUFBQSxpQkFrQ2VVLE9BQU9DLFNBQVNDLEtBQU8sZ0JBckNuQ1osTUFBQVEsRUFBQU0saUJBTUp2QyxFQUFBd0IsU0FBQSxVQVNBZ0IsUUE3TFQsV0E4TFMsSUFBQXhDLEVBQUFKLEtBQ0E2QyxHQUFBQyxNQUFBLFNBQUFULEdBb0NlLGNBQWZBLEVBQUlVLFNBbENHbkQsRUFBQUEsT0FBQUEsTUFBa0J5QyxFQUFBVyxhQUFBQyxZQUNmN0MsRUFBQTBCLE9BQURDLE1BQUxNLEVBQUFXLGFBQUFFLE9BRUFMLEdBQUFNLElBQUEsTUFBQSxNQUFBLENBQUFDLE9BQUEsbUJBQ0gsU0FBQUMsR0FvQ09sQyxRQUFRQyxJQUFJaUMsR0FwQ25CakQsRUFBQTBCLE9BQUF3QixPQUFBRCxFQUFBWCxLQUNhdEMsRUFBQTBCLE9BQUF5QixNQUFBLDZCQUFBRixFQUFBbkMsR0FBQSxnQ0FDVmQsRUFBQW5CLFNBQUEsU0FLQW1CLFFBQUFBLFdBQ0lBLElBQUFBLEVBQUdnQyxLQUNDaEMsRUFBQW1CLFlBQUljLEtBQUlDLFdBQ0pULEVBQUFBLFdBQU1RLEtBQUlNLFdBQ1Z2QyxFQUFBQSx3QkFLQW9ELFFBQUEsV0F3QzVCLElBeEJZQyxFQUFVMUIsRUFBVmIsRUF3Q0p3QyxFQUFJQyxFQXREYTFELEVBQUEsZUFBQTJELE1BQUEsV0FDSnBCLFNBWERDLEtBQUEsd0JBYVBGLE9BZkRzQixZQUFBLFdBZ0JIaEIsR0FBQWlCLEtBQUEsQ0FDSkMsTUFBQSxrQkE5TEFoQixRQUFBLEVBQUFpQixRQUFBLEVBa01RQyxPQUFULEVBQ1NDLFFBQVM3QixVQUlWb0IsRUFRUXJELFNBUkUyQixFQVFDOUMsU0FSWGlDLEVBUVEsaUJBZ0NSeUMsRUFBTUYsRUFBRVUscUJBQXFCQyxHQUFHLEdBdENoQ1gsRUFBT25ELGVBQVlZLE1BRVhDLEVBQUFBLEVBQU9rRCxjQUFQRCxJQUNHdEMsR0FBQUEsRUF5Q25CNEIsRUFBR1ksSUFBTSw0Q0F2Q09sRSxFQUFHMEIsV0FBSHlDLGFBQWtCYixFQUFBQyIsImZpbGUiOiJiYWNrZmlsbC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBiYWNrZmlsbF92aWV3ID0gbmV3IFZ1ZSh7XHJcbiAgICBlbDogXCIjYXBwXCIsXHJcbiAgICBkYXRhOiB7XHJcbiAgICAgICAgdHlwZTogXCJcIixcclxuICAgICAgICBmYmxvZ2luOiBmYWxzZSxcclxuICAgICAgICB1c2VyaWQ6IFwiXCIsXHJcbiAgICAgICAgbW9iaWxlOiBcIlwiLFxyXG4gICAgICAgIGludl9udW06IFwiXCIsXHJcbiAgICAgICAgYXdhcmRpdGVtOiBcIlwiLFxyXG4gICAgICAgIG5hbWU6IFwiXCIsXHJcbiAgICAgICAgYWRkcmVzczogXCJcIixcclxuICAgICAgICBJZGNhcmRGcm9udFNob3c6IFwiXCIsXHJcbiAgICAgICAgSWRjYXJkQmFja1Nob3c6IFwiXCIsXHJcbiAgICAgICAgQmFua2Jvb2tTaG93OiBcIlwiLFxyXG4gICAgICAgIENlcnRpZmljYXRlUGhvdG9TaG93OiBcIlwiLFxyXG4gICAgICAgIElkY2FyZEZyb250OiBudWxsLCAvL+ato+mdolxyXG4gICAgICAgIElkY2FyZEJhY2s6IG51bGwsIC8v5Y+N6Z2iXHJcbiAgICAgICAgQmFua2Jvb2s6IG51bGwsIC8v5a2Y5pG6XHJcbiAgICAgICAgQ2VydGlmaWNhdGVQaG90bzogbnVsbCwgLy/nmbznpahcclxuICAgICAgICBhZ3JlZTogZmFsc2UsXHJcbiAgICAgICAgcGxvYWRpbmc6IHRydWVcclxuICAgIH0sXHJcbiAgICB3YXRjaDoge1xyXG4gICAgICAgIElkY2FyZEZyb250OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAgICAgaWYoIXZtLklkY2FyZEZyb250U2hvdyA9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICAkKFwiI2Zyb250cHJlIHBcIikuY3NzKFwiZGlzcGxheVwiLFwibm9uZVwiKTtcclxuICAgICAgICAgICAgICAgICQoXCIjZnJvbnRwcmUgaW1nXCIpLmNzcyhcIm9wYWNpdHlcIixcIjFcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIElkY2FyZEJhY2s6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICBpZighdm0uSWRjYXJkQmFja1Nob3cgPT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgJChcIiNiYWNrcHJlIHBcIikuY3NzKFwiZGlzcGxheVwiLFwibm9uZVwiKTtcclxuICAgICAgICAgICAgICAgICQoXCIjYmFja3ByZSBpbWdcIikuY3NzKFwib3BhY2l0eVwiLFwiMVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgQmFua2Jvb2s6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICBpZighdm0uQmFua2Jvb2tTaG93ID09IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgICQoXCIjYmFua3ByZSBwXCIpLmNzcyhcImRpc3BsYXlcIixcIm5vbmVcIik7XHJcbiAgICAgICAgICAgICAgICAkKFwiI2JhbmtwcmUgaW1nXCIpLmNzcyhcIm9wYWNpdHlcIixcIjFcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIENlcnRpZmljYXRlUGhvdG86IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICBpZighdm0uQ2VydGlmaWNhdGVQaG90b1Nob3cgPT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgJChcIiNjZXJ0aWZpY2F0ZXByZSBwXCIpLmNzcyhcImRpc3BsYXlcIixcIm5vbmVcIik7XHJcbiAgICAgICAgICAgICAgICAkKFwiI2NlcnRpZmljYXRlcHJlIGltZ1wiKS5jc3MoXCJvcGFjaXR5XCIsXCIxXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBtZXRob2RzOiB7XHJcbiAgICAgICAgcmVhZGZyb250KCkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICAvLyBpZiAoaW5wdXQuZmlsZXMgJiYgaW5wdXQuZmlsZXNbMF0pIHtcclxuICAgICAgICAgICAgLy8gICAgIC8vIGNvbnNvbGUubG9nKGlucHV0LmZpbGVzWzBdLnNpemUpO1xyXG4gICAgICAgICAgICAvLyAgICAgaWYoaW5wdXQuZmlsZXNbMF0uc2l6ZSA8IDEwMDAwMDAwKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgY29uc29sZS5sb2coZS50YXJnZXQucmVzdWx0KTtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgLy8gdm0uY2FyZXRDYW4oZS50YXJnZXQucmVzdWx0KTtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgLy8gdm0uZmFjZWJhc2U2NCA9IGUudGFyZ2V0LnJlc3VsdDtcclxuICAgICAgICAgICAgLy8gICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoaW5wdXQuZmlsZXNbMF0pO1xyXG4gICAgICAgICAgICAvLyAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICBhbGVydChcIuWcluaqlOWkquWkp+S6hlwiKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICB2YXIgaW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZyb250XCIpO1xyXG4gICAgICAgICAgICAvLyB2YXIgaW5wdXRfYiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFja1wiKTtcclxuICAgICAgICAgICAgLy8gdmFyIGlucHV0X2JhbmsgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhbmtcIik7XHJcbiAgICAgICAgICAgIC8vIHZhciBpbnB1dF9jZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNlcnRpZmljYXRlXCIpO1xyXG4gICAgICAgICAgICAvLyB2YXIgcmVzdWx0O1xyXG4gICAgICAgICAgICAvLyBpZih0eXBlb2YgRmlsZVJlYWRlcj09PSd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4gICAgICAgICAgICAvLyAgICAgLy8gcmVzdWx0LmlubmVySFRNTCA9IFwi5oqx5q2J77yM5L2g55qE54CP6Ka95Zmo5LiN5pSv5o+0IEZpbGVSZWFkZXJcIjtcclxuICAgICAgICAgICAgLy8gICAgIC8vIGlucHV0LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAvLyB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJyxyZWFkRmlsZSxmYWxzZSk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJyxyZWFkRmlsZSxmYWxzZSk7XHJcbiAgICAgICAgICAgIC8vIGlucHV0X2IuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJyxyZWFkRmlsZShcIklkY2FyZEJhY2tcIiksZmFsc2UpO1xyXG4gICAgICAgICAgICAvLyBpbnB1dF9iYW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScscmVhZEZpbGUoXCJCYW5rYm9va1wiKSxmYWxzZSk7XHJcbiAgICAgICAgICAgIC8vIGlucHV0X2Nlci5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLHJlYWRGaWxlKFwiQ2VydGlmaWNhdGVQaG90b1wiKSxmYWxzZSk7XHJcbiAgICAgICAgICAgIC8vIGZ1bmN0aW9uIHJlYWRGaWxlKCkge1xyXG4gICAgICAgICAgICAvLyAgICAgZm9yKHZhciBpPTA7IGkgPCB0aGlzLmZpbGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwodGhpcy5maWxlc1tpXSk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgdm0uYmFzZTY0QXJyLnB1c2goZS50YXJnZXQucmVzdWx0KTtcclxuICAgICAgICAgICAgLy8gICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgLy8gcmVhZGVyLnJlYWRBc0RhdGFVUkwodGhpcy5maWxlc1tpXSk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgLy8gY29uc29sZS5sb2cocmVhZGVyKTtcclxuICAgICAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiByZWFkRmlsZSgpIHtcclxuICAgICAgICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwodGhpcy5maWxlc1swXSk7XHJcbiAgICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLklkY2FyZEZyb250ID0gZS50YXJnZXQucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gcmVhZGVyLnJlYWRBc0RhdGFVUkwodGhpcy5maWxlc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZWFkZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICByZWFkcG90byhlKSB7ICAgICAgLy9pbnB1dCBmaWxlIG9uY2hhbmdlIGV2ZW50XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZhciBmaWxlID0gZS50YXJnZXQuZmlsZXMuaXRlbSgwKTtcclxuICAgICAgICAgICAgdmFyIGlkID0gZS50YXJnZXQuaWQ7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlLnRhcmdldC5pZCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGZpbGUpO1xyXG4gICAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgICAgICAgICAgcmVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLGltZ0xvYWQpO1xyXG4gICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcclxuICAgICAgICAgICAgZnVuY3Rpb24gaW1nTG9hZChlKSB7XHJcbiAgICAgICAgICAgICAgICBpZihpZCA9PSBcImZyb250XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICB2bS5JZGNhcmRGcm9udFNob3cgPSBlLnRhcmdldC5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0uSWRjYXJkRnJvbnQgPSBmaWxlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoaWQgPT0gXCJiYWNrXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICB2bS5JZGNhcmRCYWNrU2hvdyA9IGUudGFyZ2V0LnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICB2bS5JZGNhcmRCYWNrID0gZmlsZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKGlkID09IFwiYmFua1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0uQmFua2Jvb2tTaG93ID0gZS50YXJnZXQucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLkJhbmtib29rID0gZmlsZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKGlkID09IFwiY2VydGlmaWNhdGVcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLkNlcnRpZmljYXRlUGhvdG9TaG93ID0gZS50YXJnZXQucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLkNlcnRpZmljYXRlUGhvdG8gPSBmaWxlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRVc2VyaWQoKSB7XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgIHZtLnVzZXJpZCA9IGZpbmRHZXRQYXJhbWV0ZXIoJ3VzZXInKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIHBvc3RiYWNrKCkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICBpZih2bS50eXBlID09IFwiRkJcIikge1xyXG4gICAgICAgICAgICAgICAgaWYoIXZtLmxvYWRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICB2bS5sb2FkaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZighdm0ubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcIuiri+Whq+WFpeaUtuS7tuS6ulwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm0ubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCF2bS5hZGRyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwi6KuL5aGr5YWl5Zyw5Z2AXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIXZtLmZiRGF0YS5mYl9pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcIuiri+WFiOeZu+WFpUZCXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIXZtLmFncmVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwi6KuL5Yu+6YG45oiR5bey6Kmz6ZaxXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgdm0uZ2V0VG9rZW4oKS50aGVuKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZtLmdyZWNhcHRjaGEoXCJiYWNrZmlsbFwiKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0ucG9zdFJlY2lwaWVudGluZm8oKS50aGVuKGZ1bmN0aW9uKHJlcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXJlcy5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFsZXJ0KHJlcy5yZXNwb25zZU1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcIuaCqOS4pueEoeizh+agvOmgmOWPluatpOeNjumgheOAglwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIi4vaW5kZXguaHRtbFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCLos4fmlpnlt7LpgIHlh7rvvIzmhJ/orJ3mgqjnmoTlj4PoiIfvvIFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCIuL2luZGV4Lmh0bWxcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdm0ucG9wdXAgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB2bS5wb3BQYWdlID0gXCJpbnZTdWNjZXNzXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYoIXZtLmxvYWRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICB2bS5sb2FkaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZighdm0ubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcIuiri+Whq+WFpeaUtuS7tuS6ulwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm0ubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCF2bS5hZGRyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwi6KuL5aGr5YWl5Zyw5Z2AXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYoIXZtLklkY2FyZEZyb250KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIGFsZXJ0KFwi6KuL5LiK5YKz6Lqr5Lu96K2J5q2j6Z2i6Zu75a2Q5qqUXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICB2bS5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHJldHVyblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIH07XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYoIXZtLklkY2FyZEJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgYWxlcnQoXCLoq4vkuIrlgrPouqvku73orYnlj43pnaLpm7vlrZDmqpRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gfTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBpZighdm0uQmFua2Jvb2spIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgYWxlcnQoXCLoq4vkuIrlgrPlrZjmkbrpm7vlrZDmqpRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gfTtcclxuICAgICAgICAgICAgICAgICAgICBpZighdm0uQ2VydGlmaWNhdGVQaG90bykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcIuiri+S4iuWCs+eZvOelqOato+acrOmbu+WtkOaqlFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm0ubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCF2bS5hZ3JlZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcIuiri+WLvumBuOaIkeW3suips+mWsVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm0ubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLmdldFRva2VuKCkudGhlbihmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5ncmVjYXB0Y2hhKFwiYmFja2ZpbGxcIikudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLnBvc3RSZWNpcGllbnRpbmZvKCkudGhlbihmdW5jdGlvbihyZXMpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFyZXMuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChyZXMucmVzcG9uc2VNZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0ubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwi6LOH5paZ5bey6YCB5Ye677yM5oSf6Kyd5oKo55qE5Y+D6IiH77yBXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiLi9pbmRleC5odG1sXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZtLnBvcHVwID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdm0ucG9wUGFnZSA9IFwiaW52U3VjY2Vzc1wiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9LFxyXG4gICAgICAgIGZiTG9naW4oKSB7XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgIEZCLmxvZ2luKGZ1bmN0aW9uKHJlcyl7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09ICdjb25uZWN0ZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0uZmJEYXRhLnRva2VuID0gcmVzLmF1dGhSZXNwb25zZS5hY2Nlc3NUb2tlbjtcclxuICAgICAgICAgICAgICAgICAgICB2bS5mYkRhdGEuZmJfaWQgPSByZXMuYXV0aFJlc3BvbnNlLnVzZXJJRDtcclxuICAgICAgICAgICAgICAgICAgICAvLyDlj5blvpdmYuWAi+S6uuizh+aWmVxyXG4gICAgICAgICAgICAgICAgICAgIEZCLmFwaSgnL21lJywnR0VUJyx7XCJmaWVsZHNcIjpcImlkLG5hbWUscGljdHVyZVwifSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oYXBpcmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhcGlyZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uZmJEYXRhLmZiTmFtZSA9IGFwaXJlcy5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdm0uZmJEYXRhLmZiUGljID0gYXBpcmVzLnBpY3R1cmUuZGF0YS51cmw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5mYkRhdGEuZmJQaWMgPSAnaHR0cDovL2dyYXBoLmZhY2Vib29rLmNvbS8nKyBhcGlyZXMuaWQgKycvcGljdHVyZT93aWR0aD0xNDAmaGVpZ2h0PTE0MCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5mYmxvZ2luID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBjcmVhdGVkOiBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgIHZtLmdldFVzZXJpZCgpLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZtLmdldFRva2VuKCkudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZtLmdldFJlY2lwaWVudGluZm8oKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgfSxcclxuICAgIG1vdW50ZWQ6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyIHZtID0gdGhpczsgXHJcbiAgICAgICAgLy8gdm0ucmVhZHBpYygpO1xyXG4gICAgICAgICQoXCIubmF2X2V2ZW50c1wiKS5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gXCIuL2luZGV4Lmh0bWwjZXZlbnRzXCJcclxuICAgICAgICB9KVxyXG4gICAgICAgIHdpbmRvdy5mYkFzeW5jSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgRkIuaW5pdCh7XHJcbiAgICAgICAgICAgICAgICBhcHBJZDogJzQzMTg5MzI2MDc1OTA3MicsXHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6dHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNvb2tpZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHhmYm1sOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHZlcnNpb246ICd2NC4wJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAoZnVuY3Rpb24gKGQsIHMsIGlkKSB7XHJcbiAgICAgICAgICAgIHZhciBqcywgZmpzID0gZC5nZXRFbGVtZW50c0J5VGFnTmFtZShzKVswXTtcclxuICAgICAgICAgICAgaWYgKGQuZ2V0RWxlbWVudEJ5SWQoaWQpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAganMgPSBkLmNyZWF0ZUVsZW1lbnQocyk7XHJcbiAgICAgICAgICAgIGpzLmlkID0gaWQ7XHJcbiAgICAgICAgICAgIGpzLnNyYyA9IFwiaHR0cHM6Ly9jb25uZWN0LmZhY2Vib29rLm5ldC9lbl9VUy9zZGsuanNcIjtcclxuICAgICAgICAgICAgZmpzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGpzLCBmanMpO1xyXG4gICAgICAgIH0oZG9jdW1lbnQsICdzY3JpcHQnLCAnZmFjZWJvb2stanNzZGsnKSk7XHJcbiAgICB9XHJcbn0pOyJdfQ==
