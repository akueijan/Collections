"use strict";var index_view=new Vue({el:"#app",data:{stepPage:"kv",facebase64:"",faceData:{},faceId:"",faceEye:0,faceLip:0,faceNose:0,faceScore:0,picAgree:!1},methods:{checkUpimg:function(){var r=document.querySelector("input"),s=document.querySelector(".preview");r.addEventListener("change",function(){for(;s.firstChild;)s.removeChild(s.firstChild);var e=r.files;if(0===e.length){var t=document.createElement("p");t.textContent="No files currently selected for upload",s.appendChild(t)}else{var n=document.createElement("ol");s.appendChild(n);for(var a=0;a<e.length;a++){var o=document.createElement("li"),t=document.createElement("p");if(c(e[a])){t.textContent="File name "+e[a].name+", file size "+l(e[a].size)+".";var i=document.createElement("img");i.setAttribute("id","blah"),i.src=window.URL.createObjectURL(e[a]),o.appendChild(i),o.appendChild(t)}else t.textContent="File name "+e[a].name+": Not a valid file type. Update your selection.",o.appendChild(t);n.appendChild(o)}}}),r.style.opacity=0;var n=["image/jpeg","image/pjpeg","image/png"];function c(e){for(var t=0;t<n.length;t++)if(e.type===n[t])return!0;return!1}function l(e){return e<1024?e+"bytes":1024<e&&e<1048576?(e/1024).toFixed(1)+"KB":1048576<e?(e/1048576).toFixed(1)+"MB":void 0}},readURL:function(e){var t=this;if(e.files&&e.files[0]){var n=new FileReader;n.onload=function(e){t.facebase64=e.target.result,$("#blah").attr("src",e.target.result),$(".preview").css("display","block"),$(".garybg").css("display","none"),$(".inputlab").css("opacity","0")},n.readAsDataURL(e.files[0])}},processImage:function(){var t=this;$.ajax({url:"https://eastasia.api.cognitive.microsoft.com/face/v1.0/detect?"+$.param({returnFaceId:"true",returnFaceLandmarks:"true",returnFaceAttributes:"age,gender,headPose,smile,facialHair,glasses,emotion,hair,makeup,occlusion,accessories,blur,exposure,noise"}),beforeSend:function(e){e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("Ocp-Apim-Subscription-Key","a33915a3b926473da34474fdca48f3eb")},type:"POST",data:'{"url": "http://data.whicdn.com/images/159997508/large.jpg"}'}).done(function(e){console.log(e),t.faceData=e,$("#responseTextArea").val(JSON.stringify(e,null,2))}).fail(function(e,t,n){var a=""===n?"Error. ":n+" ("+e.status+"): ";a+=""===e.responseText?"":jQuery.parseJSON(e.responseText).message?jQuery.parseJSON(e.responseText).message:jQuery.parseJSON(e.responseText).error.message,alert(a)})},dataURItoBlob:function(e){var t;t=0<=e.split(",")[0].indexOf("base64")?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var n=e.split(",")[0].split(":")[1].split(";")[0],a=new Uint8Array(t.length),o=0;o<t.length;o++)a[o]=t.charCodeAt(o);return new Blob([a],{type:n})},loadcanvas:function(){var e=this,t=(document.getElementById("loadcanvas").getContext("2d"),new Image,e.faceData.FaceLandmarks),n=(e.faceData.FaceRectangle,[{x:t.EyebrowLeftOuter.X,y:t.EyebrowLeftOuter.Y},{x:t.EyebrowLeftInner.X,y:t.EyebrowLeftInner.Y}]);e.panPoint(n);var a=[{x:t.EyebrowRightOuter.X,y:t.EyebrowRightOuter.Y},{x:t.EyebrowRightInner.X,y:t.EyebrowRightInner.Y}];e.panPoint(a);var o=[{x:t.EyeLeftOuter.X,y:t.EyeLeftOuter.Y},{x:t.PupilLeft.X,y:t.PupilLeft.Y},{x:t.EyeLeftInner.X,y:t.EyeLeftInner.Y}];e.panPoint(o);var i=[{x:t.EyeRightOuter.X,y:t.EyeRightOuter.Y},{x:t.PupilRight.X,y:t.PupilRight.Y},{x:t.EyeRightInner.X,y:t.EyeRightInner.Y}];e.panPoint(i);var r=[{x:t.NoseLeftAlarTop.X,y:t.NoseLeftAlarTop.Y},{x:t.NoseRightAlarTop.X,y:t.NoseRightAlarTop.Y},{x:t.NoseLeftAlarOutTip.X,y:t.NoseLeftAlarOutTip.Y},{x:t.NoseTip.X,y:t.NoseTip.Y},{x:t.NoseRightAlarOutTip.X,y:t.NoseRightAlarOutTip.Y}];e.panPoint(r);var s=[{x:t.MouthLeft.X,y:t.MouthLeft.Y},{x:t.UpperLipTop.X,y:t.UpperLipTop.Y},{x:t.UnderLipBottom.X,y:t.UnderLipBottom.Y},{x:t.MouthRight.X,y:t.MouthRight.Y}];e.panPoint(s)},drawline:function(){var e=this,t=document.getElementById("loadcanvas");if(t.getContext){var n=t.getContext("2d");n.strokeStyle="#ffffff",n.lineWidth=2;var a=e.faceData[0].faceLandmarks;n.beginPath(),n.lineCap="round",n.lineJoin="round",n.save();var o=[{x:a.eyebrowLeftOuter.x,y:a.eyebrowLeftOuter.y},{x:a.eyebrowLeftInner.x,y:a.eyebrowLeftInner.y}];e.panPoint(o);var i=[{x:a.eyebrowRightOuter.x,y:a.eyebrowRightOuter.y},{x:a.eyebrowRightInner.x,y:a.eyebrowRightInner.y}];e.panPoint(i);var r=[{x:a.eyeLeftTop.x,y:a.eyeLeftTop.y},{x:a.eyeLeftOuter.x,y:a.eyeLeftOuter.y},{x:a.eyeLeftBottom.x,y:a.eyeLeftBottom.y},{x:a.eyeLeftInner.x,y:a.eyeLeftInner.y},{x:a.eyeLeftTop.x,y:a.eyeLeftTop.y}];e.panPoint(r);var s=[{x:a.eyeRightTop.x,y:a.eyeRightTop.y},{x:a.eyeRightOuter.x,y:a.eyeRightOuter.y},{x:a.eyeRightBottom.x,y:a.eyeRightBottom.y},{x:a.eyeRightInner.x,y:a.eyeRightInner.y},{x:a.eyeRightTop.x,y:a.eyeRightTop.y}];e.panPoint(s);var c=[{x:a.noseRootLeft.x,y:a.noseRootLeft.y},{x:a.noseLeftAlarTop.x,y:a.noseLeftAlarTop.y},{x:a.noseLeftAlarOutTip.x,y:a.noseLeftAlarOutTip.y},{x:a.noseTip.x,y:a.noseTip.y},{x:a.noseRightAlarOutTip.x,y:a.noseRightAlarOutTip.y},{x:a.noseRightAlarTop.x,y:a.noseRightAlarTop.y},{x:a.noseRootRight.x,y:a.noseRootRight.y}];e.panPoint(c),window.requestAnimationFrame(e.drawline)}},drawRowline:function(e,t,n,a,o){var i=0,r=0,s=document.getElementById("loadcanvas").getContext("2d");var c=setInterval(function(){i<=o&&(i+=o/10,r+=.1,s.moveTo(e,t),s.lineTo(e+(n-e)*r,t+(a-t)*r),s.stroke())},100);setTimeout(function(){clearInterval(c)},2e3)},lineAni:function(t){var n=document.getElementById("loadcanvas").getContext("2d");n.lineCap="round",n.strokeStyle="#ffffff";var a=1,o=[];t.forEach(function(e){o.push(e)}),n.lineWidth=2;t=function(e){for(var t=[],n=1;n<e.length;n++)for(var a=e[n-1],o=e[n],i=o.x-a.x,r=o.y-a.y,s=0;s<100;s++){var c=a.x+i*s/100,l=a.y+r*s/100;t.push({x:c,y:l})}return t}(o);!function e(){a<t.length-1&&requestAnimationFrame(e);n.beginPath();n.moveTo(t[a-1].x,t[a-1].y);n.lineTo(t[a].x,t[a].y);n.stroke();a+=2}()},cutImg:function(){var e=this.faceData.FaceRectangle,t=document.getElementById("showcanvas"),n=t.getContext("2d"),a=document.getElementById("blah");n.drawImage(a,e.Left,e.Top,e.Width+10,e.Height+10,0,0,t.width,t.height)},cutImg2:function(){var e=this.faceData.FaceRectangle,t=document.getElementById("showcanvas2"),n=t.getContext("2d"),a=document.getElementById("loadcanvas");n.drawImage(a,e.Left,e.Top,e.Width+10,e.Height+10,0,0,t.width,t.height)},lineargrad:function(){var n=document.getElementById("anicanvas"),a=n.getContext("2d"),o=0;function i(e){if(o<=n.height){o+=10,window.requestAnimationFrame(i);var t=a.createLinearGradient(n.width,n.height,n.width,o);t.addColorStop(.7,"rgba(255, 255, 255, 0.4)"),a.clearRect(0,0,n.width,n.height),a.fillRect(0,0,n.width,o),a.fillStyle=t}}Date.now(),window.requestAnimationFrame(i)},scanAni:function(t){var n=this,a=new Image,o=document.getElementById("anicanvas"),i=o.getContext("2d"),r=0,s=-540;a.onload=function e(){i.clearRect(0,0,o.width,o.height);i.drawImage(a,r,s);s+=5;s<0&&requestAnimationFrame(e);"2"==t&&-200<s&&$("#showcanvas2").css("opacity","1");"3"==t&&-100<s&&($("#showcanvas3").css("opacity","1"),window.open("result.html?id="+n.faceId+"&type=user","_self"))},a.src="./images/scaneff.png"},panPoint:function(e){var t=document.getElementById("loadcanvas").getContext("2d");e.forEach(function(e){t.fillStyle="#FFFFFF",t.beginPath(),t.arc(e.x,e.y,2,0,2*Math.PI,!0),t.closePath(),t.fill()})},scanstep:function(){var e=this;e.scanAni(),setTimeout(function(){e.scanAni("2"),setTimeout(function(){e.scanAni("3")},3e3)},3e3)}},mounted:function(){var e=this;$("#userpic").change(function(){e.readURL(this)}),e.grecaptcha("index")}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImluZGV4X3ZpZXciLCJWdWUiLCJlbCIsInN0ZXBQYWdlIiwiZGF0YSIsImZhY2ViYXNlNjQiLCJmYWNlRGF0YSIsImZhY2VJZCIsImZhY2VFeWUiLCJmYWNlTGlwIiwiZmFjZU5vc2UiLCJwaWNBZ3JlZSIsImNoZWNrVXBpbWciLCJtZXRob2RzIiwiaW5wdXQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwcmV2aWV3IiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwiY3VyRmlsZXMiLCJwYXJhIiwidGV4dENvbnRlbnQiLCJhcHBlbmRDaGlsZCIsImxpc3QiLCJjcmVhdGVFbGVtZW50IiwiaSIsImxlbmd0aCIsImxpc3RJdGVtIiwidmFsaWRGaWxlVHlwZSIsImltYWdlIiwic2V0QXR0cmlidXRlIiwibmFtZSIsInJldHVybkZpbGVTaXplIiwic2l6ZSIsIndpbmRvdyIsIlVSTCIsImFkZEV2ZW50TGlzdGVuZXIiLCJmaWxlVHlwZXMiLCJmaWxlIiwidHlwZSIsIm51bWJlciIsInRvRml4ZWQiLCJyZWFkVVJMIiwicmVhZGVyIiwidm0iLCJlIiwidGFyZ2V0IiwicmVzdWx0IiwiJCIsImF0dHIiLCJvbmxvYWQiLCJjc3MiLCJyZWFkQXNEYXRhVVJMIiwiZmlsZXMiLCJwcm9jZXNzSW1hZ2UiLCJ0aGlzIiwieGhyT2JqIiwic2V0UmVxdWVzdEhlYWRlciIsInJldHVybkZhY2VJZCIsInJldHVybkZhY2VMYW5kbWFya3MiLCJyZXR1cm5GYWNlQXR0cmlidXRlcyIsImRvbmUiLCJlcnJvclN0cmluZyIsImFsZXJ0IiwidmFsIiwiSlNPTiIsInN0cmluZ2lmeSIsImZhaWwiLCJkYXRhVVJJIiwic3BsaXQiLCJ0ZXh0U3RhdHVzIiwiZXJyb3JUaHJvd24iLCJtaW1lU3RyaW5nIiwic3RhdHVzIiwianFYSFIiLCJyZXNwb25zZVRleHQiLCJqUXVlcnkiLCJwYXJzZUpTT04iLCJtZXNzYWdlIiwiVWludDhBcnJheSIsImJ5dGVTdHJpbmciLCJlcnJvciIsImlhIiwiZGF0YVVSSXRvQmxvYiIsImxvYWRjYW52YXMiLCJpbmRleE9mIiwiYXRvYiIsImNhbnZhcyIsImdldENvbnRleHQiLCJkcmF3RmFjZSIsIkZhY2VMYW5kbWFya3MiLCJjaGFyQ29kZUF0IiwiQmxvYiIsImdldEVsZW1lbnRCeUlkIiwiSW1hZ2UiLCJwYW5Qb2ludCIsIkZhY2VSZWN0YW5nbGUiLCJleWVicm93UmlnaHQiLCJFeWVMZWZ0IiwiRXllTGVmdE91dGVyIiwiWSIsInkiLCJFeWVicm93TGVmdE91dGVyIiwieCIsIkV5ZWJyb3dMZWZ0SW5uZXIiLCJYIiwiRXllTGVmdElubmVyIiwiRXllUmlnaHQiLCJFeWVSaWdodE91dGVyIiwiRXllYnJvd1JpZ2h0T3V0ZXIiLCJFeWVicm93UmlnaHRJbm5lciIsIkV5ZVJpZ2h0SW5uZXIiLCJOb3NlIiwiTm9zZUxlZnRBbGFyVG9wIiwiUHVwaWxMZWZ0IiwiTm9zZUxlZnRBbGFyT3V0VGlwIiwiTm9zZVRpcCIsIk1vdXRoIiwiTW91dGhMZWZ0IiwiVXBwZXJMaXBUb3AiLCJVbmRlckxpcEJvdHRvbSIsIk5vc2VSaWdodEFsYXJUb3AiLCJOb3NlUmlnaHRBbGFyT3V0VGlwIiwiY3R4Iiwic3Ryb2tlU3R5bGUiLCJNb3V0aFJpZ2h0IiwiYmVnaW5QYXRoIiwiZXllTGVmdE91dGVyIiwiZXllTGVmdEJvdHRvbSIsImZhY2VMYW5kbWFya3MiLCJsaW5lQ2FwIiwiZXllYnJvd0xlZnQiLCJleWVicm93TGVmdE91dGVyIiwiZXllYnJvd0xlZnRJbm5lciIsImV5ZVJpZ2h0IiwiZXllUmlnaHRCb3R0b20iLCJleWVSaWdodElubmVyIiwiZXllUmlnaHRUb3AiLCJleWVicm93UmlnaHRJbm5lciIsIm5vc2UiLCJub3NlUm9vdExlZnQiLCJleWVMZWZ0VG9wIiwibm9zZUxlZnRBbGFyT3V0VGlwIiwibm9zZVRpcCIsIm5vc2VSaWdodEFsYXJPdXRUaXAiLCJleWVMZWZ0SW5uZXIiLCJub3NlUm9vdFJpZ2h0IiwiZXllUmlnaHRPdXRlciIsIm5vc2VMZWZ0QWxhclRvcCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImRyYXdsaW5lIiwic3RhcnRYIiwiZmxhZyIsImlMZW4iLCJub3NlUmlnaHRBbGFyVG9wIiwibGluZVRvIiwic3Ryb2tlIiwiaW50Iiwic2V0SW50ZXJ2YWwiLCJwb2ludHMiLCJ0IiwiZW5kWSIsImN1dEltZyIsImZhY2VvYmoiLCJpbWFnZURhdGEiLCJlbmRYIiwic3RhcnRZIiwiZHJhd0ltYWdlIiwic2V0VGltZW91dCIsImxpbmVBbmkiLCJsaW5lYXJncmFkIiwidmVydGljZXMiLCJhbmltYXRpb25TdGFydFRpbWUiLCJvYmoiLCJjYW5ZIiwicHVzaCIsImxpbmVXaWR0aCIsImNyZWF0ZUxpbmVhckdyYWRpZW50Iiwid2F5cG9pbnRzIiwiZ3JkIiwiYWRkQ29sb3JTdG9wIiwicHQxIiwiY2xlYXJSZWN0IiwicHQwIiwiZHkiLCJmaWxsUmVjdCIsImoiLCJ3aWR0aCIsImZpbGxTdHlsZSIsImR4IiwiYW5pbWF0ZSIsIm1vdmVUbyIsIkxlZnQiLCJUb3AiLCJXaWR0aCIsIkhlaWdodCIsImhlaWdodCIsImN1dEltZzIiLCJmb3JFYWNoIiwiYXJjIiwidGltZVN0YW1wIiwiY2xvc2VQYXRoIiwic2NhbkFuaSIsIkRhdGUiLCJub3ciLCJncmVjYXB0Y2hhIiwiY3VuIiwiaW1nVGFnIiwib3BlbiIsInNyYyIsIk1hdGgiLCJQSSIsImZpbGwiLCJzY2Fuc3RlcCIsIm1vdW50ZWQiLCJjaGFuZ2UiXSwibWFwcGluZ3MiOiJhQUFBLElBQUlBLFdBQWEsSUFBSUMsSUFBSSxDQUNyQkMsR0FBSSxPQURKRixLQUFBQSxDQUNJRyxTQURpQixLQUVyQkMsV0FBTSxHQUNGRCxTQUFVLEdBQ1ZFLE9BQUFBLEdBQ0FDLFFBQUFBLEVBQ0FDLFFBQVEsRUFDUkMsU0FMRSxFQU1GQyxVQU5FLEVBT0ZDLFVBQVUsR0FFVkMsUUFBQUEsQ0FYaUJDLFdBV2pCRCxXQUVKRSxJQUFTQyxFQUFBQyxTQUFBQyxjQUFBLFNBQ0xKLEVB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LEVBQUlHLFlBQ0pILEVBQUk0RSxJQUFJMUIsRUFBSXRFLEVBQUVzRSxFQUFJeEUsRUFBRSxFQUFFLEVBQVUsRUFBUjZHLEtBQUtDLElBQUssR0FDbEN4RixFQUFJOEUsWUFDSjlFLEVBQUl5RixVQUdaQyxTQTVvQkEzTSxXQTZvQkksSUFBSWtDLEVBQUtXLEtBQ1RYLEVBQUc4SixVQUNIbEMsV0FBVyxXQUNQNUgsRUFBRzhKLFFBQVEsS0FDWGxDLFdBQVcsV0FDUDVILEVBQUc4SixRQUFRLE1BQ2IsTUFDSixPQUdWWSxRQUFTLFdBQ0wsSUFBSTFLLEVBQUtXLEtBQ1RQLEVBQUUsWUFBWXVLLE9BQU8sV0FDakIzSyxFQUFHRixRQUFRYSxRQUVmWCxFQUFHaUssV0FBVyIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBpbmRleF92aWV3ID0gbmV3IFZ1ZSh7XHJcbiAgICBlbDogXCIjYXBwXCIsXHJcbiAgICBkYXRhOiB7XHJcbiAgICAgICAgc3RlcFBhZ2U6IFwia3ZcIixcclxuICAgICAgICBmYWNlYmFzZTY0OiBcIlwiLFxyXG4gICAgICAgIGZhY2VEYXRhOiB7fSxcclxuICAgICAgICBmYWNlSWQ6IFwiXCIsXHJcbiAgICAgICAgZmFjZUV5ZTogMCxcclxuICAgICAgICBmYWNlTGlwOiAwLFxyXG4gICAgICAgIGZhY2VOb3NlOiAwLFxyXG4gICAgICAgIGZhY2VTY29yZTogMCxcclxuICAgICAgICBwaWNBZ3JlZTogZmFsc2UsXHJcbiAgICB9LFxyXG4gICAgbWV0aG9kczoge1xyXG4gICAgICAgIGNoZWNrVXBpbWcoKSB7XHJcbiAgICAgICAgICAgIHZhciBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0Jyk7XHJcbiAgICAgICAgICAgIHZhciBwcmV2aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByZXZpZXcnKTtcclxuICAgICAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdXBkYXRlSW1hZ2VEaXNwbGF5KTtcclxuICAgICAgICAgICAgaW5wdXQuc3R5bGUub3BhY2l0eSA9IDA7XHJcbiAgICAgICAgICAgIHZhciBmaWxlVHlwZXMgPSBbXHJcbiAgICAgICAgICAgICAgICAnaW1hZ2UvanBlZycsXHJcbiAgICAgICAgICAgICAgICAnaW1hZ2UvcGpwZWcnLFxyXG4gICAgICAgICAgICAgICAgJ2ltYWdlL3BuZydcclxuICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICBmdW5jdGlvbiB2YWxpZEZpbGVUeXBlKGZpbGUpIHtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBmaWxlVHlwZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihmaWxlLnR5cGUgPT09IGZpbGVUeXBlc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiByZXR1cm5GaWxlU2l6ZShudW1iZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmKG51bWJlciA8IDEwMjQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVtYmVyICsgJ2J5dGVzJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZihudW1iZXIgPiAxMDI0ICYmIG51bWJlciA8IDEwNDg1NzYpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG51bWJlci8xMDI0KS50b0ZpeGVkKDEpICsgJ0tCJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZihudW1iZXIgPiAxMDQ4NTc2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChudW1iZXIvMTA0ODU3NikudG9GaXhlZCgxKSArICdNQic7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlSW1hZ2VEaXNwbGF5KCkge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUocHJldmlldy5maXJzdENoaWxkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJldmlldy5yZW1vdmVDaGlsZChwcmV2aWV3LmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB2YXIgY3VyRmlsZXMgPSBpbnB1dC5maWxlcztcclxuICAgICAgICAgICAgICAgIGlmKGN1ckZpbGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmEudGV4dENvbnRlbnQgPSAnTm8gZmlsZXMgY3VycmVudGx5IHNlbGVjdGVkIGZvciB1cGxvYWQnO1xyXG4gICAgICAgICAgICAgICAgICAgIHByZXZpZXcuYXBwZW5kQ2hpbGQocGFyYSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb2wnKTtcclxuICAgICAgICAgICAgICAgICAgICBwcmV2aWV3LmFwcGVuZENoaWxkKGxpc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjdXJGaWxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsaXN0SXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodmFsaWRGaWxlVHlwZShjdXJGaWxlc1tpXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYS50ZXh0Q29udGVudCA9ICdGaWxlIG5hbWUgJyArIGN1ckZpbGVzW2ldLm5hbWUgKyAnLCBmaWxlIHNpemUgJyArIHJldHVybkZpbGVTaXplKGN1ckZpbGVzW2ldLnNpemUpICsgJy4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2Uuc2V0QXR0cmlidXRlKFwiaWRcIixcImJsYWhcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhciBpbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdibGFoJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlLnNyYyA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGN1ckZpbGVzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdEl0ZW0uYXBwZW5kQ2hpbGQoaW1hZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0SXRlbS5hcHBlbmRDaGlsZChwYXJhKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmEudGV4dENvbnRlbnQgPSAnRmlsZSBuYW1lICcgKyBjdXJGaWxlc1tpXS5uYW1lICsgJzogTm90IGEgdmFsaWQgZmlsZSB0eXBlLiBVcGRhdGUgeW91ciBzZWxlY3Rpb24uJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdEl0ZW0uYXBwZW5kQ2hpbGQocGFyYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdC5hcHBlbmRDaGlsZChsaXN0SXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICByZWFkVVJMKGlucHV0KSB7XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgIGlmIChpbnB1dC5maWxlcyAmJiBpbnB1dC5maWxlc1swXSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLmZhY2ViYXNlNjQgPSBlLnRhcmdldC5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI2JsYWgnKS5hdHRyKCdzcmMnLCBlLnRhcmdldC5yZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5wcmV2aWV3JykuY3NzKCdkaXNwbGF5JywnYmxvY2snKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuZ2FyeWJnJykuY3NzKCdkaXNwbGF5Jywnbm9uZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5pbnB1dGxhYicpLmNzcygnb3BhY2l0eScsJzAnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGlucHV0LmZpbGVzWzBdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcHJvY2Vzc0ltYWdlKCkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uS2V5ID0gXCJhMzM5MTVhM2I5MjY0NzNkYTM0NDc0ZmRjYTQ4ZjNlYlwiO1xyXG4gICAgICAgICAgICB2YXIgdXJpQmFzZSA9IFwiaHR0cHM6Ly9lYXN0YXNpYS5hcGkuY29nbml0aXZlLm1pY3Jvc29mdC5jb20vZmFjZS92MS4wL2RldGVjdFwiO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAvLyBSZXF1ZXN0IHBhcmFtZXRlcnMuXHJcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSB7XHJcbiAgICAgICAgICAgICAgICBcInJldHVybkZhY2VJZFwiOiBcInRydWVcIixcclxuICAgICAgICAgICAgICAgIFwicmV0dXJuRmFjZUxhbmRtYXJrc1wiOiBcInRydWVcIixcclxuICAgICAgICAgICAgICAgIFwicmV0dXJuRmFjZUF0dHJpYnV0ZXNcIjpcclxuICAgICAgICAgICAgICAgICAgICBcImFnZSxnZW5kZXIsaGVhZFBvc2Usc21pbGUsZmFjaWFsSGFpcixnbGFzc2VzLGVtb3Rpb24sXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiaGFpcixtYWtldXAsb2NjbHVzaW9uLGFjY2Vzc29yaWVzLGJsdXIsZXhwb3N1cmUsbm9pc2VcIlxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAvLyBEaXNwbGF5IHRoZSBpbWFnZS5cclxuICAgICAgICAgICAgLy8gdmFyIHJlZyA9IG5ldyBSZWdFeHAoXCJkYXRhOmltYWdlL2pwZWc7YmFzZTY0LFwiKTtcclxuICAgICAgICAgICAgLy8gdmFyIHNvdXJjZUltYWdlVXJsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJibGFoXCIpLnNyY1xyXG4gICAgICAgICAgICB2YXIgc291cmNlSW1hZ2VVcmwgPSBcImh0dHA6Ly9kYXRhLndoaWNkbi5jb20vaW1hZ2VzLzE1OTk5NzUwOC9sYXJnZS5qcGdcIjtcclxuICAgICAgICAgICAgLy8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNzb3VyY2VJbWFnZVwiKS5zcmMgPSBzb3VyY2VJbWFnZVVybDtcclxuICAgICAgICBcclxuICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgUkVTVCBBUEkgY2FsbC5cclxuICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgIHVybDogdXJpQmFzZSArIFwiP1wiICsgJC5wYXJhbShwYXJhbXMpLFxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gUmVxdWVzdCBoZWFkZXJzLlxyXG4gICAgICAgICAgICAgICAgYmVmb3JlU2VuZDogZnVuY3Rpb24oeGhyT2JqKXtcclxuICAgICAgICAgICAgICAgICAgICB4aHJPYmouc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLFwiYXBwbGljYXRpb24vanNvblwiKTtcclxuICAgICAgICAgICAgICAgICAgICB4aHJPYmouc2V0UmVxdWVzdEhlYWRlcihcIk9jcC1BcGltLVN1YnNjcmlwdGlvbi1LZXlcIiwgc3Vic2NyaXB0aW9uS2V5KTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFJlcXVlc3QgYm9keS5cclxuICAgICAgICAgICAgICAgIGRhdGE6ICd7XCJ1cmxcIjogJyArICdcIicgKyBzb3VyY2VJbWFnZVVybCArICdcIn0nLFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAuZG9uZShmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTaG93IGZvcm1hdHRlZCBKU09OIG9uIHdlYnBhZ2UuID09PuaIkOWKn1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB2bS5mYWNlRGF0YSA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICAkKFwiI3Jlc3BvbnNlVGV4dEFyZWFcIikudmFsKEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpKTsgLy8g6LOH5paZanNvbuWMllxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAuZmFpbChmdW5jdGlvbihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcclxuICAgICAgICAgICAgICAgIC8vIERpc3BsYXkgZXJyb3IgbWVzc2FnZS4gPT0+5aSx5pWXXHJcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3JTdHJpbmcgPSAoZXJyb3JUaHJvd24gPT09IFwiXCIpID9cclxuICAgICAgICAgICAgICAgICAgICBcIkVycm9yLiBcIiA6IGVycm9yVGhyb3duICsgXCIgKFwiICsganFYSFIuc3RhdHVzICsgXCIpOiBcIjtcclxuICAgICAgICAgICAgICAgIGVycm9yU3RyaW5nICs9IChqcVhIUi5yZXNwb25zZVRleHQgPT09IFwiXCIpID9cclxuICAgICAgICAgICAgICAgICAgICBcIlwiIDogKGpRdWVyeS5wYXJzZUpTT04oanFYSFIucmVzcG9uc2VUZXh0KS5tZXNzYWdlKSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeS5wYXJzZUpTT04oanFYSFIucmVzcG9uc2VUZXh0KS5tZXNzYWdlIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeS5wYXJzZUpTT04oanFYSFIucmVzcG9uc2VUZXh0KS5lcnJvci5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoZXJyb3JTdHJpbmcpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRhdGFVUkl0b0Jsb2IoZGF0YVVSSSkge1xyXG4gICAgICAgICAgICB2YXIgYnl0ZVN0cmluZztcclxuICAgICAgICAgICAgaWYgKGRhdGFVUkkuc3BsaXQoJywnKVswXS5pbmRleE9mKCdiYXNlNjQnKSA+PSAwKVxyXG4gICAgICAgICAgICAgICAgYnl0ZVN0cmluZyA9IGF0b2IoZGF0YVVSSS5zcGxpdCgnLCcpWzFdKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgYnl0ZVN0cmluZyA9IHVuZXNjYXBlKGRhdGFVUkkuc3BsaXQoJywnKVsxXSk7XHJcblxyXG4gICAgICAgICAgICAvLyBzZXBhcmF0ZSBvdXQgdGhlIG1pbWUgY29tcG9uZW50XHJcbiAgICAgICAgICAgIHZhciBtaW1lU3RyaW5nID0gZGF0YVVSSS5zcGxpdCgnLCcpWzBdLnNwbGl0KCc6JylbMV0uc3BsaXQoJzsnKVswXTtcclxuXHJcbiAgICAgICAgICAgIC8vIHdyaXRlIHRoZSBieXRlcyBvZiB0aGUgc3RyaW5nIHRvIGEgdHlwZWQgYXJyYXlcclxuICAgICAgICAgICAgdmFyIGlhID0gbmV3IFVpbnQ4QXJyYXkoYnl0ZVN0cmluZy5sZW5ndGgpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ5dGVTdHJpbmcubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlhW2ldID0gYnl0ZVN0cmluZy5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEJsb2IoW2lhXSwge3R5cGU6bWltZVN0cmluZ30pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbG9hZGNhbnZhcygpIHtcclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9hZGNhbnZhc1wiKTtcclxuICAgICAgICAgICAgdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICAgICAgICB2YXIgaW1hZ2VPYmogPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICAgICAgdmFyIHN0YXJ0ID0gbnVsbDtcclxuICAgICAgICAgICAgdmFyIGRyYXdGYWNlID0gdm0uZmFjZURhdGEuRmFjZUxhbmRtYXJrcztcclxuICAgICAgICAgICAgdmFyIGZhY2VvYmogPSB2bS5mYWNlRGF0YS5GYWNlUmVjdGFuZ2xlO1xyXG4gICAgICAgICAgICAvLyB2YXIgaW1hZ2VEYXRhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJibGFoXCIpO1xyXG4gICAgICAgICAgICAvLyBpbWFnZU9iai5zcmMgPSB2bS5mYWNlYmFzZTY0XHJcbiAgICAgICAgICAgIC8vIGltYWdlT2JqLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvLyAgICAgLy8gZHJhdyBjcm9wcGVkIGltYWdlXHJcbiAgICAgICAgICAgIC8vICAgICB2YXIgc291cmNlWCA9IDA7IC8v5bqn5qiZWFxyXG4gICAgICAgICAgICAvLyAgICAgdmFyIHNvdXJjZVkgPSAwOyAvL+W6p+aomVlcclxuICAgICAgICAgICAgLy8gICAgIHZhciBzb3VyY2VXaWR0aCA9IGNhbnZhcy53aWR0aDtcclxuICAgICAgICAgICAgLy8gICAgIHZhciBzb3VyY2VIZWlnaHQgPSBjYW52YXMuaGVpZ2h0O1xyXG4gICAgICAgICAgICAvLyAgICAgdmFyIGRlc3RXaWR0aCA9IHNvdXJjZVdpZHRoO1xyXG4gICAgICAgICAgICAvLyAgICAgdmFyIGRlc3RIZWlnaHQgPSBzb3VyY2VIZWlnaHQ7XHJcbiAgICAgICAgICAgIC8vICAgICB2YXIgZGVzdFggPSBjYW52YXMud2lkdGggLyAyIC0gZGVzdFdpZHRoIC8gMjtcclxuICAgICAgICAgICAgLy8gICAgIHZhciBkZXN0WSA9IGNhbnZhcy5oZWlnaHQgLyAyIC0gZGVzdEhlaWdodCAvIDI7XHJcbiAgICAgICAgICAgIC8vICAgICB2YXIgcmVjdENlbnRlclBvaW50ID0ge3g6IHNvdXJjZVdpZHRoLzIsIHk6IHNvdXJjZUhlaWdodC8yfTtcclxuICAgICAgICAgICAgLy8gICAgIGNvbnRleHQuc2F2ZSgpO1xyXG4gICAgICAgICAgICAvLyAgICAgY29udGV4dC50cmFuc2xhdGUocmVjdENlbnRlclBvaW50LngsIHJlY3RDZW50ZXJQb2ludC55KTsgLy/kuK3lv4PlrprkvY3oqK3lrppcclxuICAgICAgICAgICAgLy8gICAgIC8vIGNvbnRleHQucm90YXRlKDEwKihNYXRoLlBJLzE4MCkpOyAvL+ioreWumuaXi+i9ieinkuW6plxyXG4gICAgICAgICAgICAvLyAgICAgY29udGV4dC50cmFuc2xhdGUoLXJlY3RDZW50ZXJQb2ludC54LCAtcmVjdENlbnRlclBvaW50LnkpOyAvL+S4reW/g+WumuS9jeioreWumlxyXG4gICAgICAgICAgICAvLyAgICAgY29udGV4dC5kcmF3SW1hZ2UoaW1hZ2VPYmosIHNvdXJjZVgsIHNvdXJjZVksIHNvdXJjZVdpZHRoLCBzb3VyY2VIZWlnaHQsIGRlc3RYLCBkZXN0WSwgZGVzdFdpZHRoLCBkZXN0SGVpZ2h0KTtcclxuICAgICAgICAgICAgdmFyIGV5ZWJyb3dMZWZ0ID0gW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHg6ZHJhd0ZhY2UuRXllYnJvd0xlZnRPdXRlci5YLFxyXG4gICAgICAgICAgICAgICAgICAgIHg6ZHJhd0ZhY2UuRXllYnJvd0xlZnRPdXRlci5YLFxyXG4gICAgICAgICAgICAgICAgICAgIHk6ZHJhd0ZhY2UuRXllYnJvd0xlZnRPdXRlci5ZXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHg6ZHJhd0ZhY2UuRXllYnJvd0xlZnRJbm5lci5YLFxyXG4gICAgICAgICAgICAgICAgICAgIHk6ZHJhd0ZhY2UuRXllYnJvd0xlZnRJbm5lci5ZXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgdm0ucGFuUG9pbnQoZXllYnJvd0xlZnQpO1xyXG4gICAgICAgICAgICB2YXIgZXllYnJvd1JpZ2h0ID0gW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHg6ZHJhd0ZhY2UuRXllYnJvd1JpZ2h0T3V0ZXIuWCxcclxuICAgICAgICAgICAgICAgICAgICB5OmRyYXdGYWNlLkV5ZWJyb3dSaWdodE91dGVyLllcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgeDpkcmF3RmFjZS5FeWVicm93UmlnaHRJbm5lci5YLFxyXG4gICAgICAgICAgICAgICAgICAgIHk6ZHJhd0ZhY2UuRXllYnJvd1JpZ2h0SW5uZXIuWVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIHZtLnBhblBvaW50KGV5ZWJyb3dSaWdodCk7XHJcbiAgICAgICAgICAgIHZhciBFeWVMZWZ0ID0gW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHg6ZHJhd0ZhY2UuRXllTGVmdE91dGVyLlgsXHJcbiAgICAgICAgICAgICAgICAgICAgeTpkcmF3RmFjZS5FeWVMZWZ0T3V0ZXIuWVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB4OmRyYXdGYWNlLlB1cGlsTGVmdC5YLFxyXG4gICAgICAgICAgICAgICAgICAgIHk6ZHJhd0ZhY2UuUHVwaWxMZWZ0LllcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgeDpkcmF3RmFjZS5FeWVMZWZ0SW5uZXIuWCxcclxuICAgICAgICAgICAgICAgICAgICB5OmRyYXdGYWNlLkV5ZUxlZnRJbm5lci5ZXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgdm0ucGFuUG9pbnQoRXllTGVmdCk7XHJcbiAgICAgICAgICAgIHZhciBFeWVSaWdodCA9IFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB4OmRyYXdGYWNlLkV5ZVJpZ2h0T3V0ZXIuWCxcclxuICAgICAgICAgICAgICAgICAgICB5OmRyYXdGYWNlLkV5ZVJpZ2h0T3V0ZXIuWVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB4OmRyYXdGYWNlLlB1cGlsUmlnaHQuWCxcclxuICAgICAgICAgICAgICAgICAgICB5OmRyYXdGYWNlLlB1cGlsUmlnaHQuWVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB4OmRyYXdGYWNlLkV5ZVJpZ2h0SW5uZXIuWCxcclxuICAgICAgICAgICAgICAgICAgICB5OmRyYXdGYWNlLkV5ZVJpZ2h0SW5uZXIuWVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIHZtLnBhblBvaW50KEV5ZVJpZ2h0KTtcclxuICAgICAgICAgICAgdmFyIE5vc2UgPSBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgeDpkcmF3RmFjZS5Ob3NlTGVmdEFsYXJUb3AuWCxcclxuICAgICAgICAgICAgICAgICAgICB5OmRyYXdGYWNlLk5vc2VMZWZ0QWxhclRvcC5ZXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHg6ZHJhd0ZhY2UuTm9zZVJpZ2h0QWxhclRvcC5YLFxyXG4gICAgICAgICAgICAgICAgICAgIHk6ZHJhd0ZhY2UuTm9zZVJpZ2h0QWxhclRvcC5ZXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHg6ZHJhd0ZhY2UuTm9zZUxlZnRBbGFyT3V0VGlwLlgsXHJcbiAgICAgICAgICAgICAgICAgICAgeTpkcmF3RmFjZS5Ob3NlTGVmdEFsYXJPdXRUaXAuWVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB4OmRyYXdGYWNlLk5vc2VUaXAuWCxcclxuICAgICAgICAgICAgICAgICAgICB5OmRyYXdGYWNlLk5vc2VUaXAuWVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB4OmRyYXdGYWNlLk5vc2VSaWdodEFsYXJPdXRUaXAuWCxcclxuICAgICAgICAgICAgICAgICAgICB5OmRyYXdGYWNlLk5vc2VSaWdodEFsYXJPdXRUaXAuWVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIHZtLnBhblBvaW50KE5vc2UpO1xyXG4gICAgICAgICAgICB2YXIgTW91dGggPSBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgeDpkcmF3RmFjZS5Nb3V0aExlZnQuWCxcclxuICAgICAgICAgICAgICAgICAgICB5OmRyYXdGYWNlLk1vdXRoTGVmdC5ZXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHg6ZHJhd0ZhY2UuVXBwZXJMaXBUb3AuWCxcclxuICAgICAgICAgICAgICAgICAgICB5OmRyYXdGYWNlLlVwcGVyTGlwVG9wLllcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgeDpkcmF3RmFjZS5VbmRlckxpcEJvdHRvbS5YLFxyXG4gICAgICAgICAgICAgICAgICAgIHk6ZHJhd0ZhY2UuVW5kZXJMaXBCb3R0b20uWVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB4OmRyYXdGYWNlLk1vdXRoUmlnaHQuWCxcclxuICAgICAgICAgICAgICAgICAgICB5OmRyYXdGYWNlLk1vdXRoUmlnaHQuWVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIHZtLnBhblBvaW50KE1vdXRoKTtcclxuICAgICAgICAgICAgLy8gdmFyIHRvcGxpbmUgPSBbXHJcbiAgICAgICAgICAgIC8vICAgICB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgeDpkcmF3RmFjZS5FeWVicm93TGVmdE91dGVyLlgsXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgeTpkcmF3RmFjZS5FeWVicm93TGVmdE91dGVyLllcclxuICAgICAgICAgICAgLy8gICAgIH0sXHJcbiAgICAgICAgICAgIC8vICAgICB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgeDpkcmF3RmFjZS5FeWVicm93UmlnaHRPdXRlci5YLFxyXG4gICAgICAgICAgICAvLyAgICAgICAgIHk6ZHJhd0ZhY2UuRXllYnJvd1JpZ2h0T3V0ZXIuWVxyXG4gICAgICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgICAgICAvLyBdXHJcbiAgICAgICAgICAgIC8vIHZtLmxpbmVBbmkodG9wbGluZSk7XHJcbiAgICAgICAgICAgIC8vIHZhciBzdHJhaWdodGxpbmUgPSBbXHJcbiAgICAgICAgICAgIC8vICAgICB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgeDooKGRyYXdGYWNlLkV5ZWJyb3dSaWdodE91dGVyLlgtZHJhd0ZhY2UuRXllYnJvd0xlZnRPdXRlci5YKS8yKStkcmF3RmFjZS5FeWVicm93TGVmdE91dGVyLlgsXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgeTpkcmF3RmFjZS5FeWVicm93TGVmdElubmVyLllcclxuICAgICAgICAgICAgLy8gICAgIH0sXHJcbiAgICAgICAgICAgIC8vICAgICB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgeDpkcmF3RmFjZS5VbmRlckxpcEJvdHRvbS5YLFxyXG4gICAgICAgICAgICAvLyAgICAgICAgIHk6ZHJhd0ZhY2UuVW5kZXJMaXBCb3R0b20uWVxyXG4gICAgICAgICAgICAvLyAgICAgfSxcclxuICAgICAgICAgICAgLy8gXVxyXG4gICAgICAgICAgICAvLyB2bS5saW5lQW5pKHN0cmFpZ2h0bGluZSk7XHJcbiAgICAgICAgICAgIC8vIGN0eC5kcmF3SW1hZ2UoaW1hZ2VEYXRhLDEwLDEwKTtcclxuICAgICAgICAgICAgLy8gY29udGV4dC5kcmF3SW1hZ2UoaW1hZ2VPYmosZmFjZW9iai5MZWZ0LGZhY2VvYmouVG9wLGZhY2VvYmouV2lkdGgrMTAsZmFjZW9iai5IZWlnaHQrMTAsMCwwLGNhbnZhcy53aWR0aCxjYW52YXMuaGVpZ2h0KTtcclxuICAgICAgICAgICAgLy8gfTtcclxuICAgICAgICAgICAgLy8gY3V0aW1nIC8vXHJcbiAgICAgICAgICAgIC8vIHZtLmN1dEltZyhjYW4sZmFjZVJlY3RhbmdsZS54LGZhY2VSZWN0YW5nbGUueSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRyYXdsaW5lKCkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2FkY2FudmFzXCIpO1xyXG4gICAgICAgICAgICBpZiAoY2FudmFzLmdldENvbnRleHQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlPVwiI2ZmZmZmZlwiO1xyXG4gICAgICAgICAgICAgICAgY3R4LmxpbmVXaWR0aD0yO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRyYXdGYWNlID0gdm0uZmFjZURhdGFbMF0uZmFjZUxhbmRtYXJrcztcclxuICAgICAgICAgICAgICAgIC8vIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgICAgIGN0eC5saW5lQ2FwID0gJ3JvdW5kJztcclxuICAgICAgICAgICAgICAgIGN0eC5saW5lSm9pbiA9ICdyb3VuZCc7XHJcbiAgICAgICAgICAgICAgICBjdHguc2F2ZSgpO1xyXG4gICAgICAgICAgICAgICAgLy89PT3lt6bnnIk9PT0vL1xyXG4gICAgICAgICAgICAgICAgLy89PT3pnIDlhYjomZXnkIbmiJDkuIDljIVvYmo9PT0vL1xyXG4gICAgICAgICAgICAgICAgdmFyIGV5ZWJyb3dMZWZ0ID0gW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeDpkcmF3RmFjZS5leWVicm93TGVmdE91dGVyLngsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6ZHJhd0ZhY2UuZXllYnJvd0xlZnRPdXRlci55XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6ZHJhd0ZhY2UuZXllYnJvd0xlZnRJbm5lci54LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5OmRyYXdGYWNlLmV5ZWJyb3dMZWZ0SW5uZXIueVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIHZtLnBhblBvaW50KGV5ZWJyb3dMZWZ0KTtcclxuICAgICAgICAgICAgICAgIC8vIHZtLmRyYXdSb3dsaW5lKGRyYXdGYWNlLmV5ZWJyb3dMZWZ0T3V0ZXIueCxkcmF3RmFjZS5leWVicm93TGVmdE91dGVyLnksZHJhd0ZhY2UuZXllYnJvd0xlZnRJbm5lci54LGRyYXdGYWNlLmV5ZWJyb3dMZWZ0SW5uZXIueSxNYXRoLmFicyhkcmF3RmFjZS5leWVicm93TGVmdE91dGVyLngtZHJhd0ZhY2UuZXllYnJvd0xlZnRJbm5lci54KSk7XHJcbiAgICAgICAgICAgICAgICAvLyBjdHgubW92ZVRvKGRyYXdGYWNlLmV5ZWJyb3dMZWZ0T3V0ZXIueCxkcmF3RmFjZS5leWVicm93TGVmdE91dGVyLnkpO1xyXG4gICAgICAgICAgICAgICAgLy8gY3R4LmxpbmVUbyhkcmF3RmFjZS5leWVicm93TGVmdElubmVyLngsZHJhd0ZhY2UuZXllYnJvd0xlZnRJbm5lci55KTtcclxuICAgICAgICAgICAgICAgIC8vPT095Y+z55yJPT09Ly9cclxuICAgICAgICAgICAgICAgIHZhciBleWVicm93UmlnaHQgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4OmRyYXdGYWNlLmV5ZWJyb3dSaWdodE91dGVyLngsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6ZHJhd0ZhY2UuZXllYnJvd1JpZ2h0T3V0ZXIueVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4OmRyYXdGYWNlLmV5ZWJyb3dSaWdodElubmVyLngsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6ZHJhd0ZhY2UuZXllYnJvd1JpZ2h0SW5uZXIueVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIHZtLnBhblBvaW50KGV5ZWJyb3dSaWdodCk7XHJcbiAgICAgICAgICAgICAgICAvLyB2bS5kcmF3Um93bGluZShkcmF3RmFjZS5leWVicm93UmlnaHRPdXRlci54LGRyYXdGYWNlLmV5ZWJyb3dSaWdodE91dGVyLnksZHJhd0ZhY2UuZXllYnJvd1JpZ2h0SW5uZXIueCxkcmF3RmFjZS5leWVicm93UmlnaHRJbm5lci55LE1hdGguYWJzKGRyYXdGYWNlLmV5ZWJyb3dSaWdodE91dGVyLngtZHJhd0ZhY2UuZXllYnJvd1JpZ2h0SW5uZXIueCkpO1xyXG4gICAgICAgICAgICAgICAgLy8gY3R4Lm1vdmVUbyhkcmF3RmFjZS5leWVicm93UmlnaHRPdXRlci54LGRyYXdGYWNlLmV5ZWJyb3dSaWdodE91dGVyLnkpO1xyXG4gICAgICAgICAgICAgICAgLy8gY3R4LmxpbmVUbyhkcmF3RmFjZS5leWVicm93UmlnaHRJbm5lci54LGRyYXdGYWNlLmV5ZWJyb3dSaWdodElubmVyLnkpO1xyXG4gICAgICAgICAgICAgICAgLy89PT3lt6bnnLw9PT0vL1xyXG4gICAgICAgICAgICAgICAgdmFyIGV5ZUxlZnQgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4OmRyYXdGYWNlLmV5ZUxlZnRUb3AueCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeTpkcmF3RmFjZS5leWVMZWZ0VG9wLnlcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeDpkcmF3RmFjZS5leWVMZWZ0T3V0ZXIueCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeTpkcmF3RmFjZS5leWVMZWZ0T3V0ZXIueVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4OmRyYXdGYWNlLmV5ZUxlZnRCb3R0b20ueCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeTpkcmF3RmFjZS5leWVMZWZ0Qm90dG9tLnlcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeDpkcmF3RmFjZS5leWVMZWZ0SW5uZXIueCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeTpkcmF3RmFjZS5leWVMZWZ0SW5uZXIueVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4OmRyYXdGYWNlLmV5ZUxlZnRUb3AueCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeTpkcmF3RmFjZS5leWVMZWZ0VG9wLnlcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgdm0ucGFuUG9pbnQoZXllTGVmdCk7XHJcbiAgICAgICAgICAgICAgICAvLyB2bS5kcmF3Um93bGluZShkcmF3RmFjZS5leWVMZWZ0VG9wLngsZHJhd0ZhY2UuZXllTGVmdFRvcC55LGRyYXdGYWNlLmV5ZUxlZnRPdXRlci54LGRyYXdGYWNlLmV5ZUxlZnRPdXRlci55LE1hdGguYWJzKGRyYXdGYWNlLmV5ZUxlZnRUb3AueC1kcmF3RmFjZS5leWVMZWZ0T3V0ZXIueCkpO1xyXG4gICAgICAgICAgICAgICAgLy8gY3R4Lm1vdmVUbyhkcmF3RmFjZS5leWVMZWZ0VG9wLngsZHJhd0ZhY2UuZXllTGVmdFRvcC55KTtcclxuICAgICAgICAgICAgICAgIC8vIGN0eC5saW5lVG8oZHJhd0ZhY2UuZXllTGVmdE91dGVyLngsZHJhd0ZhY2UuZXllTGVmdE91dGVyLnkpO1xyXG4gICAgICAgICAgICAgICAgLy8gY3R4LmxpbmVUbyhkcmF3RmFjZS5leWVMZWZ0Qm90dG9tLngsZHJhd0ZhY2UuZXllTGVmdEJvdHRvbS55KTtcclxuICAgICAgICAgICAgICAgIC8vIGN0eC5saW5lVG8oZHJhd0ZhY2UuZXllTGVmdElubmVyLngsZHJhd0ZhY2UuZXllTGVmdElubmVyLnkpO1xyXG4gICAgICAgICAgICAgICAgLy8gY3R4LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgICAgICAgICAgLy89PT3lj7PnnLw9PT0vL1xyXG4gICAgICAgICAgICAgICAgdmFyIGV5ZVJpZ2h0ID0gW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeDpkcmF3RmFjZS5leWVSaWdodFRvcC54LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5OmRyYXdGYWNlLmV5ZVJpZ2h0VG9wLnlcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeDpkcmF3RmFjZS5leWVSaWdodE91dGVyLngsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6ZHJhd0ZhY2UuZXllUmlnaHRPdXRlci55XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6ZHJhd0ZhY2UuZXllUmlnaHRCb3R0b20ueCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeTpkcmF3RmFjZS5leWVSaWdodEJvdHRvbS55XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6ZHJhd0ZhY2UuZXllUmlnaHRJbm5lci54LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5OmRyYXdGYWNlLmV5ZVJpZ2h0SW5uZXIueVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4OmRyYXdGYWNlLmV5ZVJpZ2h0VG9wLngsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6ZHJhd0ZhY2UuZXllUmlnaHRUb3AueVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB2bS5wYW5Qb2ludChleWVSaWdodCk7XHJcbiAgICAgICAgICAgICAgICAvLyBjdHgubW92ZVRvKGRyYXdGYWNlLmV5ZVJpZ2h0VG9wLngsZHJhd0ZhY2UuZXllUmlnaHRUb3AueSk7XHJcbiAgICAgICAgICAgICAgICAvLyBjdHgubGluZVRvKGRyYXdGYWNlLmV5ZVJpZ2h0T3V0ZXIueCxkcmF3RmFjZS5leWVSaWdodE91dGVyLnkpO1xyXG4gICAgICAgICAgICAgICAgLy8gY3R4LmxpbmVUbyhkcmF3RmFjZS5leWVSaWdodEJvdHRvbS54LGRyYXdGYWNlLmV5ZVJpZ2h0Qm90dG9tLnkpO1xyXG4gICAgICAgICAgICAgICAgLy8gY3R4LmxpbmVUbyhkcmF3RmFjZS5leWVSaWdodElubmVyLngsZHJhd0ZhY2UuZXllUmlnaHRJbm5lci55KTtcclxuICAgICAgICAgICAgICAgIC8vIGN0eC5jbG9zZVBhdGgoKTtcclxuICAgICAgICAgICAgICAgIC8vPT096by75a2QPT09Ly9cclxuICAgICAgICAgICAgICAgIHZhciBub3NlID0gW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeDpkcmF3RmFjZS5ub3NlUm9vdExlZnQueCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeTpkcmF3RmFjZS5ub3NlUm9vdExlZnQueVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4OmRyYXdGYWNlLm5vc2VMZWZ0QWxhclRvcC54LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5OmRyYXdGYWNlLm5vc2VMZWZ0QWxhclRvcC55XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6ZHJhd0ZhY2Uubm9zZUxlZnRBbGFyT3V0VGlwLngsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6ZHJhd0ZhY2Uubm9zZUxlZnRBbGFyT3V0VGlwLnlcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeDpkcmF3RmFjZS5ub3NlVGlwLngsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6ZHJhd0ZhY2Uubm9zZVRpcC55XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6ZHJhd0ZhY2Uubm9zZVJpZ2h0QWxhck91dFRpcC54LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5OmRyYXdGYWNlLm5vc2VSaWdodEFsYXJPdXRUaXAueVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4OmRyYXdGYWNlLm5vc2VSaWdodEFsYXJUb3AueCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeTpkcmF3RmFjZS5ub3NlUmlnaHRBbGFyVG9wLnlcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeDpkcmF3RmFjZS5ub3NlUm9vdFJpZ2h0LngsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6ZHJhd0ZhY2Uubm9zZVJvb3RSaWdodC55XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIHZtLnBhblBvaW50KG5vc2UpO1xyXG4gICAgICAgICAgICAgICAgLy8gY3R4Lm1vdmVUbyhkcmF3RmFjZS5ub3NlUm9vdExlZnQueCxkcmF3RmFjZS5ub3NlUm9vdExlZnQueSk7XHJcbiAgICAgICAgICAgICAgICAvLyBjdHgubGluZVRvKGRyYXdGYWNlLm5vc2VMZWZ0QWxhclRvcC54LGRyYXdGYWNlLm5vc2VMZWZ0QWxhclRvcC55KTtcclxuICAgICAgICAgICAgICAgIC8vIGN0eC5saW5lVG8oZHJhd0ZhY2Uubm9zZUxlZnRBbGFyT3V0VGlwLngsZHJhd0ZhY2Uubm9zZUxlZnRBbGFyT3V0VGlwLnkpO1xyXG4gICAgICAgICAgICAgICAgLy8gY3R4LmxpbmVUbyhkcmF3RmFjZS5ub3NlVGlwLngsZHJhd0ZhY2Uubm9zZVRpcC55KTtcclxuICAgICAgICAgICAgICAgIC8vIGN0eC5saW5lVG8oZHJhd0ZhY2Uubm9zZVJpZ2h0QWxhck91dFRpcC54LGRyYXdGYWNlLm5vc2VSaWdodEFsYXJPdXRUaXAueSk7XHJcbiAgICAgICAgICAgICAgICAvLyBjdHgubGluZVRvKGRyYXdGYWNlLm5vc2VSaWdodEFsYXJUb3AueCxkcmF3RmFjZS5ub3NlUmlnaHRBbGFyVG9wLnkpO1xyXG4gICAgICAgICAgICAgICAgLy8gY3R4LmxpbmVUbyhkcmF3RmFjZS5ub3NlUm9vdFJpZ2h0LngsZHJhd0ZhY2Uubm9zZVJvb3RSaWdodC55KTtcclxuICAgICAgICAgICAgICAgIC8vIGN0eC5jbG9zZVBhdGgoKTtcclxuICAgICAgICAgICAgICAgIC8vPT095Zi05be0PT09Ly9cclxuICAgICAgICAgICAgICAgIC8vIHZhciBtb3V0aHVwID0gW1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgeDpkcmF3RmFjZS51cHBlckxpcFRvcC54LFxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICB5OmRyYXdGYWNlLnVwcGVyTGlwVG9wLnlcclxuICAgICAgICAgICAgICAgIC8vICAgICB9LFxyXG4gICAgICAgICAgICAgICAgLy8gICAgIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgeDpkcmF3RmFjZS5ub3NlTGVmdEFsYXJUb3AueCxcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgeTpkcmF3RmFjZS5ub3NlTGVmdEFsYXJUb3AueVxyXG4gICAgICAgICAgICAgICAgLy8gICAgIH0sXHJcbiAgICAgICAgICAgICAgICAvLyAgICAge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICB4OmRyYXdGYWNlLm5vc2VMZWZ0QWxhck91dFRpcC54LFxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICB5OmRyYXdGYWNlLm5vc2VMZWZ0QWxhck91dFRpcC55XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgfSxcclxuICAgICAgICAgICAgICAgIC8vICAgICB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHg6ZHJhd0ZhY2Uubm9zZVRpcC54LFxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICB5OmRyYXdGYWNlLm5vc2VUaXAueVxyXG4gICAgICAgICAgICAgICAgLy8gICAgIH0sXHJcbiAgICAgICAgICAgICAgICAvLyAgICAge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICB4OmRyYXdGYWNlLm5vc2VSaWdodEFsYXJPdXRUaXAueCxcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgeTpkcmF3RmFjZS5ub3NlUmlnaHRBbGFyT3V0VGlwLnlcclxuICAgICAgICAgICAgICAgIC8vICAgICB9LFxyXG4gICAgICAgICAgICAgICAgLy8gICAgIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgeDpkcmF3RmFjZS5ub3NlUmlnaHRBbGFyVG9wLngsXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHk6ZHJhd0ZhY2Uubm9zZVJpZ2h0QWxhclRvcC55XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgfSxcclxuICAgICAgICAgICAgICAgIC8vICAgICB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHg6ZHJhd0ZhY2Uubm9zZVJvb3RSaWdodC54LFxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICB5OmRyYXdGYWNlLm5vc2VSb290UmlnaHQueVxyXG4gICAgICAgICAgICAgICAgLy8gICAgIH0sXHJcbiAgICAgICAgICAgICAgICAvLyBdXHJcbiAgICAgICAgICAgICAgICAvLyB2bS5saW5lQW5pKG1vdXRodXApO1xyXG4gICAgICAgICAgICAgICAgLy8gY3R4Lm1vdmVUbyhkcmF3RmFjZS51cHBlckxpcFRvcC54LGRyYXdGYWNlLnVwcGVyTGlwVG9wLnkpO1xyXG4gICAgICAgICAgICAgICAgLy8gY3R4LmxpbmVUbyhkcmF3RmFjZS5tb3V0aExlZnQueCxkcmF3RmFjZS5tb3V0aExlZnQueSk7XHJcbiAgICAgICAgICAgICAgICAvLyBjdHgubGluZVRvKGRyYXdGYWNlLnVuZGVyTGlwQm90dG9tLngsZHJhd0ZhY2UudW5kZXJMaXBCb3R0b20ueSk7XHJcbiAgICAgICAgICAgICAgICAvLyBjdHgubGluZVRvKGRyYXdGYWNlLm1vdXRoUmlnaHQueCxkcmF3RmFjZS5tb3V0aFJpZ2h0LnkpO1xyXG4gICAgICAgICAgICAgICAgLy8gY3R4LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgICAgICAgICAgLy89PT3ntZDmnZ89PT0vL1xyXG4gICAgICAgICAgICAgICAgLy8gY3R4LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh2bS5kcmF3bGluZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGRyYXdSb3dsaW5lKHN0YXJ0WCxzdGFydFksZW5kWCxlbmRZLGxlbmd0aCkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICB2YXIgaUxlbiA9IDA7XHJcbiAgICAgICAgICAgIHZhciBmbGFnID0gMDtcclxuICAgICAgICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9hZGNhbnZhc1wiKTtcclxuICAgICAgICAgICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJvd0xpbmUoKSB7XHJcbiAgICAgICAgICAgICAgICBpZihpTGVuIDw9IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlMZW4gKz0gbGVuZ3RoLzEwO1xyXG4gICAgICAgICAgICAgICAgICAgIGZsYWcgKz0gMC4xO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICBjdHgubW92ZVRvKHN0YXJ0WCxzdGFydFkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oc3RhcnRYICsgKGVuZFgtc3RhcnRYKSpmbGFnLCBzdGFydFkgKyAoZW5kWS1zdGFydFkpKmZsYWcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgaW50ID0gc2V0SW50ZXJ2YWwocm93TGluZSwxMDApO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGludCk7XHJcbiAgICAgICAgICAgIH0sMjAwMClcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvLz09PT0955Wr57ea5YuV55WrPT09PT0vL1xyXG4gICAgICAgIGxpbmVBbmkocG9pbnRzKSB7XHJcbiAgICAgICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvYWRjYW52YXNcIik7XHJcbiAgICAgICAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICAgICAgICBjdHgubGluZUNhcCA9IFwicm91bmRcIjtcclxuICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gXCIjZmZmZmZmXCI7XHJcbiAgICAgICAgICAgIHZhciB0ID0gMTtcclxuICAgICAgICAgICAgdmFyIHZlcnRpY2VzID0gW107XHJcbiAgICAgICAgICAgIHBvaW50cy5mb3JFYWNoKGZ1bmN0aW9uKG9iail7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0aWNlcy5wdXNoKG9iaik7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC8vIHZlcnRpY2VzLnB1c2goe3g6MCx5OjB9KTtcclxuICAgICAgICAgICAgLy8gdmVydGljZXMucHVzaCh7eDozMDAseToxMDB9KTtcclxuICAgICAgICAgICAgLy8gdmVydGljZXMucHVzaCh7eDo4MCx5OjIwMH0pO1xyXG4gICAgICAgICAgICBjdHgubGluZVdpZHRoID0gMjtcclxuICAgICAgICAgICAgdmFyIHBvaW50cyA9IGNhbGNXYXlwb2ludHModmVydGljZXMpO1xyXG4gICAgICAgICAgICBhbmltYXRlKHBvaW50cyk7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjYWxjV2F5cG9pbnRzKHZlcnRpY2VzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd2F5cG9pbnRzID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IHZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHB0MCA9IHZlcnRpY2VzW2kgLSAxXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHQxID0gdmVydGljZXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGR4ID0gcHQxLnggLSBwdDAueDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZHkgPSBwdDEueSAtIHB0MC55O1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgMTAwOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBwdDAueCArIGR4ICogaiAvIDEwMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSBwdDAueSArIGR5ICogaiAvIDEwMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2F5cG9pbnRzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogeCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICh3YXlwb2ludHMpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBhbmltYXRlKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHQgPCBwb2ludHMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGRyYXcgYSBsaW5lIHNlZ21lbnQgZnJvbSB0aGUgbGFzdCB3YXlwb2ludFxyXG4gICAgICAgICAgICAgICAgLy8gdG8gdGhlIGN1cnJlbnQgd2F5cG9pbnRcclxuICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8ocG9pbnRzW3QgLSAxXS54LCBwb2ludHNbdCAtIDFdLnkpO1xyXG4gICAgICAgICAgICAgICAgY3R4LmxpbmVUbyhwb2ludHNbdF0ueCwgcG9pbnRzW3RdLnkpO1xyXG4gICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICAgICAgLy8gaW5jcmVtZW50IFwidFwiIHRvIGdldCB0aGUgbmV4dCB3YXlwb2ludFxyXG4gICAgICAgICAgICAgICAgdCs9MjtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGN1dEltZygpIHtcclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAgICAgdmFyIGZhY2VvYmogPSB2bS5mYWNlRGF0YS5GYWNlUmVjdGFuZ2xlO1xyXG4gICAgICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaG93Y2FudmFzXCIpO1xyXG4gICAgICAgICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgICAgICAgIHZhciBpbWFnZURhdGEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJsYWhcIik7XHJcbiAgICAgICAgICAgIC8vIGN0eC5kcmF3SW1hZ2UoaW1hZ2VEYXRhLDEwLDEwKTtcclxuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShpbWFnZURhdGEsZmFjZW9iai5MZWZ0LGZhY2VvYmouVG9wLGZhY2VvYmouV2lkdGgrMTAsZmFjZW9iai5IZWlnaHQrMTAsMCwwLGNhbnZhcy53aWR0aCxjYW52YXMuaGVpZ2h0KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGN1dEltZzIoKSB7XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZhciBmYWNlb2JqID0gdm0uZmFjZURhdGEuRmFjZVJlY3RhbmdsZTtcclxuICAgICAgICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2hvd2NhbnZhczJcIik7XHJcbiAgICAgICAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgICAgICAgdmFyIGltYWdlRGF0YSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9hZGNhbnZhc1wiKTtcclxuICAgICAgICAgICAgLy8gY3R4LmRyYXdJbWFnZShpbWFnZURhdGEsMTAsMTApO1xyXG4gICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltYWdlRGF0YSxmYWNlb2JqLkxlZnQsZmFjZW9iai5Ub3AsZmFjZW9iai5XaWR0aCsxMCxmYWNlb2JqLkhlaWdodCsxMCwwLDAsY2FudmFzLndpZHRoLGNhbnZhcy5oZWlnaHQpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLy89PT09PeeVq+a8uOWxpD09PT09Ly9cclxuICAgICAgICBsaW5lYXJncmFkKCkge1xyXG4gICAgICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbmljYW52YXNcIik7XHJcbiAgICAgICAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICAgICAgICAvLyB2YXIgZ3JkID0gY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuICAgICAgICAgICAgdmFyIGFuaW1hdGlvblN0YXJ0VGltZTtcclxuICAgICAgICAgICAgdmFyIGNhblkgPSAwO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgc3RhcnQoKTtcclxuICAgICAgICAgICAgZnVuY3Rpb24gYW5pbWF0ZSh0aW1lU3RhbXApe1xyXG4gICAgICAgICAgICAgICAgaWYoY2FuWSA8PWNhbnZhcy5oZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB4ID0gKHRpbWVTdGFtcCAtIGFuaW1hdGlvblN0YXJ0VGltZSkgJSA1MDA7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FuWSs9MTA7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyB2YXIgZ3JkID0gY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCwgY2FudmFzLndpZHRoLCBjYW5ZKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZ3JkID0gY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCwgY2FudmFzLndpZHRoLCBjYW5ZKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBncmQuYWRkQ29sb3JTdG9wKDAsICd0cmFuc3BhcmVudCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGdyZC5hZGRDb2xvclN0b3AoMC42LCAndHJhbnNwYXJlbnQnKTtcclxuICAgICAgICAgICAgICAgICAgICBncmQuYWRkQ29sb3JTdG9wKDAuNywgXCJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNClcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZ3JkLmFkZENvbG9yU3RvcCgxLCAneWVsbG93Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsY2FudmFzLndpZHRoLGNhbnZhcy5oZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGdyZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FuWSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZT1ncmQ7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGN0eC5jbGVhclJlY3QoMCwwLGNhbnZhcy53aWR0aCxjYW52YXMuaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiBzdGFydCgpe1xyXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uU3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIC8vPT09PT3mjoPmj4/mlYjmnpw9PT09PS8vXHJcbiAgICAgICAgc2NhbkFuaShjdW4pIHtcclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAgICAgdmFyIGltZ1RhZyA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FuaWNhbnZhcycpO1xyXG4gICAgICAgICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICAgICAgdmFyIHggPSAwO1xyXG4gICAgICAgICAgICAvLyB2YXIgeSA9IC0oY2FudmFzLmhlaWdodCoyKTtcclxuICAgICAgICAgICAgdmFyIHkgPSAtNTQwXHJcbiAgICAgICAgICAgIHZhciBjdW47XHJcbiAgICAgICAgICAgIC8vIHZhciB4d2lkdGggPSBcclxuICAgICAgICAgICAgaW1nVGFnLm9ubG9hZCA9IGFuaW1hdGU7XHJcbiAgICAgICAgICAgIGltZ1RhZy5zcmMgPSBcIi4vaW1hZ2VzL3NjYW5lZmYucG5nXCI7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGFuaW1hdGUoKSB7XHJcbiAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltZ1RhZywgeCwgeSk7XHJcbiAgICAgICAgICAgICAgICB5ICs9IDU7XHJcbiAgICAgICAgICAgICAgICBpZiAoeSA8IDApIHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKVxyXG4gICAgICAgICAgICAgICAgaWYoY3VuID09IFwiMlwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoeSA+IC0yMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdm0uZHJhd2xpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNzaG93Y2FudmFzMlwiKS5jc3MoXCJvcGFjaXR5XCIsXCIxXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKGN1biA9PSBcIjNcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHkgPiAtMTAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjc2hvd2NhbnZhczNcIikuY3NzKFwib3BhY2l0eVwiLFwiMVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oXCJyZXN1bHQuaHRtbD9pZD1cIit2bS5mYWNlSWQrXCImdHlwZT11c2VyXCIsXCJfc2VsZlwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIC8vPT09PT3mqJnpu549PT09PS8vXHJcbiAgICAgICAgcGFuUG9pbnQocG9pbnRzKSB7XHJcbiAgICAgICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvYWRjYW52YXNcIik7XHJcbiAgICAgICAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICAgICAgICBwb2ludHMuZm9yRWFjaChmdW5jdGlvbihvYmope1xyXG4gICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZT1cIiNGRkZGRkZcIjtcclxuICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgICAgIGN0eC5hcmMob2JqLngsb2JqLnksMiwwLE1hdGguUEkqMix0cnVlKTtcclxuICAgICAgICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuICAgICAgICAgICAgICAgIGN0eC5maWxsKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzY2Fuc3RlcCgpIHtcclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAgICAgdm0uc2NhbkFuaSgpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICB2bS5zY2FuQW5pKFwiMlwiKTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICB2bS5zY2FuQW5pKFwiM1wiKTtcclxuICAgICAgICAgICAgICAgIH0sMzAwMCk7XHJcbiAgICAgICAgICAgIH0sMzAwMCk7XHJcbiAgICAgICAgfSxcclxuICAgIH0sIFxyXG4gICAgbW91bnRlZDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAkKFwiI3VzZXJwaWNcIikuY2hhbmdlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2bS5yZWFkVVJMKHRoaXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZtLmdyZWNhcHRjaGEoXCJpbmRleFwiKTtcclxuICAgIH1cclxufSlcclxuIl19
