"use strict";var backfill_view=new Vue({el:"#app",data:{type:"",fblogin:!1,fbData:{fbtoken:"",fbId:"",fbName:"",fbPic:""},userid:"",mobile:"",inv_num:"",awarditem:"",name:"",address:"",IdcardFrontShow:"",IdcardBackShow:"",BankbookShow:"",CertificatePhotoShow:"",IdcardFront:null,IdcardBack:null,Bankbook:null,CertificatePhoto:null,agree:!1,start_date:"",mode_status:""},watch:{IdcardFront:function(){""==!this.IdcardFrontShow&&($("#frontpre p").css("display","none"),$("#frontpre img").css("opacity","1"))},IdcardBack:function(){""==!this.IdcardBackShow&&($("#backpre p").css("display","none"),$("#backpre img").css("opacity","1"))},Bankbook:function(){""==!this.BankbookShow&&($("#bankpre p").css("display","none"),$("#bankpre img").css("opacity","1"))},CertificatePhotoShow:function(){""==!this.CertificatePhotoShow&&($("#certificatepre p").css("display","none"),$("#certificatepre img").css("opacity","1"))}},methods:{readfront:function(){var t=this;document.getElementById("front").addEventListener("change",function(){var e=new FileReader;e.readAsDataURL(this.files[0]),e.onload=function(e){t.IdcardFront=e.target.result}},!1)},readpoto:function(e){var t=this,n=e.target.files.item(0),a=e.target.id;console.log(e),console.log(e.target.id),console.log(n);var o=new FileReader;o.addEventListener("load",function(e){"front"==a&&(t.IdcardFrontShow=e.target.result,t.IdcardFront=n);"back"==a&&(t.IdcardBackShow=e.target.result,t.IdcardBack=n);"bank"==a&&(t.BankbookShow=e.target.result,t.Bankbook=n);"certificate"==a&&(t.CertificatePhotoShow=e.target.result,t.CertificatePhoto=n)}),o.readAsDataURL(n)},getUserid:function(){var n=this;return new Promise(function(e,t){n.userid=findGetParameter("user"),e()})},postback:function(){var t=this;if("FB"==t.type){if(!t.loading){if(t.loading=!0,!t.name)return alert("請填入收件人"),void(t.loading=!1);if(!t.address)return alert("請填入地址"),void(t.loading=!1);if(!t.fbData.fbId)return alert("請先登入FB"),void(t.loading=!1);if(!t.agree)return alert("請勾選我已詳閱"),void(t.loading=!1);t.GameToken().then(function(){t.grecaptcha("backfill").then(function(){t.postRecipientinfo().then(function(e){e.success?alert("資料已送出，感謝您的參與！"):alert("您並無資格領取此獎項。"),window.location.href="./index.html",t.loading=!1})})})}}else if(!t.loading){if(t.loading=!0,!t.name)return alert("請填入收件人"),void(t.loading=!1);if(!t.address)return alert("請填入地址"),void(t.loading=!1);if(!t.CertificatePhoto)return alert("請上傳發票正本電子檔"),void(t.loading=!1);if(!t.agree)return alert("請勾選我已詳閱"),void(t.loading=!1);t.GameToken().then(function(){t.grecaptcha("backfill").then(function(){t.postRecipientinfo().then(function(e){e.success?(alert("資料已送出，感謝您的參與！"),window.location.href="./index.html"):alert(e.responseMessage),t.loading=!1})})})}},fbLogin:function(){var t=this;FB.login(function(e){"connected"===e.status&&(t.fbData.fbtoken=e.authResponse.accessToken,t.fbData.fbId=e.authResponse.userID,FB.api("/me","GET",{fields:"id,name,picture"},function(e){t.fbData.fbName=e.name,t.fbData.fbPic="http://graph.facebook.com/"+e.id+"/picture?width=140&height=140",t.fblogin=!0}))})}},mounted:function(){var e,t,n,a,o,i=this;$("body").loadpage("init",{async:!1}),i.getUserid().then(function(){i.GameToken().then(function(){i.getRecipientinfo()})}),window.fbAsyncInit=function(){FB.init({appId:"2114580888842549",status:!0,cookie:!0,xfbml:!1,version:"v4.0"})},e=document,t="script",n="facebook-jssdk",o=e.getElementsByTagName(t)[0],e.getElementById(n)||((a=e.createElement(t)).id=n,a.src="https://connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(a,o))}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhY2tmaWxsLmpzIl0sIm5hbWVzIjpbImJhY2tmaWxsX3ZpZXciLCJWdWUiLCJlbCIsInR5cGUiLCJmYmxvZ2luIiwiZmJEYXRhIiwiZmJ0b2tlbiIsImZiSWQiLCJmYk5hbWUiLCJmYlBpYyIsIm1vYmlsZSIsImludl9udW0iLCJ1c2VyaWQiLCJhd2FyZGl0ZW0iLCJJZGNhcmRCYWNrU2hvdyIsImFkZHJlc3MiLCJJZGNhcmRGcm9udFNob3ciLCJCYW5rYm9va1Nob3ciLCJDZXJ0aWZpY2F0ZVBob3RvU2hvdyIsIklkY2FyZEZyb250IiwiYWdyZWUiLCJJZGNhcmRCYWNrIiwibW9kZV9zdGF0dXMiLCJ3YXRjaCIsIkNlcnRpZmljYXRlUGhvdG8iLCJ0aGlzIiwiJCIsImNzcyIsIkJhbmtib29rIiwibWV0aG9kcyIsInJlYWRmcm9udCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsInJlYWRBc0RhdGFVUkwiLCJmaWxlcyIsIm9ubG9hZCIsImUiLCJ2bSIsInRhcmdldCIsInJlc3VsdCIsInJlYWRwb3RvIiwicmVhZEZpbGUiLCJpdGVtIiwiaWQiLCJjb25zb2xlIiwibG9nIiwiZmlsZSIsImltZ0xvYWQiLCJnZXRVc2VyaWQiLCJyZWplY3QiLCJyZXNvbHZlIiwibG9hZGluZyIsImZpbmRHZXRQYXJhbWV0ZXIiLCJhbGVydCIsIkdhbWVUb2tlbiIsInRoZW4iLCJncmVjYXB0Y2hhIiwicG9zdFJlY2lwaWVudGluZm8iLCJyZXMiLCJzdWNjZXNzIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwibmFtZSIsInJlc3BvbnNlTWVzc2FnZSIsImZiTG9naW4iLCJGQiIsImxvZ2luIiwic3RhdHVzIiwiYXV0aFJlc3BvbnNlIiwiYWNjZXNzVG9rZW4iLCJ1c2VySUQiLCJhcGkiLCJmaWVsZHMiLCJhcGlyZXMiLCJkIiwicyIsImpzIiwiZmpzIiwiaW5pdCIsImFwcElkIiwiY29va2llIiwieGZibWwiLCJ2ZXJzaW9uIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJjcmVhdGVFbGVtZW50Iiwic3JjIiwicGFyZW50Tm9kZSJdLCJtYXBwaW5ncyI6ImFBQUEsSUFBSUEsY0FBZ0IsSUFBSUMsSUFBSSxDQUN4QkMsR0FBSSxPQURKRixLQUFBQSxDQUNJRyxLQURvQixHQUVsQkMsU0FBQSxFQUNFQyxPQURGLENBQ1FDLFFBQUEsR0FDSEMsS0FGTCxHQUdNQyxPQUFBLEdBQ0pGLE1BREksSUFJSkcsT0FDQSxHQUdKQyxPQUFRLEdBWE5DLFFBQUEsR0FVRkMsVUFWRSxHQVdGRixLQVhFLEdBWUZDLFFBWkUsR0FhRkUsZ0JBYkUsR0FjRUMsZUFkRixHQWVGQyxhQWZFLEdBZ0JGQyxxQkFoQkUsR0FpQkZGLFlBQWdCLEtBQ2hCRyxXQWxCRSxLQW1CRkMsU0FBQUEsS0FDQUMsaUJBcEJFLEtBb0JpQkMsT0FBQSxFQUNuQkMsV0FyQkUsR0FxQmdCQyxZQUFBLElBQ0ZDLE1BQUEsQ0FDaEJDLFlBQWdCLFdBdkJkLEtBdUJzQkMsS0F2QnRCVCxrQkF5QlVVLEVBekJWLGVBQUFDLElBQUEsVUFBQSxRQTBCU0QsRUFBRSxpQkFBQUMsSUFBQSxVQUFBLE9BR2JSLFdBQWEsV0FTZ0IsS0FSekJNLEtBUU9YLGlCQVBBRSxFQUFBQSxjQUFKVyxJQUFILFVBQThCLFFBQ3hCRCxFQUFBLGdCQUFtQkMsSUFBckIsVUFBQSxPQUpMQyxTQUFBLFdBU0MsS0FEUUgsS0FDUlIsZUFTSVMsRUFBRSxjQUFjQyxJQUFJLFVBQVUsUUFSM0JiLEVBQUFBLGdCQUFQYSxJQUE2QixVQUFBLE9BRzVCVCxxQkFBQSxXQUVnQixLQWZsQk8sS0FlT1AsdUJBQ0dRLEVBQUEscUJBQVRDLElBQUEsVUFBQSxRQVVJRCxFQUFFLHVCQUF1QkMsSUFBSSxVQUFVLFFBTjFDRSxRQUFBLENBcEJGQyxVQW9CRSxXQUVMWixJQUFBQSxFQUFBQSxLQWdCSWEsU0FBQUMsZUFBQSxTQVlBQyxpQkFBQSxTQWVBLFdBQ0EsSUFBQUMsRUFBQSxJQUFB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LE9BQUEsbUJBQ0gsU0FBQUMsR0FBQXJDLEVBQUFuQyxPQUFBRyxPQUFBcUUsRUFBQVgsS0FDYTFCLEVBQUFuQyxPQUFBSSxNQUFBLDZCQUFBb0UsRUFBQS9CLEdBQUEsZ0NBQ1ZOLEVBQUFwQyxTQUFBLFNBS0FvQyxRQUFBQSxXQUNJQSxJQW9CUHNDLEVBQUFDLEVBQVNsQixFQUNkbUIsRUFBQUMsRUFyQll6QyxFQUFHb0IsS0FFS0osRUFBQUEsUUFBQUEsU0FBUyxPQUFDVyxDQUFBQSxPQUFMLElBQ0wzQixFQUFBQSxZQUFHYyxLQUFILFdBQ0hkLEVBQUFpQixZQUFNQyxLQUFBLFdBQ0hGLEVBQUFBLHVCQUlBaEIsT0FBQUEsWUFBQSxXQUNINkIsR0FBQWEsS0FBQSxDQVZMQyxNQUFBLG1CQURKWixRQUFBLEVBREphLFFBQUEsRUFnQkhDLE9BQUEsRUFDSkMsUUFBQSxVQUtRUixFQVNPL0MsU0FUUGdELEVBU08sU0FURWxCLEVBU0YsaUJBUlpvQixFQUFBSCxFQUFBUyxxQkFBQVIsR0FBQSxHQUNRUixFQUFBQSxlQUFXekIsTUEyQ3ZCa0MsRUFBS0YsRUFBRVUsY0FBY1QsSUF0Q1ZKLEdBQUk3QixFQUFha0MsRUFBQVMsSUFBQSw0Q0FBcEJSLEVBQ0lTLFdBQVNiLGFBQVFHLEVBQUFDIiwiZmlsZSI6ImJhY2tmaWxsLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGJhY2tmaWxsX3ZpZXcgPSBuZXcgVnVlKHtcclxuICAgIGVsOiBcIiNhcHBcIixcclxuICAgIGRhdGE6IHtcclxuICAgICAgICB0eXBlOiBcIlwiLCAvLyBJbnZvaWNlXCIgb3IgRkJcclxuICAgICAgICBmYmxvZ2luOiBmYWxzZSxcclxuICAgICAgICBmYkRhdGE6IHtcclxuICAgICAgICAgICAgZmJ0b2tlbjogXCJcIixcclxuICAgICAgICAgICAgZmJJZDogXCJcIixcclxuICAgICAgICAgICAgZmJOYW1lOiBcIlwiLFxyXG4gICAgICAgICAgICBmYlBpYzogXCJcIixcclxuICAgICAgICAgICAgLy8gbWJfaWQ6IFwiXCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB1c2VyaWQ6IFwiXCIsXHJcbiAgICAgICAgbW9iaWxlOiBcIlwiLFxyXG4gICAgICAgIGludl9udW06IFwiXCIsXHJcbiAgICAgICAgYXdhcmRpdGVtOiBcIlwiLFxyXG4gICAgICAgIG5hbWU6IFwiXCIsXHJcbiAgICAgICAgYWRkcmVzczogXCJcIixcclxuICAgICAgICBJZGNhcmRGcm9udFNob3c6IFwiXCIsXHJcbiAgICAgICAgSWRjYXJkQmFja1Nob3c6IFwiXCIsXHJcbiAgICAgICAgQmFua2Jvb2tTaG93OiBcIlwiLFxyXG4gICAgICAgIENlcnRpZmljYXRlUGhvdG9TaG93OiBcIlwiLFxyXG4gICAgICAgIElkY2FyZEZyb250OiBudWxsLCAvL+ato+mdolxyXG4gICAgICAgIElkY2FyZEJhY2s6IG51bGwsIC8v5Y+N6Z2iXHJcbiAgICAgICAgQmFua2Jvb2s6IG51bGwsIC8v5a2Y5pG6XHJcbiAgICAgICAgQ2VydGlmaWNhdGVQaG90bzogbnVsbCwgLy/nmbznpahcclxuICAgICAgICBhZ3JlZTogZmFsc2UsXHJcbiAgICAgICAgc3RhcnRfZGF0ZTogXCJcIixcclxuICAgICAgICBtb2RlX3N0YXR1czogXCJcIixcclxuICAgIH0sXHJcbiAgICB3YXRjaDoge1xyXG4gICAgICAgIElkY2FyZEZyb250OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAgICAgaWYoIXZtLklkY2FyZEZyb250U2hvdyA9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICAkKFwiI2Zyb250cHJlIHBcIikuY3NzKFwiZGlzcGxheVwiLFwibm9uZVwiKTtcclxuICAgICAgICAgICAgICAgICQoXCIjZnJvbnRwcmUgaW1nXCIpLmNzcyhcIm9wYWNpdHlcIixcIjFcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIElkY2FyZEJhY2s6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICBpZighdm0uSWRjYXJkQmFja1Nob3cgPT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgJChcIiNiYWNrcHJlIHBcIikuY3NzKFwiZGlzcGxheVwiLFwibm9uZVwiKTtcclxuICAgICAgICAgICAgICAgICQoXCIjYmFja3ByZSBpbWdcIikuY3NzKFwib3BhY2l0eVwiLFwiMVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgQmFua2Jvb2s6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICBpZighdm0uQmFua2Jvb2tTaG93ID09IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgICQoXCIjYmFua3ByZSBwXCIpLmNzcyhcImRpc3BsYXlcIixcIm5vbmVcIik7XHJcbiAgICAgICAgICAgICAgICAkKFwiI2JhbmtwcmUgaW1nXCIpLmNzcyhcIm9wYWNpdHlcIixcIjFcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIENlcnRpZmljYXRlUGhvdG9TaG93OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAgICAgaWYoIXZtLkNlcnRpZmljYXRlUGhvdG9TaG93ID09IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgICQoXCIjY2VydGlmaWNhdGVwcmUgcFwiKS5jc3MoXCJkaXNwbGF5XCIsXCJub25lXCIpO1xyXG4gICAgICAgICAgICAgICAgJChcIiNjZXJ0aWZpY2F0ZXByZSBpbWdcIikuY3NzKFwib3BhY2l0eVwiLFwiMVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgbWV0aG9kczoge1xyXG4gICAgICAgIHJlYWRmcm9udCgpIHtcclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAgICAgLy8gaWYgKGlucHV0LmZpbGVzICYmIGlucHV0LmZpbGVzWzBdKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAvLyBjb25zb2xlLmxvZyhpbnB1dC5maWxlc1swXS5zaXplKTtcclxuICAgICAgICAgICAgLy8gICAgIGlmKGlucHV0LmZpbGVzWzBdLnNpemUgPCAxMDAwMDAwMCkge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUudGFyZ2V0LnJlc3VsdCk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIC8vIHZtLmNhcmV0Q2FuKGUudGFyZ2V0LnJlc3VsdCk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIC8vIHZtLmZhY2ViYXNlNjQgPSBlLnRhcmdldC5yZXN1bHQ7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGlucHV0LmZpbGVzWzBdKTtcclxuICAgICAgICAgICAgLy8gICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgYWxlcnQoXCLlnJbmqpTlpKrlpKfkuoZcIik7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgdmFyIGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmcm9udFwiKTtcclxuICAgICAgICAgICAgLy8gdmFyIGlucHV0X2IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhY2tcIik7XHJcbiAgICAgICAgICAgIC8vIHZhciBpbnB1dF9iYW5rID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYW5rXCIpO1xyXG4gICAgICAgICAgICAvLyB2YXIgaW5wdXRfY2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjZXJ0aWZpY2F0ZVwiKTtcclxuICAgICAgICAgICAgLy8gdmFyIHJlc3VsdDtcclxuICAgICAgICAgICAgLy8gaWYodHlwZW9mIEZpbGVSZWFkZXI9PT0ndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcclxuICAgICAgICAgICAgLy8gICAgIC8vIHJlc3VsdC5pbm5lckhUTUwgPSBcIuaKseatie+8jOS9oOeahOeAj+imveWZqOS4jeaUr+aPtCBGaWxlUmVhZGVyXCI7XHJcbiAgICAgICAgICAgIC8vICAgICAvLyBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgLy8gfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScscmVhZEZpbGUsZmFsc2UpO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScscmVhZEZpbGUsZmFsc2UpO1xyXG4gICAgICAgICAgICAvLyBpbnB1dF9iLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScscmVhZEZpbGUoXCJJZGNhcmRCYWNrXCIpLGZhbHNlKTtcclxuICAgICAgICAgICAgLy8gaW5wdXRfYmFuay5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLHJlYWRGaWxlKFwiQmFua2Jvb2tcIiksZmFsc2UpO1xyXG4gICAgICAgICAgICAvLyBpbnB1dF9jZXIuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJyxyZWFkRmlsZShcIkNlcnRpZmljYXRlUGhvdG9cIiksZmFsc2UpO1xyXG4gICAgICAgICAgICAvLyBmdW5jdGlvbiByZWFkRmlsZSgpIHtcclxuICAgICAgICAgICAgLy8gICAgIGZvcih2YXIgaT0wOyBpIDwgdGhpcy5maWxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKHRoaXMuZmlsZXNbaV0pO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIHZtLmJhc2U2NEFyci5wdXNoKGUudGFyZ2V0LnJlc3VsdCk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyAgICAgICAgIC8vIHJlYWRlci5yZWFkQXNEYXRhVVJMKHRoaXMuZmlsZXNbaV0pO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlYWRlcik7XHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgZnVuY3Rpb24gcmVhZEZpbGUoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKHRoaXMuZmlsZXNbMF0pO1xyXG4gICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2bS5JZGNhcmRGcm9udCA9IGUudGFyZ2V0LnJlc3VsdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHJlYWRlci5yZWFkQXNEYXRhVVJMKHRoaXMuZmlsZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVhZGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVhZHBvdG8oZSkgeyAgICAgIC8vaW5wdXQgZmlsZSBvbmNoYW5nZSBldmVudFxyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICB2YXIgZmlsZSA9IGUudGFyZ2V0LmZpbGVzLml0ZW0oMCk7XHJcbiAgICAgICAgICAgIHZhciBpZCA9IGUudGFyZ2V0LmlkO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZS50YXJnZXQuaWQpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhmaWxlKTtcclxuICAgICAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICAgICAgICAgIHJlYWRlci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJyxpbWdMb2FkKTtcclxuICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGltZ0xvYWQoZSkge1xyXG4gICAgICAgICAgICAgICAgaWYoaWQgPT0gXCJmcm9udFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0uSWRjYXJkRnJvbnRTaG93ID0gZS50YXJnZXQucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLklkY2FyZEZyb250ID0gZmlsZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKGlkID09IFwiYmFja1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0uSWRjYXJkQmFja1Nob3cgPSBlLnRhcmdldC5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0uSWRjYXJkQmFjayA9IGZpbGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZihpZCA9PSBcImJhbmtcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLkJhbmtib29rU2hvdyA9IGUudGFyZ2V0LnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICB2bS5CYW5rYm9vayA9IGZpbGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZihpZCA9PSBcImNlcnRpZmljYXRlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICB2bS5DZXJ0aWZpY2F0ZVBob3RvU2hvdyA9IGUudGFyZ2V0LnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICB2bS5DZXJ0aWZpY2F0ZVBob3RvID0gZmlsZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0VXNlcmlkKCkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICB2bS51c2VyaWQgPSBmaW5kR2V0UGFyYW1ldGVyKCd1c2VyJyk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwb3N0YmFjaygpIHtcclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAgICAgaWYodm0udHlwZSA9PSBcIkZCXCIpIHtcclxuICAgICAgICAgICAgICAgIGlmKCF2bS5sb2FkaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0ubG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIXZtLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCLoq4vloavlhaXmlLbku7bkurpcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICBpZighdm0uYWRkcmVzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcIuiri+Whq+WFpeWcsOWdgFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm0ubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCF2bS5mYkRhdGEuZmJJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcIuiri+WFiOeZu+WFpUZCXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIXZtLmFncmVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwi6KuL5Yu+6YG45oiR5bey6Kmz6ZaxXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgdm0uR2FtZVRva2VuKCkudGhlbihmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5ncmVjYXB0Y2hhKFwiYmFja2ZpbGxcIikudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLnBvc3RSZWNpcGllbnRpbmZvKCkudGhlbihmdW5jdGlvbihyZXMpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFyZXMuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbGVydChyZXMucmVzcG9uc2VNZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCLmgqjkuKbnhKHos4fmoLzpoJjlj5bmraTnjY7poIXjgIJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCIuL2luZGV4Lmh0bWxcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0ubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwi6LOH5paZ5bey6YCB5Ye677yM5oSf6Kyd5oKo55qE5Y+D6IiH77yBXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiLi9pbmRleC5odG1sXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZtLnBvcHVwID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdm0ucG9wUGFnZSA9IFwiaW52U3VjY2Vzc1wiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmKCF2bS5sb2FkaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0ubG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIXZtLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCLoq4vloavlhaXmlLbku7bkurpcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICBpZighdm0uYWRkcmVzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcIuiri+Whq+WFpeWcsOWdgFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm0ubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmKCF2bS5JZGNhcmRGcm9udCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICBhbGVydChcIuiri+S4iuWCs+i6q+S7veitieato+mdoumbu+WtkOaqlFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgdm0ubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICByZXR1cm5cclxuICAgICAgICAgICAgICAgICAgICAvLyB9O1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmKCF2bS5JZGNhcmRCYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIGFsZXJ0KFwi6KuL5LiK5YKz6Lqr5Lu96K2J5Y+N6Z2i6Zu75a2Q5qqUXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICB2bS5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHJldHVyblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIH07XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYoIXZtLkJhbmtib29rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIGFsZXJ0KFwi6KuL5LiK5YKz5a2Y5pG66Zu75a2Q5qqUXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICB2bS5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHJldHVyblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIH07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIXZtLkNlcnRpZmljYXRlUGhvdG8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCLoq4vkuIrlgrPnmbznpajmraPmnKzpm7vlrZDmqpRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICBpZighdm0uYWdyZWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCLoq4vli77pgbjmiJHlt7LoqbPplrFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB2bS5HYW1lVG9rZW4oKS50aGVuKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZtLmdyZWNhcHRjaGEoXCJiYWNrZmlsbFwiKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0ucG9zdFJlY2lwaWVudGluZm8oKS50aGVuKGZ1bmN0aW9uKHJlcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXJlcy5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KHJlcy5yZXNwb25zZU1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCLos4fmlpnlt7LpgIHlh7rvvIzmhJ/orJ3mgqjnmoTlj4PoiIfvvIFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCIuL2luZGV4Lmh0bWxcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdm0ucG9wdXAgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB2bS5wb3BQYWdlID0gXCJpbnZTdWNjZXNzXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZmJMb2dpbigpIHtcclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAgICAgRkIubG9naW4oZnVuY3Rpb24ocmVzKXtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gJ2Nvbm5lY3RlZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICB2bS5mYkRhdGEuZmJ0b2tlbiA9IHJlcy5hdXRoUmVzcG9uc2UuYWNjZXNzVG9rZW47XHJcbiAgICAgICAgICAgICAgICAgICAgdm0uZmJEYXRhLmZiSWQgPSByZXMuYXV0aFJlc3BvbnNlLnVzZXJJRDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5Y+W5b6XZmLlgIvkurros4fmlplcclxuICAgICAgICAgICAgICAgICAgICBGQi5hcGkoJy9tZScsJ0dFVCcse1wiZmllbGRzXCI6XCJpZCxuYW1lLHBpY3R1cmVcIn0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGFwaXJlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYXBpcmVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLmZiRGF0YS5mYk5hbWUgPSBhcGlyZXMubmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZtLmZiRGF0YS5mYlBpYyA9IGFwaXJlcy5waWN0dXJlLmRhdGEudXJsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uZmJEYXRhLmZiUGljID0gJ2h0dHA6Ly9ncmFwaC5mYWNlYm9vay5jb20vJysgYXBpcmVzLmlkICsnL3BpY3R1cmU/d2lkdGg9MTQwJmhlaWdodD0xNDAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uZmJsb2dpbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgbW91bnRlZDogZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgIC8vIHZtLnJlYWRwaWMoKTtcclxuICAgICAgICAkKFwiYm9keVwiKS5sb2FkcGFnZShcImluaXRcIix7YXN5bmMgOiBmYWxzZX0pO1xyXG4gICAgICAgIHZtLmdldFVzZXJpZCgpLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZtLkdhbWVUb2tlbigpLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2bS5nZXRSZWNpcGllbnRpbmZvKCk7XHJcbiAgICAgICAgICAgICAgICAvLyAkKFwiYm9keVwiKS5sb2FkcGFnZShcImNsb3NlXCIpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHdpbmRvdy5mYkFzeW5jSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgRkIuaW5pdCh7XHJcbiAgICAgICAgICAgICAgICBhcHBJZDogJzIxMTQ1ODA4ODg4NDI1NDknLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOnRydWUsXHJcbiAgICAgICAgICAgICAgICBjb29raWU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB4ZmJtbDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiAndjQuMCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgKGZ1bmN0aW9uIChkLCBzLCBpZCkge1xyXG4gICAgICAgICAgICB2YXIganMsIGZqcyA9IGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUocylbMF07XHJcbiAgICAgICAgICAgIGlmIChkLmdldEVsZW1lbnRCeUlkKGlkKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGpzID0gZC5jcmVhdGVFbGVtZW50KHMpO1xyXG4gICAgICAgICAgICBqcy5pZCA9IGlkO1xyXG4gICAgICAgICAgICBqcy5zcmMgPSBcImh0dHBzOi8vY29ubmVjdC5mYWNlYm9vay5uZXQvZW5fVVMvc2RrLmpzXCI7XHJcbiAgICAgICAgICAgIGZqcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShqcywgZmpzKTtcclxuICAgICAgICB9KGRvY3VtZW50LCAnc2NyaXB0JywgJ2ZhY2Vib29rLWpzc2RrJykpO1xyXG4gICAgfVxyXG59KTtcclxuIl19
