"use strict";var game_view=new Vue({el:"#app",data:{game:{},loading:!1,invoToken:"",gToken:"",fbData:{fbtoken:"",fbId:"",fbName:"",fbPic:"",mb_id:""},gamePage:"fblogin",ticket:"",gcode:0,top100Arr:[],person:{id:0,img:"",name:"",score:0},mobile:"",agree:!1,fbslink:"",start_date:"",mode_status:""},methods:{fblogin:function(){var n=this;FB.login(function(t){"connected"===t.status&&(n.fbData.fbtoken=t.authResponse.accessToken,n.fbData.fbId=t.authResponse.userID,FB.api("/me","GET",{fields:"id,name,picture"},function(e){console.log(e),n.person.name=e.name,n.person.img="http://graph.facebook.com/"+e.id+"/picture?width=140&height=140",n.popup=!0,n.popPage="gameload",n.gamePage="game",initGame(t)}))})},fbRegister:function(){var e=this;e.GameToken().then(function(){e.register()})},sendFb:function(){var e=this;e.GameToken().then(function(){e.fbshare()})},getTop100:function(){var t=this;t.GameToken().then(function(){t.top100().then(function(){for(var e=0;e<t.top100Arr.length;e++)t.top100Arr[e].is_me&&(t.person.id=t.top100Arr[e].seq,t.person.img=t.top100Arr[e].pic_url,t.person.name=t.top100Arr[e].fb_name,t.person.score=t.top100Arr[e].score,100<t.top100Arr[e].seq&&(t.person.id="未進榜"))})})},gameagain:function(){window.location="./game.html"},lottery:function(){var e=this;if(!e.loading){e.loading=!0;if(""==e.mobile||!e.mobile.match(/^09[0-9]{8}$/))return alert("請輸入手機正確格式"),void(e.loading=!1);if(!e.agree)return alert("請勾選我已詳閱"),void(e.loading=!1);e.popup=!0,e.popPage="lotterySuc",e.loading=!1}},fbLink:function(){var e=this;e.sendFb();var t=e.fbslink;return e.gamePage="lottery",window.ActiveXObject||"ActiveXObject"in window?window.open("https://www.facebook.com/sharer/sharer.php?u="+t):window.open("https://www.facebook.com/sharer/sharer.php?u="+t+"&hashtag=%23PowerBOMB人生不斷電馬拉松"),!1}},computed:{},watch:{},mounted:function(){var e,t,n,o,i,a=this;setTimeout(function(){a.getIe()},1e3),$(".nav").hide(),$(".footer").hide(),window.fbAsyncInit=function(){FB.init({appId:"2114580888842549",status:!0,cookie:!0,xfbml:!1,version:"v5.0"})},e=document,t="script",n="facebook-jssdk",i=e.getElementsByTagName(t)[0],e.getElementById(n)||((o=e.createElement(t)).id=n,o.src="https://connect.facebook.net/en_US/sdk.js",i.parentNode.insertBefore(o,i))}});function initGame(e){game_view.game=new Game({memberData:e})}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdhbWUuanMiXSwibmFtZXMiOlsiZ2FtZV92aWV3IiwiVnVlIiwiZWwiLCJnYW1lIiwibG9hZGluZyIsImludm9Ub2tlbiIsImdUb2tlbiIsImZidG9rZW4iLCJmYklkIiwiZmJQaWMiLCJtYl9pZCIsInRpY2tldCIsImdhbWVQYWdlIiwiZ2NvZGUiLCJ0b3AxMDBBcnIiLCJpbWciLCJuYW1lIiwic2NvcmUiLCJhZ3JlZSIsImZic2xpbmsiLCJtb2RlX3N0YXR1cyIsImZibG9naW4iLCJ2bSIsInRoaXMiLCJGQiIsImxvZ2luIiwicmVzIiwic3RhdHVzIiwiZmJEYXRhIiwiYXV0aFJlc3BvbnNlIiwiYWNjZXNzVG9rZW4iLCJ1c2VySUQiLCJjb25zb2xlIiwibG9nIiwiYXBpcmVzIiwicGVyc29uIiwiaWQiLCJwb3B1cCIsImluaXRHYW1lIiwiZmJSZWdpc3RlciIsIkdhbWVUb2tlbiIsInRoZW4iLCJyZWdpc3RlciIsInNlbmRGYiIsImZic2hhcmUiLCJnZXRUb3AxMDAiLCJ0b3AxMDAiLCJpIiwibGVuZ3RoIiwiaXNfbWUiLCJzZXEiLCJwaWNfdXJsIiwiZmJfbmFtZSIsImdhbWVhZ2FpbiIsIndpbmRvdyIsImxvY2F0aW9uIiwibW9iaWxlIiwibWF0Y2giLCJhbGVydCIsIm1vYmlsZV9ydWxlIiwicG9wUGFnZSIsImZiTGluayIsImZiaHRtbF91cmwiLCJBY3RpdmVYT2JqZWN0Iiwib3BlbiIsImNvbXB1dGVkIiwid2F0Y2giLCJkIiwicyIsImpzIiwiZmpzIiwic2V0VGltZW91dCIsImdldEllIiwiJCIsImhpZGUiLCJmYkFzeW5jSW5pdCIsImluaXQiLCJhcHBJZCIsImNvb2tpZSIsInhmYm1sIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJnZXRFbGVtZW50QnlJZCIsImNyZWF0ZUVsZW1lbnQiLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIiwiR2FtZSIsIm1lbWJlckRhdGEiXSwibWFwcGluZ3MiOiJhQUFBLElBQUlBLFVBQVksSUFBSUMsSUFB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QS9GQWhELEVBQUFDLEtBVUFnRCxXQUFBLFdBQ0FqRCxFQUFBa0QsU0FDQSxLQUNBQyxFQUFBLFFBQUFDLE9BQ0FELEVBQUEsV0FBQUMsT0FlQXBCLE9BQUFxQixZQUFBLFdBQ0FuRCxHQUFBb0QsS0FBQSxDQUNBQyxNQUFBLG1CQUNBbEQsUUFBQSxFQUNBbUQsUUFBQSxFQU1RQyxPQUFPLEVBTFJKLFFBQWMsVUE0RHJCUixFQU1ZRyxTQU5aRixFQU1vQlksU0FOcEI1QyxFQU1vQjRDLGlCQUxwQlYsRUFBQUgsRUFBQWEscUJBQUFaLEdBQUEsR0FDQUQsRUFBQWMsZUFBQTdDLE1BUUlpQyxFQUFLRixFQUFFZSxjQUFjZCxJQUNsQmhDLEdBQUtBLEVBTlhpQyxFQUFVRixJQUFNL0IsNENBQ2JrQyxFQUFBYSxXQUFBQyxhQUFBZixFQUFBQyxPQWFaLFNBQVNoQyxTQUFTNUIsR0FSTjJELFVBQVFqQyxLQUFSLElBQUFpRCxLQUFBLENBQ0VDLFdBQU81RSIsImZpbGUiOiJnYW1lLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGdhbWVfdmlldyA9IG5ldyBWdWUoe1xyXG4gICAgZWw6IFwiI2FwcFwiLFxyXG4gICAgZGF0YToge1xyXG4gICAgICAgIGdhbWU6IHt9LFxyXG4gICAgICAgIGxvYWRpbmc6IGZhbHNlLFxyXG4gICAgICAgIC8vIHNjb3JlOiAwLFxyXG4gICAgICAgIC8vIHBvcHVwOiBcIlwiLFxyXG4gICAgICAgIGludm9Ub2tlbjogXCJcIixcclxuICAgICAgICBnVG9rZW46IFwiXCIsXHJcbiAgICAgICAgZmJEYXRhOiB7XHJcbiAgICAgICAgICAgIGZidG9rZW46IFwiXCIsXHJcbiAgICAgICAgICAgIGZiSWQ6IFwiXCIsXHJcbiAgICAgICAgICAgIGZiTmFtZTogXCJcIixcclxuICAgICAgICAgICAgZmJQaWM6IFwiXCIsXHJcbiAgICAgICAgICAgIG1iX2lkOiBcIlwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2FtZVBhZ2U6IFwiZmJsb2dpblwiLFxyXG4gICAgICAgIHRpY2tldDogXCJcIixcclxuICAgICAgICBnY29kZTogMCxcclxuICAgICAgICB0b3AxMDBBcnI6IFtdLFxyXG4gICAgICAgIHBlcnNvbjoge1xyXG4gICAgICAgICAgICBpZDogMCxcclxuICAgICAgICAgICAgaW1nOiBcIlwiLFxyXG4gICAgICAgICAgICBuYW1lOiBcIlwiLFxyXG4gICAgICAgICAgICBzY29yZTogMCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIG1vYmlsZTogXCJcIixcclxuICAgICAgICBhZ3JlZTogZmFsc2UsXHJcbiAgICAgICAgLy8gdXNlclR5cGU6IFwiXCIsXHJcbiAgICAgICAgZmJzbGluazogXCJcIixcclxuICAgICAgICAvLyBzaG93a2V5d29yZDogXCJcIixcclxuICAgICAgICBzdGFydF9kYXRlOiBcIlwiLFxyXG4gICAgICAgIG1vZGVfc3RhdHVzOiBcIlwiLFxyXG4gICAgfSxcclxuICAgIG1ldGhvZHM6IHtcclxuICAgICAgICAvLyBmYlJlZ2lzdGVyKCkge1xyXG4gICAgICAgIC8vICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgIC8vICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSl7XHJcbiAgICAgICAgLy8gICAgICAgICB2bS5HYW1lVG9rZW4oKS50aGVuKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgdm0ucmVnaXN0ZXIoKTtcclxuICAgICAgICAvLyAgICAgICAgIH0pO1xyXG4gICAgICAgIC8vICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgIC8vICAgICB9KVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gZmJHZXRzdGF0dXMoKSB7XHJcbiAgICAgICAgLy8gICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgLy8gICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKXtcclxuICAgICAgICAvLyAgICAgICAgIHZtLkdhbWVUb2tlbigpLnRoZW4oZnVuY3Rpb24oKXtcclxuICAgICAgICAvLyAgICAgICAgICAgICB2bS5nZXRzdGF0dXMoKTtcclxuICAgICAgICAvLyAgICAgICAgIH0pO1xyXG4gICAgICAgIC8vICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgIC8vICAgICB9KVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgZmJsb2dpbigpIHtcclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAgICAgRkIubG9naW4oZnVuY3Rpb24ocmVzKXtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gJ2Nvbm5lY3RlZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICB2bS5mYkRhdGEuZmJ0b2tlbiA9IHJlcy5hdXRoUmVzcG9uc2UuYWNjZXNzVG9rZW47XHJcbiAgICAgICAgICAgICAgICAgICAgdm0uZmJEYXRhLmZiSWQgPSByZXMuYXV0aFJlc3BvbnNlLnVzZXJJRDtcclxuICAgICAgICAgICAgICAgICAgICBGQi5hcGkoJy9tZScsJ0dFVCcse1wiZmllbGRzXCI6XCJpZCxuYW1lLHBpY3R1cmVcIn0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGFwaXJlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYXBpcmVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLnBlcnNvbi5uYW1lID0gYXBpcmVzLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5wZXJzb24uaW1nID0gJ2h0dHA6Ly9ncmFwaC5mYWNlYm9vay5jb20vJysgYXBpcmVzLmlkICsnL3BpY3R1cmU/d2lkdGg9MTQwJmhlaWdodD0xNDAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0ucG9wdXAgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0ucG9wUGFnZSA9IFwiZ2FtZWxvYWRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLmdhbWVQYWdlID0gXCJnYW1lXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0R2FtZShyZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyB2bS5mYlJlZ2lzdGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdm0uZmJSZWdpc3RlcigpLnRoZW4oZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgdm0uZmJHZXRzdGF0dXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGluaXRHYW1lKHJlcyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSxcclxuICAgICAgICBmYlJlZ2lzdGVyKCkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICB2bS5HYW1lVG9rZW4oKS50aGVuKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICB2bS5yZWdpc3RlcigpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNlbmRGYigpIHtcclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAgICAgdm0uR2FtZVRva2VuKCkudGhlbihmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgdm0uZmJzaGFyZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldFRvcDEwMCgpIHtcclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAgICAgdm0uR2FtZVRva2VuKCkudGhlbihmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgdm0udG9wMTAwKCkudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLz09PeWPluW+l+WAi+S6uuaIkOe4vj09PS8vXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHZtLnRvcDEwMEFyci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcImlcIixpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih2bS50b3AxMDBBcnJbaV0uaXNfbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLnBlcnNvbi5pZCA9IHZtLnRvcDEwMEFycltpXS5zZXE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5wZXJzb24uaW1nID0gdm0udG9wMTAwQXJyW2ldLnBpY191cmw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5wZXJzb24ubmFtZSA9IHZtLnRvcDEwMEFycltpXS5mYl9uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0ucGVyc29uLnNjb3JlID0gdm0udG9wMTAwQXJyW2ldLnNjb3JlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodm0udG9wMTAwQXJyW2ldLnNlcSA+IDEwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLnBlcnNvbi5pZCA9IFwi5pyq6YCy5qacXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnYW1lYWdhaW4oKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IFwiLi9nYW1lLmh0bWxcIjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxvdHRlcnkoKSB7XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgIGlmKCF2bS5sb2FkaW5nKSB7XHJcbiAgICAgICAgICAgICAgICB2bS5sb2FkaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHZhciBtb2JpbGVfcnVsZSA9IC9eMDlbMC05XXs4fSQvO1xyXG4gICAgICAgICAgICAgICAgaWYodm0ubW9iaWxlID09XCJcIiB8fCAhdm0ubW9iaWxlLm1hdGNoKG1vYmlsZV9ydWxlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwi6KuL6Ly45YWl5omL5qmf5q2j56K65qC85byPXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKCF2bS5hZ3JlZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwi6KuL5Yu+6YG45oiR5bey6Kmz6ZaxXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZtLnBvcHVwID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHZtLnBvcFBhZ2UgPSBcImxvdHRlcnlTdWNcIjtcclxuICAgICAgICAgICAgICAgIHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIC8vIHZtLkludm9pY2VUb2tlbigpLnRoZW4oZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIC8vICAgICB2bS5zYXZlcGhvbmUoKS50aGVuKGZ1bmN0aW9uKHJlcyl7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGlmKCFyZXMuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgYWxlcnQocmVzLnJlc3BvbnNlTWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICB2bS5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAvLyBhbGVydChyZXMucmVzcG9uc2VNZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHZtLnBvcHVwID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHZtLnBvcFBhZ2UgPSBcImxvdHRlcnlTdWNcIjtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgLy8gfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZmJMaW5rKCkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICB2bS5zZW5kRmIoKTtcclxuICAgICAgICAgICAgdmFyIGZiaHRtbF91cmw9IHZtLmZic2xpbms7IC8v57ay5Z2AXHJcbiAgICAgICAgICAgIC8vIHZhciBmYmh0bWxfdXJsPSB2bS5zaGFyZVVybDsgLy/lnJZcclxuICAgICAgICAgICAgdm0uZ2FtZVBhZ2UgPSBcImxvdHRlcnlcIjtcclxuICAgICAgICAgICAgdmFyIGlzSUU9d2luZG93LkFjdGl2ZVhPYmplY3QgfHwgXCJBY3RpdmVYT2JqZWN0XCIgaW4gd2luZG93O1xyXG4gICAgICAgICAgICBpZihpc0lFKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cub3BlbignaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL3NoYXJlci9zaGFyZXIucGhwP3U9JytmYmh0bWxfdXJsKTtyZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cub3BlbignaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL3NoYXJlci9zaGFyZXIucGhwP3U9JytmYmh0bWxfdXJsKycmaGFzaHRhZz0lMjMnKydQb3dlckJPTULkurrnlJ/kuI3mlrfpm7vppqzmi4nmnb4nKTtyZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgY29tcHV0ZWQ6IHtcclxuICAgICAgICBcclxuICAgIH0sXHJcbiAgICB3YXRjaDoge1xyXG4gICAgICAgIC8vIGdhbWVQYWdlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyAgICAgaWYodGhpcy5nYW1lUGFnZT09XCJncmFkZVwiKSB7XHJcbiAgICAgICAgLy8gICAgICAgICB0aGlzLmdldFRvcDEwMCgpO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfSxcclxuICAgIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgIC8vIGlmKG5ldyBEYXRlKCkgPiBuZXcgRGF0ZShcIjIwMTkvMTEvMjEgMDA6MDA6MDBcIikpIHtcclxuICAgICAgICAvLyAgICAgYWxlcnQoXCLmtLvli5Xlt7LntZDmnZ8g5oSf6Kyd5oKo55qE5Y+D6IiHXCIpO1xyXG4gICAgICAgIC8vICAgICB3aW5kb3cubG9jYXRpb24gPSBcIi4vaW5kZXguaHRtbFwiO1xyXG4gICAgICAgIC8vIH07XHJcbiAgICAgICAgLy8gdm0uZ2V0VG9wMTAwKCk7XHJcbiAgICAgICAgLy8gdm0ucG9wdXAgPSB0cnVlO1xyXG4gICAgICAgIC8vIHZtLnBvcFBhZ2UgPSBcImdhbWVsb2FkXCI7XHJcbiAgICAgICAgLy8gdm0ubmF2T3BlbigpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdm0uZ2V0SWUoKTtcclxuICAgICAgICB9LDEwMDApO1xyXG4gICAgICAgICQoXCIubmF2XCIpLmhpZGUoKTtcclxuICAgICAgICAkKFwiLmZvb3RlclwiKS5oaWRlKCk7XHJcbiAgICAgICAgLy8gdm0uZmJSZWdpc3RlcigpO1xyXG4gICAgICAgIC8vIHdpbmRvdy5mYkFzeW5jSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyAgICAgRkIuaW5pdCh7XHJcbiAgICAgICAgLy8gICAgICAgICBhcHBJZDogJzIxMTQ1ODA4ODg4NDI1NDknLFxyXG4gICAgICAgIC8vICAgICAgICAgc3RhdHVzOnRydWUsXHJcbiAgICAgICAgLy8gICAgICAgICBjb29raWU6IHRydWUsXHJcbiAgICAgICAgLy8gICAgICAgICB4ZmJtbDogZmFsc2UsXHJcbiAgICAgICAgLy8gICAgICAgICB2ZXJzaW9uOiAndjMuMidcclxuICAgICAgICAvLyAgICAgfSk7XHJcbiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKEZCKTtcclxuICAgICAgICAvLyAgICAgRkIuZ2V0TG9naW5TdGF0dXMoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgLy8gICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XHJcbiAgICAgICAgLy8gICAgIH0pXHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIHdpbmRvdy5mYkFzeW5jSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgRkIuaW5pdCh7XHJcbiAgICAgICAgICAgICAgICBhcHBJZDogJzIxMTQ1ODA4ODg4NDI1NDknLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOnRydWUsXHJcbiAgICAgICAgICAgICAgICBjb29raWU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB4ZmJtbDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiAndjUuMCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBpZiAoIXdpbmRvdy5sb2NhdGlvbi5ocmVmLm1hdGNoKC8obG9jYWxob3N0KXwoMTkyLjE2OC40MCl8KDE5Mi4xNjguNjApL2kpKSB7XHJcbiAgICAgICAgLy8gICAgIHdpbmRvdy5mYkFzeW5jSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyAgICAgICAgIEZCLmluaXQoe1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIGFwcElkOiAnMjExNDU4MDg4ODg0MjU0OScsXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgc3RhdHVzOnRydWUsXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgY29va2llOiB0cnVlLFxyXG4gICAgICAgIC8vICAgICAgICAgICAgIHhmYm1sOiBmYWxzZSxcclxuICAgICAgICAvLyAgICAgICAgICAgICB2ZXJzaW9uOiAndjMuMidcclxuICAgICAgICAvLyAgICAgICAgIH0pO1xyXG4gICAgICAgIC8vICAgICAgICAgRkIuZ2V0TG9naW5TdGF0dXMoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gJ2Nvbm5lY3RlZCcpIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgdm0uZmJEYXRhLmZidG9rZW4gPSByZXNwb25zZS5hdXRoUmVzcG9uc2UuYWNjZXNzVG9rZW47XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHZtLmZiRGF0YS5mYklkID0gcmVzcG9uc2UuYXV0aFJlc3BvbnNlLnVzZXJJRDtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgLy8gdm0uZmJSZWdpc3RlcigpO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAvLyB2bS5mYlJlZ2lzdGVyKCkudGhlbihmdW5jdGlvbigpe1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAvLyAgICAgdm0uZmJHZXRzdGF0dXMoKTtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgLy8gICAgIC8vIHZtLmZiR2V0c3RhdHVzKCkudGhlbihmdW5jdGlvbigpe1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAvLyAgICAgLy8gICAgIC8vIGNvbnNvbGUubG9nKHZtLmZiRGF0YS5tYl9pZCk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIC8vICAgICAvLyAgICAgLy8gaW5pdEdhbWUodm0uZmJEYXRhLm1iX2lkKTtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgLy8gICAgIC8vICAgICB2bS5nYW1lID0gbmV3IEdhbWUoe1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAvLyAgICAgLy8gICAgICAgICBtZW1iZXJEYXRhOiB2bS5mYkRhdGEubWJfaWRcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgLy8gICAgIC8vICAgICB9KTtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgLy8gICAgIC8vIH0pO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICAvLyAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZmIgbm90Y29ubmVjdGVkJylcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgLy8gRkIubG9naW4oZnVuY3Rpb24ocmVzKXtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIC8vICAgICBpZiAocmVzLnN0YXR1cyA9PT0gJ2Nvbm5lY3RlZCcpIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgLy8gICAgICAgICB2bS5mYkRhdGEuZmJ0b2tlbiA9IHJlcy5hdXRoUmVzcG9uc2UuYWNjZXNzVG9rZW47XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIC8vICAgICAgICAgdm0uZmJEYXRhLmZiSWQgPSByZXMuYXV0aFJlc3BvbnNlLnVzZXJJRDtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgLy8gICAgICAgICB2bS5mYlJlZ2lzdGVyKCk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIC8vICAgICAgICAgLy8gdm0uZmJSZWdpc3RlcigpLnRoZW4oZnVuY3Rpb24oKXtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgLy8gICAgICAgICAvLyAgICAgdm0uZmJHZXRzdGF0dXMoKTtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgLy8gICAgICAgICAvLyB9KTtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgLy8gICAgIC8vIGluaXRHYW1lKHJlcyk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIC8vIH0pXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gICAgIH07XHJcbiAgICAgICAgLy8gfSBlbHNlIHtcclxuICAgICAgICAvLyAgICAgd2luZG93LmZiQXN5bmNJbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vICAgICAgICAgRkIuaW5pdCh7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgYXBwSWQ6ICcyMTE0NTgwODg4ODQyNTQ5JyxcclxuICAgICAgICAvLyAgICAgICAgICAgICBjb29raWU6IHRydWUsXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgeGZibWw6IGZhbHNlLFxyXG4gICAgICAgIC8vICAgICAgICAgICAgIHZlcnNpb246ICd2My4yJ1xyXG4gICAgICAgIC8vICAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gICAgIH07XHJcbiAgICAgICAgLy8gICAgIHZtLmZiUmVnaXN0ZXIoKTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gaW5pdEdhbWUoXCJmMWI3MzBmZC03ZjUxLTQ1NTUtOTIzYi1hNGZhNmRlMGQ2YzZcIik7XHJcbiAgICAgICAgLy8gdm0uZ2FtZSA9IG5ldyBHYW1lKHtcclxuICAgICAgICAvLyAgICAgbWVtYmVyRGF0YTogdm0uZmJEYXRhLm1iX2lkXHJcbiAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgKGZ1bmN0aW9uIChkLCBzLCBpZCkge1xyXG4gICAgICAgICAgICB2YXIganMsIGZqcyA9IGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUocylbMF07XHJcbiAgICAgICAgICAgIGlmIChkLmdldEVsZW1lbnRCeUlkKGlkKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGpzID0gZC5jcmVhdGVFbGVtZW50KHMpO1xyXG4gICAgICAgICAgICBqcy5pZCA9IGlkO1xyXG4gICAgICAgICAgICBqcy5zcmMgPSBcImh0dHBzOi8vY29ubmVjdC5mYWNlYm9vay5uZXQvZW5fVVMvc2RrLmpzXCI7XHJcbiAgICAgICAgICAgIGZqcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShqcywgZmpzKTtcclxuICAgICAgICB9KGRvY3VtZW50LCAnc2NyaXB0JywgJ2ZhY2Vib29rLWpzc2RrJykpO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG59KVxyXG5cclxuZnVuY3Rpb24gaW5pdEdhbWUobWJfaWQpIHtcclxuICAgIC8vIGNvbnNvbGUubG9nKG1iX2lkKTtcclxuICAgIGdhbWVfdmlldy5nYW1lID0gbmV3IEdhbWUoe1xyXG4gICAgICAgIG1lbWJlckRhdGE6IG1iX2lkXHJcbiAgICB9KTtcclxufSJdfQ==
