"use strict";var production="false"===$("#appjs").data("mode"),friendo_url=$("#appjs").data("site"),device=deviceCheck();Vue.config.devtools=!production,Vue.config.debug=!production,Vue.config.silent=production;var md=new MobileDetect(window.navigator.userAgent),tag=document.createElement("script");function findGetParameter(o){var t=null,n=[];return location.search.substr(1).split("&").forEach(function(e){(n=e.split("="))[0]===o&&(t=decodeURIComponent(n[1]))}),t}function checkCookie(o){var t=null,n=[];return document.cookie.split(";").forEach(function(e){" "==e.charAt(0)&&(e=e.substring(1)),(n=e.split("="))[0]===o&&(t=n[1])}),t}function deviceCheck(){var e={},o=new MobileDetect(window.navigator.userAgent);return o.match(/android/i)?(e.os="android",e.version=o.version("android")):o.match(/(iphone|ipad|ipod);?/i)?(e.os="ios",e.version=o.version("iOS")):(e.os="pc",e.version=o.version("Chrome")),e}$(function(){console.log("v1.0"),console.log(device),$(".nav").menu()}),Vue.mixin({data:function(){return{status:"",start_date:"2100/08/09 12:09:10",error_msg:"",popuptop:"",navHeight:"",rewardShake:!0,lineHref:"",gToken:"",reCaptcha:"",popup:!1,popEvent:"",popPage:"",resultLoad:!1,loading:!1,oops:1}},computed:{openCome:function(){return!("Testing"==this.mode||start_date<=0)}},watch:{error_msg:function(e){$("body").toggleClass("_freeze")}},methods:{gaEvant:function(e){dataLayer.push({event:e}),console.log("ga:",e)},server_busy:function(){var e=this;e.error_msg="系統忙碌中，請稍後在試!",e.loading=!1,e.error_cou=6},setCookie:function(e,o,t){var n=new Date;n.setTime(n.getTime()+1e3*t);var r="expires="+n.toUTCString();document.cookie=e+"="+o+";"+r+";"},logger:function(e,o,t){if(production){_LTracker.push({level:["ERROR","DEBUG","WARNING","INFO","ALL"][e],content:JSON.stringify(o),path:window.location.href,tag:t||null,device:device,timestamp:Date.now()})}},errorDone:function(){this.error_msg=""},checkOnline:function(){navigator.onLine||alert("Internet 連線已斷開，請確認您的網路狀態。")},getToken:function(){var o=this;return $.ajax({url:"".concat(friendo_url,"auth/login?projectId=73"),headers:{WebToken:"Vn2lAsVSmwjXJn8UqZZ-Ag=="},method:"GET",dataType:"json"}).done(function(e){o.gToken=e.token})},getstatus:function(){return $.ajax({url:"".concat(friendo_url,"MineShine/getstatus"),headers:{Authorization:"Bearer "+this.gToken},method:"GET",done:function(e){}})},scrollTo:function(e){var o=this;o.room=null,o.allPopupClose(),$("html,body").animate({scrollTop:$(e).offset().top-o.navHeight},500)},popupOpen:function(){var e=this;e.popuptop&&0!==e.popuptop||(e.popuptop=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop)),$("body").addClass("_freeze")},eventOpen:function(){this.popup=!0,this.popEvent="event",$("body").addClass("_freeze")},popupClose:function(){var e=this;$("body").removeClass("_freeze"),e.popEvent="",e.popPage="",e.popup=!1,e.face=!1,e.resultLoad=!1},afterEnter:function(){this.popupOpen()},grecaptcha:function(o){function e(e){return o.apply(this,arguments)}return e.toString=function(){return o.toString()},e}(function(t){var n=this;return new Promise(function(o,e){grecaptcha.execute("6LeGFsQUAAAAAKbckoPXNx-db-ZoTjVBOBnRuFq9",{action:t}).then(function(e){n.reCaptcha=e,o()},function(){alert("Google驗證失敗，請再次嘗試\n如無法排除此問題，建議重新整理此頁面"),e()})})}),getIe:function(){var o,e;function t(e){return 0<=o.indexOf(e)}"ie"==(o=window.navigator.userAgent,e="ActiveXObject"in window,t("MSIE")||e?"ie":t("Firefox")&&!e?"Firefox":t("Chrome")&&!e?"Chrome":t("Opera")&&!e?"Opera":t("Safari")&&!e?"Safari":void 0)&&alert("目前瀏覽器為舊版 IE，建議使用Chrome瀏覽器，獲得最佳遊戲體驗！")}},components:{comingsoon:comingsoon},mounted:function(){}}),Vue.component("comingsoon",{template:"#comingsoon",props:["StartDate","mode"],data:function(){return{comingsoon:!1,comPage:"",start_date:"",mode_status:"",date:{total:0,days:0,hours:0,minutes:0,seconds:0}}},mounted:function(){function i(e,o){return(e=""+e).length>=o?e:i("0"+e,o)}var a=this;a.getToken().then(function(){a.getstatus().then(function(e){})});setInterval(function(){var e=Date.parse(new Date(a.StartDate))-Date.parse(new Date),o=Math.floor(e/1e3%60),t=Math.floor(e/1e3/60%60),n=Math.floor(e/36e5%24),r=Math.floor(e/864e5);a.date={total:e,days:i(r,2),hours:i(n,2),minutes:i(t,2),seconds:i(o,2)}},1e3)}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJwcm9kdWN0aW9uIiwiJCIsImRhdGEiLCJkZXZpY2UiLCJkZXZpY2VDaGVjayIsIlZ1ZSIsImNvbmZpZyIsImRlYnVnIiwic2lsZW50IiwibWQiLCJNb2JpbGVEZXRlY3QiLCJ3aW5kb3ciLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJjb25zb2xlIiwibG9nIiwidG1wIiwicGFyYW1ldGVyTmFtZSIsInJlc3VsdCIsIml0ZW0iLCJsb2NhdGlvbiIsInNlYXJjaCIsInN1YnN0ciIsImNoZWNrQ29va2llIiwic3BsaXQiLCJkb2N1bWVudCIsImNvb2tpZSIsImZvckVhY2giLCJjaGFyQXQiLCJzdWJzdHJpbmciLCJzdGFydF9kYXRlIiwidmVyc2lvbiIsIm9zIiwibWF0Y2giLCJmaW5kR2V0UGFyYW1ldGVyIiwibWVudSIsIm1peGluIiwicG9wdXB0b3AiLCJuYXZIZWlnaHQiLCJyZXdhcmRTaGFrZSIsImxpbmVIcmVmIiwiZXJyb3JfbXNnIiwicG9wRXZlbnQiLCJwb3BQYWdlIiwicmVzdWx0TG9hZCIsImxvYWRpbmciLCJyZUNhcHRjaGEiLCJwb3B1cCIsIm1vZGUiLCJvb3BzIiwib3BlbkNvbWUiLCJ0b2dnbGVDbGFzcyIsInRoaXMiLCJnYUV2YW50IiwiZGF0YUxheWVyIiwicHVzaCIsInZhbCIsImd0bURhdGEiLCJtZXRob2RzIiwic2VydmVyX2J1c3kiLCJldmVudCIsInZtIiwic2V0Q29va2llIiwic2V0VGltZSIsImVycm9yX2NvdSIsImNuYW1lIiwiY3ZhbHVlIiwidGltZSIsImQiLCJEYXRlIiwiZ2V0VGltZSIsInRhZyIsImNvbnRlbnQiLCJ0b1VUQ1N0cmluZyIsImV4cGlyZXMiLCJsb2dnZXIiLCJsZXZlbCIsIl9MVHJhY2tlciIsInN0cmluZ2lmeSIsIkpTT04iLCJwYXRoIiwibm93IiwiaHJlZiIsInRpbWVzdGFtcCIsImNoZWNrT25saW5lIiwib25MaW5lIiwiYWxlcnQiLCJ1cmwiLCJoZWFkZXJzIiwiYWpheCIsImNvbmNhdCIsImZyaWVuZG9fdXJsIiwiV2ViVG9rZW4iLCJnVG9rZW4iLCJ0b2tlbiIsImRhdGFUeXBlIiwiZG9uZSIsInJlcyIsIkF1dGhvcml6YXRpb24iLCJtZXRob2QiLCJzY3JvbGxUb3AiLCJvZmZzZXQiLCJyb29tIiwicG9wdXBPcGVuIiwiYWxsUG9wdXBDbG9zZSIsImFuaW1hdGUiLCJlIiwidG9wIiwiYWRkQ2xhc3MiLCJNYXRoIiwibWF4IiwicGFnZVlPZmZzZXQiLCJkb2N1bWVudEVsZW1lbnQiLCJib2R5IiwiZXZlbnRPcGVuIiwicG9wdXBDbG9zZSIsInJlbW92ZUNsYXNzIiwiZmFjZSIsImFmdGVyRW50ZXIiLCJncmVjYXB0Y2hhIiwiX2dyZWNhcHRjaGEiLCJfeCIsImFwcGx5IiwiYXJndW1lbnRzIiwidG9TdHJpbmciLCJwYWdlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJleGVjdXRlIiwiYWN0aW9uIiwidGhlbiIsImV4cGxvcmVyIiwiaWUxMSIsImNvbXBhcmUiLCJzIiwiaW5kZXhPZiIsImNvbXBvbmVudHMiLCJjb21pbmdzb29uIiwibW91bnRlZCIsImNvbXBvbmVudCIsInRlbXBsYXRlIiwicHJvcHMiLCJnZXRFeHBsb3JlciIsImNvbVBhZ2UiLCJtb2RlX3N0YXR1cyIsImRhdGUiLCJkYXlzIiwiaG91cnMiLCJtaW51dGVzIiwic2Vjb25kcyIsInBhZExlZnQiLCJzdHIiLCJsZW4iLCJsZW5ndGgiLCJnZXRUb2tlbiIsImdldHN0YXR1cyIsInNldEludGVydmFsIiwidCIsInBhcnNlIiwiU3RhcnREYXRlIiwiZmxvb3IiLCJ0b3RhbCJdLCJtYXBwaW5ncyI6ImFBQUEsSUFDSUEsV0FBMEMsVUFBN0JDLEVBQUUsVUFBVUMsS0FBSyxRQUE5QkYsWUFBY0MsRUFBQyxVQUFVQyxLQUFLLFFBRzVCQyxPQUFTQyxjQUdmQyxJQUFJQyxPQUFPQyxVQUFTUCxXQUNwQkssSUFBSUMsT0FBT0UsT0FBU1IsV0FFcEJLLElBQUlJLE9BQUtELE9BQUlFLFdBSWJULElBQUVRLEdBQUEsSUFBQUMsYUFBWUMsT0FBQUMsVUFBQUMsV0FFVkMsSUFBUUMsU0FBSVosY0FBWixVQWFRLFNBQUlhLGlCQUFXQyxHQUx2QixJQUFBQyxFQUFBLEtBUUFGLEVBQU9FLEdBVUtDLE9BVGZDLFNBQUFDLE9BUlFDLE9BQU8sR0FVUEMsTUFBQUEsS0FDREwsUUFBUyxTQUFiQyxJQUNVSCxFQURWRyxFQUFBSyxNQUFBLE1BRWFDLEtBQVNDLElBQ1RSLEVBQ1JTLG1CQUF3QlgsRUFBQSxPQUViRSxFQUVSRixTQUFHTyxZQUFjTixHQUNqQixJQUFJRCxFQUFBLEtBTlpBLEVBQUEsR0FjQSxPQUxBUyxTQUFBQyxPQUNIRixNQUFBLEtBVFFHLFFBQVEsU0FBVVIsR0FVSixLQUFkZixFQUFUd0IsT0FBdUIsS0FDTlQsRUFBYkEsRUFBQVUsVUFBQSxLQVBRYixFQUFNRyxFQUFLSyxNQUFNLE1BU1osS0FBYlAsSUFDZ0JDLEVBQVpGLEVBQUEsTUFFR0UsRUFFSGYsU0FBQUEsY0FGRyxJQUFBQSxFQUdBLEdBQ0hBLEVBQUEsSUFBWU8sYUFBWkMsT0FBQUMsVUFBQUMsV0FTSWlCLE9BUkozQixFQUFPNEIsTUFBQUEsYUFDVjVCLEVBQUE2QixHQUFBLFVBUEc3QixFQUFPNEIsUUFBVXRCLEVBQUdzQixRQUFRLFlBUWhDdEIsRUFBQXdCLE1BQUEsMEJBQ0g5QixFQUFBNkIsR0FBQSxNQU5PN0IsRUFBTzRCLFFBQVV0QixFQUFHc0IsUUFBUSxTQVExQjVCLEVBQUE2QixHQUFBLEtBQ0Y3QixFQUFPNEIsUUFBQXRCLEVBQUFzQixRQUFBLFdBRUhELEVBbkRYN0IsRUFKRCxXQUNJYSxRQUFRQyxJQUFJLFFBTWhCRCxRQUFTb0IsSUFBQUEsUUFDTGpDLEVBQUlpQixRQUFNaUIsU0FpREY5QixJQUFBK0IsTUFBQSxDQUNBQyxLQUFBQSxXQUNBQyxNQUFTLENBQ1RDLE9BQWEsR0FDYkMsV0FSRyxzQkFTR0MsVUFUSCxHQVdFSixTQVhGLEdBWUhLLFVBWkcsR0FhSEMsYUFiRyxFQWNIQyxTQUFZLEdBQ1pDLE9BZkcsR0FnQkdDLFVBQUEsR0FoQlZDLE9BQUEsRUFGRUwsU0FBQSxHQXFCSUMsUUFBQSxHQUNFQyxZQUFFLEVBQ05DLFNBQWNHLEVBQ2pCQyxLQUFBLElBR0RSLFNBQVMsQ0FDSFMsU0FBUUMsV0FDYixRQUFBLFdBQUFDLEtBQUFKLE1BQUFsQixZQUFBLEtBR0R1QixNQUFPLENBQ0hDLFVBQVVDLFNBQUtDLEdBQUN2RCxFQUFBLFFBQVN3RCxZQUFBQSxhQUU1QkMsUUFKSSxDQUtMQyxRQUFhLFNBQUFGLEdBQ0hILFVBQU5DLEtBQUEsQ0FBQUssTUFBQUgsSUFDR2hCLFFBQUgxQixJQUFlLE1BQUEwQyxJQUViRSxZQUFhLFdBVGQsSUFBQUUsRUFBQVQsS0FXTFUsRUFBV3JCLFVBQUEsZUFDRm9CLEVBQUdoQixTQUFSLEVBQ0VrQixFQUFGQyxVQUFVLEdBRVZ2QyxVQUFTQyxTQUFjdUMsRUFBTEMsRUFBQUMsR0FmakIsSUFBQUMsRUFBQSxJQUFBQyxLQWlCR0QsRUFBQUwsUUFBQUssRUFBQUUsVUFBMEJDLElBQVRDLEdBQ2pCeEUsSUFBQUEsRUFBWSxXQUFBb0UsRUFBQUssY0FDWmhELFNBQUFDLE9BQUF1QyxFQUFBLElBQUFDLEVBQUEsSUFBQVEsRUFBQSxLQUZSQyxPQUFRLFNBQVVDLEVBQU9KLEVBQVNELEdBSTFCTSxHQUFBQSxXQUFlLENBR1hBLFVBQWV6RCxLQUFBQSxDQUNMd0QsTUFGTUUsQ0FBQUEsUUFBTCxRQUZBLFVBQUEsT0FBQSxPQUFBRixHQUtEekUsUUFMQzRFLEtBQUFELFVBQUFOLEdBTVhRLEtBQWtCQyxPQUFMN0QsU0FBQThELEtBTmpCWCxJQUFBQSxHQUFBLEtBUUhwRSxPQUFBQSxPQTdCQWdGLFVBQUFkLEtBQUFZLFVBa0NMRyxVQUFhLFdBQ0p4RSxLQUFBQSxVQUFrQixJQUd0QndFLFlBQUEsV0F0Q0F4RSxVQUFBeUUsUUF3Q0tDLE1BQUEsOEJBSUZDLFNBQUcsV0FDSEMsSUFBTzNCLEVBQUVULEtBQ0wsT0FBQW5ELEVBQUF3RixLQUFZLENBRVJGLElBQUEsR0FBQUcsT0FORUMsWUFNRiwyQkFDQUgsUUFBRSxDQUNOSSxTQUFhLDRCQUVkQyxPQUFhQyxNQVZwQkMsU0FBQSxTQTFDQ0MsS0FBQSxTQUFBQyxHQXdEUXBDLEVBQVRnQyxPQUFBSSxFQUFBSCxTQUdJTixVQUFTLFdBRkMsT0FBQXZGLEVBQUF3RixLQUFBLENBS0ZGLElBQUEsR0FBQUcsT0FMRUMsWUFLRix1QkFDRkgsUUFBQSxDQUVGVSxjQUFBLFVBTEE5QyxLQUtBeUMsUUFFSE0sT0FBQSxNQVZMSCxLQUFBLFNBQUFDLFFBa0JJRyxTQUFTLFNBQU9DLEdBRHBCLElBQUF4QyxFQUFBVCxLQTFFQ1MsRUFBQXlDLEtBQUEsS0E4RUxDLEVBQVdDLGdCQUNEdkcsRUFBQSxhQUFOd0csUUFBQSxDQUpJTCxVQUFXbkcsRUFBRXlHLEdBQUdMLFNBQVNNLElBQU05QyxFQUFHdkIsV0FLOUJELE1BRVBrRSxVQUFBLFdBSEQsSUFBSTFDLEVBQUtULEtBSUN3RCxFQUFBQSxVQUFWLElBQW1CL0MsRUFBbkJ4QixXQW5GQ3dCLEVBQUF4QixTQUFBd0UsS0FBQUMsSUFBQW5HLE9BQUFvRyxZQUFBdEYsU0FBQXVGLGdCQUFBWixVQUFBM0UsU0FBQXdGLEtBQUFiLFlBc0ZLbkcsRUFBQSxRQUFOMkcsU0FBQSxZQUVFTSxVQUFGLFdBQ1VOLEtBekZUN0QsT0FBQSxFQXlGUzZELEtBRUpsRSxTQUFFLFFBQ0Z6QyxFQUFBLFFBQU4yRyxTQUFBLFlBRUVPLFdBQVksV0FDWHhFLElBQUhrQixFQUFBVCxLQUNHTCxFQUFILFFBQUFxRSxZQUFBLFdBQ0dDLEVBQUgzRSxTQUFBLEdBQ0dFLEVBQUFBLFFBQWEsR0FFaEJpQixFQUFBZCxPQUFBLEVBcEdDYyxFQUFBd0QsTUFBQSxFQXNHTEMsRUFBVTFFLFlBQUUsR0FJWjJFLFdBQVUsV0FBQW5FLEtBQUFtRCxhQUFWZ0IsV0FBVSxTQUFBQyxHQUFBLFNBQUFELEVBQUFFLEdBQUEsT0FBQUQsRUFBQUUsTUFBQXRFLEtBQUF1RSxXQUFBLE9BQUFKLEVBQUFLLFNBQUEsV0FBQSxPQUFBSixFQUFBSSxZQUFBTCxFQUFBLENBQUUsU0FBU00sR0FBWCxJQUFBaEUsRUFBQVQsS0FBQSxPQUFBLElBQUEwRSxRQUFBLFNBQUFDLEVBQUFDLEdBSUZULFdBQVdVLFFBQVEsMkNBQTRDLENBQUVDLE9BQVFMLElBQVFNLEtBQUssU0FBVXJDLEdBSjlGakMsRUFBQWYsVUFBQWdELEVBQUVpQyxLQUNSLFdBT1F6QyxNQUFNLHdDQUxId0MsVUFFSGpFLE1BQUdmLFdBQ0hpRixJQUNESyxFQUVPQyxFQURBLFNBQUFDLEVBQUFDLEdBQUEsT0FBTixHQUFNSCxFQUFOSSxRQUFBRCxHQVFxQ0MsT0FUdENKLEVBQVl6SCxPQUFBQyxVQUFBQyxVQUVMd0gsRUFBQSxrQkFBQTFILE9BTFYySCxFQUFBLFNBQUFELEVBQUEsS0FESkMsRUFBQSxhQUFBRCxFQUFBLFVBN0dDQyxFQUFBLFlBQUFELEVBQUEsU0F1SEVDLEVBQVcsV0FBQUQsRUFBQSxRQUNLQyxFQUFBLFlBQVdELEVBQUEsY0FBZixJQUNYL0MsTUFBQSx5Q0FlWm1ELFdBQVksQ0FaQUMsV0FBWUEsWUFBaUNDLFFBQTdDLGVBSXVDdEksSUFBQXVJLFVBQUEsYUFBQSxDQUFrQkMsU0FBQSxjQUM1REMsTUFURCxDQUFBLFlBQUEsUUE2QlI1SSxLQUFNLFdBbEJFLE1BQUk2SSxDQUNBekQsWUFBTSxFQUNUMEQsUUFBQSxHQUNKbEgsV0FBQSxHQXJLQ21ILFlBQUEsR0F1S0lDLEtBQUUsQ0FDSVIsTUFBQUEsRUF4S1ZTLEtBQUEsRUEwS0dDLE1BQUEsRUFDSUMsUUFBVCxFQUVIQyxRQUFBLEtBTURSLFFBQVEsV0FDRixTQUFBUyxFQUFZQyxFQUFBQyxHQUVWZixPQURHYyxFQUFBLEdBQUFBLEdBQ1NFLFFBRFRELEVBQUFELEVBQUFELEVBQUEsSUFBQUMsRUFBQUMsR0FETCxJQVFVNUYsRUFGRlQsS0FBQVMsRUFBQThGLFdBQUF4QixLQUFBLFdBTFZ0RSxFQUFBK0YsWUFBQXpCLEtBQUEsU0FBQWxDLFFBZ0JJNEQsWUFBQSxXQWlCQSxJQUFJQyxFQUFJekYsS0FBSzBGLE1BQU0sSUFBSTFGLEtBQUtSLEVBQUdtRyxZQUFjM0YsS0FBSzBGLE1BQU0sSUFBSTFGLE1BaEJwRHFGLEVBQVVELEtBQUtRLE1BQUFILEVBQUEsSUFBQSxJQUNaTixFQUFQM0MsS0FBQW9ELE1BQUFILEVBQUEsSUFBQSxHQUFBLElBQ0dWLEVBQUF2QyxLQUFBb0QsTUFBQUgsRUFBQSxLQUFBLElBQ0lQLEVBQVExQyxLQUFBb0QsTUFBV1IsRUFBQUEsT0FDN0I1RixFQUFBcUYsS0FBQSxDQU5MZ0IsTUFBQUosRUF5QlFYLEtBQVFJLEVBQVFKLEVBQU0sR0FqQnJCQyxNQUNURyxFQUFBSCxFQUFBLEdBQ0FDLFFBQUFFLEVBQUFGLEVBQUEsR0FDQUMsUUFBQUMsRUFBQUQsRUFBQSxLQVFRQSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdFxyXG4gICAgcHJvZHVjdGlvbiA9ICQoXCIjYXBwanNcIikuZGF0YShcIm1vZGVcIikgPT09IFwiZmFsc2VcIixcclxuICAgIGZyaWVuZG9fdXJsID0gJChcIiNhcHBqc1wiKS5kYXRhKFwic2l0ZVwiKTtcclxuXHJcbmNvbnN0IGRldmljZSA9IGRldmljZUNoZWNrKCk7XHJcblxyXG5WdWUuY29uZmlnLmRldnRvb2xzID0gIXByb2R1Y3Rpb247XHJcblZ1ZS5jb25maWcuZGVidWcgPSAhcHJvZHVjdGlvbjtcclxuVnVlLmNvbmZpZy5zaWxlbnQgPSBwcm9kdWN0aW9uO1xyXG5cclxudmFyIG1kID0gbmV3IE1vYmlsZURldGVjdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcblxyXG52YXIgdGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnNvbGUubG9nKFwidjEuMFwiKTtcclxuICAgIGNvbnNvbGUubG9nKGRldmljZSk7XHJcbiAgICAkKFwiLm5hdlwiKS5tZW51KCk7XHJcbn0pOyBcclxuXHJcblxyXG5mdW5jdGlvbiBmaW5kR2V0UGFyYW1ldGVyKHBhcmFtZXRlck5hbWUpIHtcclxuICAgIHZhciByZXN1bHQgPSBudWxsLFxyXG4gICAgICAgIHRtcCA9IFtdO1xyXG4gICAgbG9jYXRpb24uc2VhcmNoXHJcbiAgICAgICAgLnN1YnN0cigxKVxyXG4gICAgICAgIC5zcGxpdChcIiZcIilcclxuICAgICAgICAuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICB0bXAgPSBpdGVtLnNwbGl0KFwiPVwiKTtcclxuICAgICAgICAgICAgaWYgKHRtcFswXSA9PT0gcGFyYW1ldGVyTmFtZSlcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGRlY29kZVVSSUNvbXBvbmVudCh0bXBbMV0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZnVuY3Rpb24gY2hlY2tDb29raWUocGFyYW1ldGVyTmFtZSkge1xyXG4gICAgdmFyIHJlc3VsdCA9IG51bGwsXHJcbiAgICAgICAgdG1wID0gW107XHJcbiAgICB2YXIgY29va2llID0gZG9jdW1lbnQuY29va2llO1xyXG4gICAgY29va2llLnNwbGl0KFwiO1wiKVxyXG4gICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtLmNoYXJBdCgwKSA9PSBcIiBcIikge1xyXG4gICAgICAgICAgICAgICAgaXRlbSA9IGl0ZW0uc3Vic3RyaW5nKDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRtcCA9IGl0ZW0uc3BsaXQoXCI9XCIpO1xyXG4gICAgICAgICAgICBpZiAodG1wWzBdID09PSBwYXJhbWV0ZXJOYW1lKVxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdG1wWzFdO1xyXG4gICAgICAgIH0pXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmZ1bmN0aW9uIGRldmljZUNoZWNrKCkge1xyXG4gICAgdmFyIGRldmljZSA9IHt9O1xyXG4gICAgdmFyIG1kID0gbmV3IE1vYmlsZURldGVjdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcbiAgICBpZiAobWQubWF0Y2goL2FuZHJvaWQvaSkpIHtcclxuICAgICAgICBkZXZpY2Uub3MgPSBcImFuZHJvaWRcIjtcclxuICAgICAgICBkZXZpY2UudmVyc2lvbiA9IG1kLnZlcnNpb24oXCJhbmRyb2lkXCIpO1xyXG4gICAgfSBlbHNlIGlmIChtZC5tYXRjaCgvKGlwaG9uZXxpcGFkfGlwb2QpOz8vaSkpIHtcclxuICAgICAgICBkZXZpY2Uub3MgPSBcImlvc1wiO1xyXG4gICAgICAgIGRldmljZS52ZXJzaW9uID0gbWQudmVyc2lvbihcImlPU1wiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZGV2aWNlLm9zID0gXCJwY1wiO1xyXG4gICAgICAgIGRldmljZS52ZXJzaW9uID0gbWQudmVyc2lvbihcIkNocm9tZVwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBkZXZpY2U7XHJcbn1cclxuVnVlLm1peGluKHtcclxuICAgIGRhdGE6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzdGF0dXM6IFwiXCIsXHJcbiAgICAgICAgICAgIHN0YXJ0X2RhdGU6IFwiMjEwMC8wOC8wOSAxMjowOToxMFwiLFxyXG4gICAgICAgICAgICBlcnJvcl9tc2c6IFwiXCIsXHJcbiAgICAgICAgICAgIC8vIG1vZGU6IHByb2R1Y3Rpb24gPyBcIlN0YXJ0ZWRcIiA6IFwiVGVzdGluZ1wiLFxyXG4gICAgICAgICAgICBwb3B1cHRvcDogXCJcIixcclxuICAgICAgICAgICAgbmF2SGVpZ2h0OiBcIlwiLFxyXG4gICAgICAgICAgICByZXdhcmRTaGFrZTogdHJ1ZSxcclxuICAgICAgICAgICAgbGluZUhyZWY6ICcnLFxyXG4gICAgICAgICAgICBnVG9rZW46IFwiXCIsXHJcbiAgICAgICAgICAgIHJlQ2FwdGNoYTogXCJcIixcclxuICAgICAgICAgICAgcG9wdXA6IGZhbHNlLFxyXG4gICAgICAgICAgICBwb3BFdmVudDogXCJcIixcclxuICAgICAgICAgICAgcG9wUGFnZTogXCJcIixcclxuICAgICAgICAgICAgcmVzdWx0TG9hZDogZmFsc2UsXHJcbiAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICBvb3BzOiAxXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGNvbXB1dGVkOiB7XHJcbiAgICAgICAgb3BlbkNvbWU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICEodGhpcy5tb2RlID09IFwiVGVzdGluZ1wiIHx8IHN0YXJ0X2RhdGUgPD0gMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHdhdGNoOiB7XHJcbiAgICAgICAgZXJyb3JfbXNnOiBmdW5jdGlvbiAodmFsKSB7XHJcbiAgICAgICAgICAgICQoJ2JvZHknKS50b2dnbGVDbGFzcygnX2ZyZWV6ZScpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBtZXRob2RzOiB7XHJcbiAgICAgICAgZ2FFdmFudDogZnVuY3Rpb24gKGd0bURhdGEpIHtcclxuICAgICAgICAgICAgZGF0YUxheWVyLnB1c2goeydldmVudCc6IGd0bURhdGF9KTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJnYTpcIiwgZ3RtRGF0YSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXJ2ZXJfYnVzeTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICB2bS5lcnJvcl9tc2cgPSBcIuezu+e1seW/meeijOS4re+8jOiri+eojeW+jOWcqOippiFcIjtcclxuICAgICAgICAgICAgdm0ubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB2bS5lcnJvcl9jb3UgPSA2O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0Q29va2llOiBmdW5jdGlvbiAoY25hbWUsIGN2YWx1ZSwgdGltZSkge1xyXG4gICAgICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIGQuc2V0VGltZShkLmdldFRpbWUoKSArICh0aW1lICogMTAwMCkpO1xyXG4gICAgICAgICAgICB2YXIgZXhwaXJlcyA9IFwiZXhwaXJlcz1cIiArIGQudG9VVENTdHJpbmcoKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gY25hbWUgKyBcIj1cIiArIGN2YWx1ZSArIFwiO1wiICsgZXhwaXJlcyArIFwiO1wiO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbG9nZ2VyOiBmdW5jdGlvbiAobGV2ZWwsIGNvbnRlbnQsIHRhZykge1xyXG4gICAgICAgICAgICBpZiAocHJvZHVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgLy8gbGV2ZWwgOiBbJ0VSUk9SJyA9PiAwLCBERUJVRycgPT4gMSwgJ1dBUk5JTkcnID0+IDIsICdJTkZPJyA9PiAzLCAnQUxMJyA9PiA0XVxyXG4gICAgICAgICAgICAgICAgdmFyIGxldmVsX2luZm8gPSBbJ0VSUk9SJywgJ0RFQlVHJywgJ1dBUk5JTkcnLCAnSU5GTycsICdBTEwnXTtcclxuICAgICAgICAgICAgICAgIF9MVHJhY2tlci5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAnbGV2ZWwnOiBsZXZlbF9pbmZvW2xldmVsXSxcclxuICAgICAgICAgICAgICAgICAgICAnY29udGVudCc6IEpTT04uc3RyaW5naWZ5KGNvbnRlbnQpLFxyXG4gICAgICAgICAgICAgICAgICAgICdwYXRoJzogd2luZG93LmxvY2F0aW9uLmhyZWYsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3RhZyc6IHRhZyB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICdkZXZpY2UnOiBkZXZpY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3RpbWVzdGFtcCc6IERhdGUubm93KClcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlcnJvckRvbmU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5lcnJvcl9tc2cgPSBcIlwiO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2hlY2tPbmxpbmU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCFuYXZpZ2F0b3Iub25MaW5lKSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydChcIkludGVybmV0IOmAo+e3muW3suaWt+mWi++8jOiri+eiuuiqjeaCqOeahOe2sui3r+eLgOaFi+OAglwiKTtcclxuICAgICAgICAgICAgICAgIC8vIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0VG9rZW46IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gJC5hamF4KHtcclxuICAgICAgICAgICAgICAgIC8vIHVybDogXCJodHRwczovL2NhcnJlZm91cjIwMTljbnkuYXp1cmV3ZWJzaXRlcy5uZXQvYXBpL2F1dGgvbG9naW4/cHJvamVjdElkPTYxXCIsXHJcbiAgICAgICAgICAgICAgICB1cmw6IGAke2ZyaWVuZG9fdXJsfWF1dGgvbG9naW4/cHJvamVjdElkPTczYCxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBcIldlYlRva2VuXCI6IFwiVm4ybEFzVlNtd2pYSm44VXFaWi1BZz09XCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCJcclxuICAgICAgICAgICAgfSkuZG9uZShmdW5jdGlvbihyZXMpe1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJ0b2tlblwiLHJlcyk7XHJcbiAgICAgICAgICAgICAgICB2bS5nVG9rZW4gPSByZXMudG9rZW47XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0c3RhdHVzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiBgJHtmcmllbmRvX3VybH1NaW5lU2hpbmUvZ2V0c3RhdHVzYCxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogXCJCZWFyZXIgXCIrIHZtLmdUb2tlbixcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgICAgICBkb25lOiBmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJnZXRzdGF0dXNcIixyZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZtLnN0YXJ0X2RhdGUgPSByZXMuZGF0YS5TdGFydERhdGVUaW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZtLm1vZGUgPSByZXMuZGF0YS5nYW1lX3N0YXR1cztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNjcm9sbFRvOiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICB2bS5yb29tID0gbnVsbDtcclxuICAgICAgICAgICAgdm0uYWxsUG9wdXBDbG9zZSgpO1xyXG4gICAgICAgICAgICAkKFwiaHRtbCxib2R5XCIpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiAkKGUpLm9mZnNldCgpLnRvcCAtIHZtLm5hdkhlaWdodFxyXG4gICAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcG9wdXBPcGVuOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgIGlmICghdm0ucG9wdXB0b3AgfHwgdm0ucG9wdXB0b3AgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHZtLnBvcHVwdG9wID0gTWF0aC5tYXgod2luZG93LnBhZ2VZT2Zmc2V0LCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wLCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdfZnJlZXplJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBldmVudE9wZW46IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICB2bS5wb3B1cCA9IHRydWU7XHJcbiAgICAgICAgICAgIHZtLnBvcEV2ZW50ID0gXCJldmVudFwiO1xyXG4gICAgICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ19mcmVlemUnKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHBvcHVwQ2xvc2U6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAgICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCdfZnJlZXplJyk7XHJcbiAgICAgICAgICAgIHZtLnBvcEV2ZW50ID0gXCJcIjtcclxuICAgICAgICAgICAgdm0ucG9wUGFnZSA9IFwiXCI7XHJcbiAgICAgICAgICAgIHZtLnBvcHVwID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZtLmZhY2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgdm0ucmVzdWx0TG9hZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAvLyAkKCdodG1sLCBib2R5Jykuc2Nyb2xsVG9wKHZtLnBvcHVwdG9wKTtcclxuICAgICAgICAgICAgLy8gdm0ucG9wdXB0b3AgPSAwO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWZ0ZXJFbnRlcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICB2bS5wb3B1cE9wZW4oKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdyZWNhcHRjaGE6IGZ1bmN0aW9uKHBhZ2UpIHtcclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2luJylcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgIGdyZWNhcHRjaGEuZXhlY3V0ZSgnNkxlR0ZzUVVBQUFBQUtiY2tvUFhOeC1kYi1ab1RqVkJPQm5SdUZxOScsIHsgYWN0aW9uOiBwYWdlIH0pLnRoZW4oZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0ucmVDYXB0Y2hhID0gdG9rZW47XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpXHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdHb29nbGXpqZforYnlpLHmlZfvvIzoq4vlho3mrKHlmJfoqaZcXG7lpoLnhKHms5XmjpLpmaTmraTllY/poYzvvIzlu7rorbDph43mlrDmlbTnkIbmraTpoIHpnaInKTtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0SWU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgZ2V0RXhwbG9yZXIgPSAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXhwbG9yZXIgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCxcclxuICAgICAgICAgICAgICAgIGNvbXBhcmUgPSBmdW5jdGlvbihzKSB7IHJldHVybiAoZXhwbG9yZXIuaW5kZXhPZihzKSA+PSAwKTsgfSxcclxuICAgICAgICAgICAgICAgIGllMTEgPSAoZnVuY3Rpb24oKSB7IHJldHVybiAoXCJBY3RpdmVYT2JqZWN0XCIgaW4gd2luZG93KSB9KSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbXBhcmUoXCJNU0lFXCIpIHx8IGllMTEpIHsgcmV0dXJuICdpZSc7IH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbXBhcmUoXCJGaXJlZm94XCIpICYmICFpZTExKSB7IHJldHVybiAnRmlyZWZveCc7IH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbXBhcmUoXCJDaHJvbWVcIikgJiYgIWllMTEpIHsgcmV0dXJuICdDaHJvbWUnOyB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjb21wYXJlKFwiT3BlcmFcIikgJiYgIWllMTEpIHsgcmV0dXJuICdPcGVyYSc7IH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbXBhcmUoXCJTYWZhcmlcIikgJiYgIWllMTEpIHsgcmV0dXJuICdTYWZhcmknOyB9XHJcbiAgICAgICAgICAgIH0pKClcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChnZXRFeHBsb3JlciA9PSAnaWUnKSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydCgn55uu5YmN54CP6Ka95Zmo54K66IiK54mIIElF77yM5bu66K2w5L2/55SoQ2hyb21l54CP6Ka95Zmo77yM542y5b6X5pyA5L2z6YGK5oiy6auU6amX77yBJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuICAgIGNvbXBvbmVudHM6IHtcclxuICAgICAgICBjb21pbmdzb29uOiBjb21pbmdzb29uXHJcbiAgICB9LFxyXG4gICAgbW91bnRlZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICBcclxuICAgIH1cclxufSlcclxuXHJcblxyXG5WdWUuY29tcG9uZW50KCdjb21pbmdzb29uJywge1xyXG4gICAgdGVtcGxhdGU6IFwiI2NvbWluZ3Nvb25cIixcclxuICAgIHByb3BzOiBbJ1N0YXJ0RGF0ZScsICdtb2RlJ10sXHJcbiAgICBkYXRhOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY29taW5nc29vbjogZmFsc2UsXHJcbiAgICAgICAgICAgIGNvbVBhZ2U6IFwiXCIsXHJcbiAgICAgICAgICAgIHN0YXJ0X2RhdGU6IFwiXCIsXHJcbiAgICAgICAgICAgIG1vZGVfc3RhdHVzOiBcIlwiLFxyXG4gICAgICAgICAgICBkYXRlOiB7XHJcbiAgICAgICAgICAgICAgICB0b3RhbDogMCxcclxuICAgICAgICAgICAgICAgIGRheXM6IDAsXHJcbiAgICAgICAgICAgICAgICBob3VyczogMCxcclxuICAgICAgICAgICAgICAgIG1pbnV0ZXM6IDAsXHJcbiAgICAgICAgICAgICAgICBzZWNvbmRzOiAwXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ICAgXHJcbiAgICB9LFxyXG4gICAgbW91bnRlZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBwYWRMZWZ0ID0gZnVuY3Rpb24gKHN0ciwgbGVuKSB7XHJcbiAgICAgICAgICAgIHN0ciA9ICcnICsgc3RyO1xyXG4gICAgICAgICAgICBpZiAoc3RyLmxlbmd0aCA+PSBsZW4pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdHI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFkTGVmdChcIjBcIiArIHN0ciwgbGVuKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAvLyB2bS5zdGF0ZV9jaGVjaygpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgIC8vICAgICB2YXIgZGF0YSA9IHJlcy5EYXRhO1xyXG4gICAgICAgIC8vICAgICB2bS5zdGFydF9kYXRlID0gZGF0YS5TdGFydERhdGVUaW1lO1xyXG4gICAgICAgIHZtLmdldFRva2VuKCkudGhlbihmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB2bS5nZXRzdGF0dXMoKS50aGVuKGZ1bmN0aW9uKHJlcyl7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcInN0YXR1czpcIixyZXMpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIHZhciB0aW1laW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB0ID0gRGF0ZS5wYXJzZShuZXcgRGF0ZSh2bS5TdGFydERhdGUpKSAtIERhdGUucGFyc2UobmV3IERhdGUoKSk7XHJcbiAgICAgICAgICAgIHZhciBzZWNvbmRzID0gTWF0aC5mbG9vcigodCAvIDEwMDApICUgNjApO1xyXG4gICAgICAgICAgICB2YXIgbWludXRlcyA9IE1hdGguZmxvb3IoKHQgLyAxMDAwIC8gNjApICUgNjApO1xyXG4gICAgICAgICAgICB2YXIgaG91cnMgPSBNYXRoLmZsb29yKCh0IC8gKDEwMDAgKiA2MCAqIDYwKSkgJSAyNCk7XHJcbiAgICAgICAgICAgIHZhciBkYXlzID0gTWF0aC5mbG9vcih0IC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTtcclxuICAgICAgICAgICAgdm0uZGF0ZSA9IHtcclxuICAgICAgICAgICAgICAgICd0b3RhbCc6IHQsXHJcbiAgICAgICAgICAgICAgICAnZGF5cyc6IHBhZExlZnQoZGF5cywgMiksXHJcbiAgICAgICAgICAgICAgICAnaG91cnMnOiBwYWRMZWZ0KGhvdXJzLCAyKSxcclxuICAgICAgICAgICAgICAgICdtaW51dGVzJzogcGFkTGVmdChtaW51dGVzLCAyKSxcclxuICAgICAgICAgICAgICAgICdzZWNvbmRzJzogcGFkTGVmdChzZWNvbmRzLCAyKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyBpZiAodm0uZGF0ZS50b3RhbCA8PSAwIHx8IHZtLm1vZGUgPT0gXCJUZXN0aW5nXCIpIHtcclxuICAgICAgICAgICAgLy8gICAgIGNsZWFySW50ZXJ2YWwodGltZWludGVydmFsKTtcclxuICAgICAgICAgICAgLy8gICAgIHZtLmNvbWluZ3Nvb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgLy8gfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gICAgIHZtLmNvbWluZ3Nvb24gPSB0cnVlO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgLy8gfSk7XHJcbiAgICB9LFxyXG59KVxyXG4iXX0=
