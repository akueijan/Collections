"use strict";var index_view=new Vue({el:"#app",data:{},methods:{},mounted:function(){var s={x:0,y:0,eyes:"sorrow",eyesInt:0,mouth:"",mouthInt:0,leftHand:.01,rightHand:.01},e=new dat.GUI;e.add(s,"x",-100,100),e.add(s,"y",-45,45);var n=e.add(s,"eyes",["Fun","Angry","Joy","Sorrow"]);e.add(s,"eyesInt",0,10),e.add(s,"mouth",["A","O"]),e.add(s,"mouthInt",0,10),e.add(s,"leftHand",0,10),e.add(s,"rightHand",0,10);var o=document.getElementById("canvas"),u=new THREE.Scene,E=new THREE.PerspectiveCamera(90,o.clientWidth/o.clientHeight,.1,1e3);E.position.set(0,1,-.8),E.rotation.set(0,Math.PI,0);var m=new THREE.WebGLRenderer;m.setPixelRatio(window.devicePixelRatio),m.setSize(o.clientWidth,o.clientHeight),m.setClearColor(8372223,1),o.appendChild(m.domElement);e=new THREE.DirectionalLight(16777215);e.position.set(-1,1,-1).normalize(),u.add(e);var H=new THREE.Object3D;E.add(H),console.log(H);e=new THREE.GLTFLoader;e.crossOrigin="anonymous",e.load("./static/alicia.vrm",function(e){THREE.VRM.from(e).then(function(e){u.add(e.scene),console.log(e),e.lookAt.target=H;for(var n=[new THREE.IK,new THREE.IK],o=[new THREE.IKChain,new THREE.IKChain],t=[],a=[],i=[],r=[[THREE.VRMSchema.HumanoidBoneName.LeftUpperArm,THREE.VRMSchema.HumanoidBoneName.LeftLowerArm,THREE.VRMSchema.HumanoidBoneName.LeftHand],[THREE.VRMSchema.HumanoidBoneName.RightUpperArm,THREE.VRMSchema.HumanoidBoneName.RightLowerArm,THREE.VRMSchema.HumanoidBoneName.RightHand]],d=0;d<2;d++){var s=new THREE.Mesh(new THREE.SphereGeometry(0),new THREE.MeshBasicMaterial({color:16711680}));s.position.x=-.2;var E=new THREE.Object3D;E.add(s),E.position.x=0==d?-.3:.3,E.position.y=1.2,E.position.z=-.3,u.add(E),t.push(E);for(var m=[],h=[],c=0;c<3;c++){var l=new THREE.Bone,R=e.humanoid.getBoneNode(r[d][c]);0==c?R.getWorldPosition(l.position):(l.position.set(R.position.x,R.position.y,R.position.z),m[c-1].add(l)),m.push(l),h.push(R);R=2===c?s:null;o[d].add(new THREE.IKJoint(l,{}),{target:R})}n[d].add(o[d]),a.push(m),i.push(h),u.add(n[d].getRootBone())}e.blendShapeProxy.setValue(THREE.VRMSchema.BlendShapePresetName.Sorrow,0),e.blendShapeProxy.setValue(THREE.VRMSchema.BlendShapePresetName.A,0),S(e,n,t,a,i)})});function h(e,n,o){var t=new THREE.Quaternion;t.setFromAxisAngle(new THREE.Vector3(0,1,0),o),n[0].setRotationFromQuaternion(e[0].quaternion.multiply(t)),n[1].setRotationFromQuaternion(e[1].quaternion),n[2].setRotationFromQuaternion(e[2].quaternion)}document.body.addEventListener("keydown",function(e){switch(console.log(e.keyCode),e.keyCode){case 39:s.x+=2;break;case 37:s.x-=2;break;case 38:s.y+=1;break;case 40:--s.y}},!1);var c=new THREE.Clock,l=THREE.VRMSchema.BlendShapePresetName.Sorrow,R=null,p=!1;n.onChange(function(e){switch(console.log(e),e){case"Fun":l=THREE.VRMSchema.BlendShapePresetName.Fun;break;case"Angry":l=THREE.VRMSchema.BlendShapePresetName.Angry;break;case"Joy":l=THREE.VRMSchema.BlendShapePresetName.Joy;break;case"Sorrow":l=THREE.VRMSchema.BlendShapePresetName.Sorrow}T=p=!0});var w=0,T=!0,S=function e(n,o,t,a,i){var r=c.getDelta(),d=n.humanoid.getBoneNode(THREE.VRMSchema.HumanoidBoneName.Head);d.rotation.x=y,d.rotation.y=g,R=s.eyesInt/10,p&&(R=.01*w,T?100<=(w+=3)&&(T=!1):(w-=3)<=0&&(w=0)),t[0].rotation.z=s.leftHand/2,t[1].rotation.z=s.rightHand/2,o[0].solve(),o[1].solve(),h(a[0],i[0],Math.PI/2),h(a[1],i[1],-Math.PI/2),n.blendShapeProxy.setValue(l,R),n.blendShapeProxy.setValue(THREE.VRMSchema.BlendShapePresetName.A,s.mouthInt/10),n.update(r),requestAnimationFrame(function(){return e(n,o,t,a,i)}),m.render(u,E)},g=0,y=0;window.addEventListener("mousemove",function(e){g=(e.clientX-.5*o.offsetWidth)/o.offsetHeight*1,y=(e.clientY-.5*o.offsetHeight)/o.offsetHeight*-1,(g=.8<=g?.8:g)<=-.8&&(g=-.8),(y=.1<=y?.1:y)<=-.45&&(y=-.45)}),window.addEventListener("mousedown",function(e){console.log(e.button)})}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImluZGV4X3ZpZXciLCJWdWUiLCJlbCIsIm1ldGhvZHMiLCJtb3VudGVkIiwiY29udHJvbCIsIngiLCJleWVzSW50IiwiZXllcyIsIm1vdXRoSW50IiwibGVmdEhhbmQiLCJyaWdodEhhbmQiLCJHVUkiLCJkYXQiLCJjb25FeWVzIiwiYWRkIiwiZ3VpIiwiY2FudmFzIiwiZ2V0RWxlbWVudEJ5SWQiLCJkb2N1bWVudCIsInJvdGF0aW9uIiwic2V0IiwiVEhSRUUiLCJQSSIsInNldFBpeGVsUmF0aW8iLCJ3aW5kb3ciLCJQZXJzcGVjdGl2ZUNhbWVyYSIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0IiwicmVuZGVyZXIiLCJzZXRTaXplIiwic2V0Q2xlYXJDb2xvciIsIk1hdGgiLCJsaWdodCIsIkRpcmVjdGlvbmFsTGlnaHQiLCJwb3NpdGlvbiIsIm5vcm1hbGl6ZSIsInNjZW5lIiwibG9va0F0VGFyZ2V0IiwiY2FtZXJhIiwiZG9tRWxlbWVudCIsImNyb3NzT3JpZ2luIiwibG9hZGVyIiwibG9hZCIsIlZSTSIsImZyb20iLCJPYmplY3QzRCIsImNvbnNvbGUiLCJ2cm0iLCJsb29rQXQiLCJ0YXJnZXQiLCJpa0xpc3QiLCJJSyIsImNoYWluTGlzdCIsImdsdGYiLCJwaXZvdExpc3QiLCJ0aGVuIiwiYm9uZXNMaXN0IiwibG9nIiwiaiIsIklLQ2hhaW4iLCJtb3ZpbmdUYXJnZXQiLCJub2Rlc0xpc3QiLCJib25lTmFtZSIsIkh1bWFub2lkQm9uZU5hbWUiLCJMZWZ0VXBwZXJBcm0iLCJWUk1TY2hlbWEiLCJMZWZ0TG93ZXJBcm0iLCJMZWZ0SGFuZCIsInoiLCJSaWdodFVwcGVyQXJtIiwicGl2b3QiLCJSaWdodExvd2VyQXJtIiwiUmlnaHRIYW5kIiwiTWVzaCIsIlNwaGVyZUdlb21ldHJ5IiwiTWVzaEJhc2ljTWF0ZXJpYWwiLCJjb2xvciIsImdldEJvbmVOb2RlIiwiZ2V0V29ybGRQb3NpdGlvbiIsImJvbmUiLCJ5IiwicHVzaCIsIm5vZGUiLCJib25lcyIsIm5vZGVzIiwiaSIsImh1bWFub2lkIiwiZ2V0Um9vdEJvbmUiLCJJS0pvaW50IiwidXBkYXRlQXJtIiwiUXVhdGVybmlvbiIsInNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb24iLCJrZXlDb2RlIiwic2V0VmFsdWUiLCJCbGVuZFNoYXBlUHJlc2V0TmFtZSIsIlNvcnJvdyIsImJsZW5kU2hhcGVQcm94eSIsIkEiLCJ1cGRhdGUiLCJvZmZzZXQiLCJxIiwiVmVjdG9yMyIsInF1YXRlcm5pb24iLCJtdWx0aXBseSIsImJvZHkiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInZhbCIsImNsb2NrIiwiQ2xvY2siLCJhY3Rpb24iLCJhY1RlbXAiLCJvbkNoYW5nZSIsIkZ1biIsIkFuZ3J5IiwiSm95IiwidGltZVN3aWNoIiwidGltZUN1biIsImRlbHRhVGltZSIsImdldERlbHRhIiwiSGVhZCIsImhlYWQiLCJvZmZzZXRZIiwib2Zmc2V0WCIsImFuaVMiLCJzb2x2ZSIsIm9mZnNldEhlaWdodCIsInJlbmRlciIsImV2ZW50IiwiY2xpZW50WCIsIm9mZnNldFdpZHRoIiwiY2xpZW50WSIsImJ1dHRvbiJdLCJtYXBwaW5ncyI6ImFBQUEsSUFBSUEsV0FBYSxJQUFJQyxJQUFJLENBQ3JCQyxHQUFJLE9BREpGLEtBQUFBLEdBS0FHLFFBTHFCLEdBVWpCQyxRQUFJQyxXQUVDLElBRlNBLEVBQUEsQ0FHSkMsRUFBQSxFQUNOQyxFQUFTLEVBQ0pDLEtBTEssU0FNVkMsUUFOVSxFQU9WQyxNQUFVLEdBQ1ZDLFNBQVcsRUFSZkQsU0FBQSxJQVVPQyxVQUFXQyxLQUVWUCxFQUFBQSxJQUFTUSxJQUFLRCxJQUNsQkUsRUFBQUEsSUFBT1QsRUFBRyxLQUFRQSxJQUFTLEtBQzNCVSxFQUFJVixJQUFBQSxFQUFTLEtBQWpCLEdBQStCLElBQzNCVSxJQUFJVixFQUFTVyxFQUFBRCxJQUFTVixFQUFBLE9BQTFCLENBQUEsTUFBQSxRQUFBLE1BQUEsV0FDSVUsRUFBSVYsSUFBQUEsRUFBUyxV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S1QsR0FBSyxHQWFqRG9HLEVBQU8xQixnQkFBWEgsU0FBQWlCLEVBQUFjLEdBQ09uQixFQUFBQSxnQkFBa0JaLFNBQWF4RSxNQUFBNEMsVUFBQTZCLHFCQUFhRyxFQUFBN0YsRUFBQUksU0FBQSxJQUUvQ3VDLEVBQUFtRCxPQUFBb0IsR0FFQUksc0JBQThCLFdBQUEsT0FBTTFHLEVBQU84RyxFQUFBQSxFQUEvQnhFLEVBQXVEd0UsRUFBekRqRSxLQVZWakMsRUFBU21HLE9BQU8zRixFQUFPRSxJQUl2QnFGLEVBQVUsRUFVUEEsRUFBWSxFQUNYQSxPQUFPbEIsaUJBQVAsWUFBQSxTQUFBdUIsR0FFRE4sR0FBSE0sRUFBb0JDLFFBQUEsR0FBQWpILEVBQUFrSCxhQUFBbEgsRUFBQThHLGFBQUEsRUFDaEJKLEdBQUFNLEVBQUFHLFFBQUEsR0FBQW5ILEVBQUE4RyxjQUFBOUcsRUFBQThHLGNBQUEsR0FOQUgsRUFPSCxJQUFBQSxFQVBhLEdBU0hBLEtBQVAsS0FFSkEsR0FBQSxLQUVHbEIsRUFuQlAsSUFBQWlCLEVBbUJPakIsR0FBUGlCLEtBQUEsTUFHSEEsR0FBQSxPQUhHbEcsT0FBT2lGLGlCQUFrQixZQUFhLFNBQUV1QixHQUNwQ2xGLFFBQVFXLElBQUl1RSxFQUFNSSIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBpbmRleF92aWV3ID0gbmV3IFZ1ZSh7XHJcbiAgICBlbDogXCIjYXBwXCIsXHJcbiAgICBkYXRhOiB7XHJcbiAgICAgICAgXHJcbiAgICB9LFxyXG4gICAgbWV0aG9kczoge1xyXG4gICAgICAgIFxyXG4gICAgfSxcclxuICAgIG1vdW50ZWQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIHRoaXMucHJvakFwaS5wb3N0KHVyaSwgZGF0YSkgIC8vRXhcclxuICAgICAgICBsZXQgY29udHJvbCA9IHtcclxuICAgICAgICAgICAgeDogMCxcclxuICAgICAgICAgICAgeTogMCxcclxuICAgICAgICAgICAgZXllczogJ3NvcnJvdycsXHJcbiAgICAgICAgICAgIGV5ZXNJbnQ6IDAsXHJcbiAgICAgICAgICAgIG1vdXRoOiAnJyxcclxuICAgICAgICAgICAgbW91dGhJbnQ6IDAsXHJcbiAgICAgICAgICAgIGxlZnRIYW5kOiAwLjAxLFxyXG4gICAgICAgICAgICByaWdodEhhbmQ6IDAuMDFcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGd1aSA9IG5ldyBkYXQuR1VJKClcclxuICAgICAgICBndWkuYWRkKGNvbnRyb2wsICd4JywgLTEwMCwgMTAwKVxyXG4gICAgICAgIGd1aS5hZGQoY29udHJvbCwgJ3knLCAtNDUsIDQ1KVxyXG4gICAgICAgIGxldCBjb25FeWVzID0gZ3VpLmFkZChjb250cm9sLCAnZXllcycsIFsnRnVuJywgJ0FuZ3J5JywgJ0pveScsICdTb3Jyb3cnXSlcclxuICAgICAgICBndWkuYWRkKGNvbnRyb2wsICdleWVzSW50JywgMCwgMTApXHJcbiAgICAgICAgZ3VpLmFkZChjb250cm9sLCAnbW91dGgnLCBbJ0EnLCAnTyddKVxyXG4gICAgICAgIGd1aS5hZGQoY29udHJvbCwgJ21vdXRoSW50JywgMCwgMTApXHJcbiAgICAgICAgZ3VpLmFkZChjb250cm9sLCAnbGVmdEhhbmQnLCAwLCAxMClcclxuICAgICAgICBndWkuYWRkKGNvbnRyb2wsICdyaWdodEhhbmQnLCAwLCAxMClcclxuXHJcbiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbnZhcycpXHJcblxyXG4gICAgICAgIC8vIOOCt+ODvOODs+OBrueUn+aIkFxyXG4gICAgICAgIGNvbnN0IHNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKClcclxuXHJcbiAgICAgICAgLy8g44Kr44Oh44Op44Gu55Sf5oiQXHJcbiAgICAgICAgY29uc3QgY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDkwLCBjYW52YXMuY2xpZW50V2lkdGgvY2FudmFzLmNsaWVudEhlaWdodCwgMC4xLCAxMDAwKVxyXG4gICAgICAgIGNhbWVyYS5wb3NpdGlvbi5zZXQoMCwgMSwgLTAuOClcclxuICAgICAgICBjYW1lcmEucm90YXRpb24uc2V0KDAsIE1hdGguUEksIDApXHJcblxyXG4gICAgICAgIC8vIOODrOODs+ODgOODqeODvOOBrueUn+aIkFxyXG4gICAgICAgIGNvbnN0IHJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoKVxyXG4gICAgICAgIHJlbmRlcmVyLnNldFBpeGVsUmF0aW8od2luZG93LmRldmljZVBpeGVsUmF0aW8pXHJcbiAgICAgICAgcmVuZGVyZXIuc2V0U2l6ZShjYW52YXMuY2xpZW50V2lkdGgsIGNhbnZhcy5jbGllbnRIZWlnaHQpXHJcbiAgICAgICAgcmVuZGVyZXIuc2V0Q2xlYXJDb2xvcigweDdmYmZmZiwgMS4wKVxyXG4gICAgICAgIGNhbnZhcy5hcHBlbmRDaGlsZChyZW5kZXJlci5kb21FbGVtZW50KVxyXG5cclxuICAgICAgICAvLyDjg6njgqTjg4jjga7nlJ/miJBcclxuICAgICAgICBjb25zdCBsaWdodCA9IG5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0KDB4ZmZmZmZmKVxyXG4gICAgICAgIGxpZ2h0LnBvc2l0aW9uLnNldCgtMSwgMSwgLTEpLm5vcm1hbGl6ZSgpXHJcbiAgICAgICAgc2NlbmUuYWRkKGxpZ2h0KVxyXG5cclxuICAgICAgICBjb25zdCBsb29rQXRUYXJnZXQgPSBuZXcgVEhSRUUuT2JqZWN0M0QoKTtcclxuICAgICAgICBjYW1lcmEuYWRkKCBsb29rQXRUYXJnZXQgKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhsb29rQXRUYXJnZXQpXHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgbG9hZGVyID0gbmV3IFRIUkVFLkdMVEZMb2FkZXIoKTtcclxuICAgICAgICBsb2FkZXIuY3Jvc3NPcmlnaW4gPSAnYW5vbnltb3VzJztcclxuICAgICAgICBsb2FkZXIubG9hZCgnLi9zdGF0aWMvYWxpY2lhLnZybScsXHJcbiAgICAgICAgICAgIChnbHRmKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBUSFJFRS5WUk0uZnJvbShnbHRmKS50aGVuKCAodnJtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g44K344O844Oz44G444Gu6L+95YqgXHJcbiAgICAgICAgICAgICAgICAgICAgc2NlbmUuYWRkKHZybS5zY2VuZSlcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2cm0pXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZybS5sb29rQXQudGFyZ2V0ID0gbG9va0F0VGFyZ2V0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBJS+OBrua6luWCmVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpa0xpc3QgPSBbbmV3IFRIUkVFLklLKCksIG5ldyBUSFJFRS5JSygpXSAvLyBJS+OCt+OCueODhuODoFxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjaGFpbkxpc3QgPSBbbmV3IFRIUkVFLklLQ2hhaW4oKSwgbmV3IFRIUkVFLklLQ2hhaW4oKV0gLy8g44OB44Kn44O844OzXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBpdm90TGlzdCA9IFtdIC8vIOODlOODnOODg+ODiFxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBib25lc0xpc3QgPSBbXSAvLyDjg5zjg7zjg7NcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbm9kZXNMaXN0ID0gW10gLy8g44OO44O844OJXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOODnOODvOODs+WQjVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBib25lTmFtZSA9IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgW1RIUkVFLlZSTVNjaGVtYS5IdW1hbm9pZEJvbmVOYW1lLkxlZnRVcHBlckFybSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgVEhSRUUuVlJNU2NoZW1hLkh1bWFub2lkQm9uZU5hbWUuTGVmdExvd2VyQXJtLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBUSFJFRS5WUk1TY2hlbWEuSHVtYW5vaWRCb25lTmFtZS5MZWZ0SGFuZF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtUSFJFRS5WUk1TY2hlbWEuSHVtYW5vaWRCb25lTmFtZS5SaWdodFVwcGVyQXJtLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBUSFJFRS5WUk1TY2hlbWEuSHVtYW5vaWRCb25lTmFtZS5SaWdodExvd2VyQXJtLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBUSFJFRS5WUk1TY2hlbWEuSHVtYW5vaWRCb25lTmFtZS5SaWdodEhhbmRdXHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDI7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDjgr/jg7zjgrLjg4Pjg4jjga7nlJ/miJBcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1vdmluZ1RhcmdldCA9IG5ldyBUSFJFRS5NZXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFRIUkVFLlNwaGVyZUdlb21ldHJ5KDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogMHhmZjAwMDB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZpbmdUYXJnZXQucG9zaXRpb24ueCA9IC0wLjJcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBpdm90ID0gbmV3IFRIUkVFLk9iamVjdDNEKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGl2b3QuYWRkKG1vdmluZ1RhcmdldClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGl2b3QucG9zaXRpb24ueCA9ICBqID09IDAgPyAtMC4zIDogMC4zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBpdm90LnBvc2l0aW9uLnkgPSAxLjJcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGl2b3QucG9zaXRpb24ueiA9IC0wLjNcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmUuYWRkKHBpdm90KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwaXZvdExpc3QucHVzaChwaXZvdClcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOODgeOCp+ODvOODs+OBrueUn+aIkFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYm9uZXMgPSBbXSAvLyDjg5zjg7zjg7NcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5vZGVzID0gW10gLy8g44OO44O844OJXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOODnOODvOODs+OBqOODjuODvOODieOBrueUn+aIkFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYm9uZSA9IG5ldyBUSFJFRS5Cb25lKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5vZGUgPSB2cm0uaHVtYW5vaWQuZ2V0Qm9uZU5vZGUoYm9uZU5hbWVbal1baV0pXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlLmdldFdvcmxkUG9zaXRpb24oYm9uZS5wb3NpdGlvbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmUucG9zaXRpb24uc2V0KG5vZGUucG9zaXRpb24ueCwgbm9kZS5wb3NpdGlvbi55LCBub2RlLnBvc2l0aW9uLnopXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lc1tpIC0gMV0uYWRkKGJvbmUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9uZXMucHVzaChib25lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2Rlcy5wdXNoKG5vZGUpXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDjg4Hjgqfjg7zjg7Pjgavov73liqBcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRhcmdldCA9IGkgPT09IDIgPyBtb3ZpbmdUYXJnZXQgOiBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYWluTGlzdFtqXS5hZGQobmV3IFRIUkVFLklLSm9pbnQoYm9uZSwge30pLCB7dGFyZ2V0fSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSUvjgrfjgrnjg4bjg6Djgavjg4Hjgqfjg7zjg7Pov73liqBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWtMaXN0W2pdLmFkZChjaGFpbkxpc3Rbal0pXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDjg6rjgrnjg4jjgavov73liqBcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9uZXNMaXN0LnB1c2goYm9uZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVzTGlzdC5wdXNoKG5vZGVzKVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g44Or44O844OI44Oc44O844Oz44Gu6L+95YqgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjZW5lLmFkZChpa0xpc3Rbal0uZ2V0Um9vdEJvbmUoKSlcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOODmOODq+ODkeODvOOBrui/veWKoFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBsZXQgaGVscGVyID0gbmV3IElLSGVscGVyKGlrTGlzdFtqXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2NlbmUuYWRkKGhlbHBlcilcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZybS5ibGVuZFNoYXBlUHJveHkuc2V0VmFsdWUoVEhSRUUuVlJNU2NoZW1hLkJsZW5kU2hhcGVQcmVzZXROYW1lLlNvcnJvdywgMClcclxuICAgICAgICAgICAgICAgICAgICB2cm0uYmxlbmRTaGFwZVByb3h5LnNldFZhbHVlKFRIUkVFLlZSTVNjaGVtYS5CbGVuZFNoYXBlUHJlc2V0TmFtZS5BLCAwKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGUodnJtLCBpa0xpc3QsIHBpdm90TGlzdCwgYm9uZXNMaXN0LCBub2Rlc0xpc3QpXHJcblxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgLy8g6IWV44Gu5pu05pawXHJcbiAgICAgICAgbGV0IHVwZGF0ZUFybSA9IChib25lcywgbm9kZXMsIG9mZnNldCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgcSA9IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKClcclxuICAgICAgICAgICAgcS5zZXRGcm9tQXhpc0FuZ2xlKCBuZXcgVEhSRUUuVmVjdG9yMygwLCAxLCAwKSwgb2Zmc2V0KVxyXG4gICAgICAgICAgICBub2Rlc1swXS5zZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKGJvbmVzWzBdLnF1YXRlcm5pb24ubXVsdGlwbHkocSkpXHJcbiAgICAgICAgICAgIG5vZGVzWzFdLnNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb24oYm9uZXNbMV0ucXVhdGVybmlvbilcclxuICAgICAgICAgICAgbm9kZXNbMl0uc2V0Um90YXRpb25Gcm9tUXVhdGVybmlvbihib25lc1syXS5xdWF0ZXJuaW9uKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGJvZHkgPSBkb2N1bWVudC5ib2R5XHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0a2V5Y29kZShlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUua2V5Q29kZSlcclxuICAgICAgICAgICAgc3dpdGNoKGUua2V5Q29kZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOTpcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sLnggKz0gMlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICBjYXNlIDM3OlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2wueCAtPSAyXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzg6XHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbC55ICs9IDFcclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0MDpcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sLnkgLT0gMVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgYm9keS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZ2V0a2V5Y29kZSwgZmFsc2UpXHJcblxyXG4gICAgICAgIGxldCBjbG9jayA9IG5ldyBUSFJFRS5DbG9jaygpXHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IGFjdGlvbiA9IFRIUkVFLlZSTVNjaGVtYS5CbGVuZFNoYXBlUHJlc2V0TmFtZS5Tb3Jyb3dcclxuICAgICAgICBsZXQgYW5pUyA9IG51bGxcclxuICAgICAgICBsZXQgYWNUZW1wID0gZmFsc2VcclxuICAgICAgICBjb25FeWVzLm9uQ2hhbmdlKCh2YWwpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codmFsKVxyXG4gICAgICAgICAgICAvLyB2cm0uYmxlbmRTaGFwZVByb3h5LnNldFZhbHVlKGNvbnRyb2wuZXllcywgMClcclxuICAgICAgICAgICAgLy8gdnJtLnVwZGF0ZSgpXHJcbiAgICAgICAgICAgIHN3aXRjaCAodmFsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdGdW4nOlxyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbiA9IFRIUkVFLlZSTVNjaGVtYS5CbGVuZFNoYXBlUHJlc2V0TmFtZS5GdW5cclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnQW5ncnknOlxyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbiA9IFRIUkVFLlZSTVNjaGVtYS5CbGVuZFNoYXBlUHJlc2V0TmFtZS5BbmdyeVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICBjYXNlICdKb3knOlxyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbiA9IFRIUkVFLlZSTVNjaGVtYS5CbGVuZFNoYXBlUHJlc2V0TmFtZS5Kb3lcclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnU29ycm93JzpcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb24gPSBUSFJFRS5WUk1TY2hlbWEuQmxlbmRTaGFwZVByZXNldE5hbWUuU29ycm93XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBhbmlTID0gTWF0aC5zaW4oIE1hdGguUEkgKiBjbG9jay5lbGFwc2VkVGltZSApXHJcbiAgICAgICAgICAgIGFjVGVtcCA9IHRydWVcclxuICAgICAgICAgICAgdGltZVN3aWNoID0gdHJ1ZVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGxldCB0aW1lQ3VuID0gMFxyXG4gICAgICAgIGxldCB0aW1lU3dpY2ggPSB0cnVlXHJcblxyXG4gICAgICAgIGxldCB1cGRhdGUgPSAodnJtLCBpa0xpc3QsIHBpdm90TGlzdCwgYm9uZXNMaXN0LCBub2Rlc0xpc3QpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGVsdGFUaW1lID0gY2xvY2suZ2V0RGVsdGEoKVxyXG4gICAgICAgICAgICBjb25zdCBoZWFkID0gdnJtLmh1bWFub2lkLmdldEJvbmVOb2RlKFRIUkVFLlZSTVNjaGVtYS5IdW1hbm9pZEJvbmVOYW1lLkhlYWQpXHJcbiAgICAgICAgICAgIC8vIGhlYWQucm90YXRpb24ueCA9IGNvbnRyb2wueVxyXG4gICAgICAgICAgICAvLyBoZWFkLnJvdGF0aW9uLnggPSBjb250cm9sLnkgKiAwLjAxIC8vIOmgreW3puWPs+enu1xyXG4gICAgICAgICAgICAvLyBoZWFkLnJvdGF0aW9uLnkgPSBjb250cm9sLnggKiAwLjAxIC8vIOmgreS4iuS4i+enu1xyXG5cclxuICAgICAgICAgICAgaGVhZC5yb3RhdGlvbi54ID0gb2Zmc2V0WVxyXG4gICAgICAgICAgICBoZWFkLnJvdGF0aW9uLnkgPSBvZmZzZXRYXHJcblxyXG4gICAgICAgICAgICBhbmlTID0gY29udHJvbC5leWVzSW50LzEwXHJcbiAgICAgICAgICAgIGlmKGFjVGVtcCkge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGltZUN1bilcclxuICAgICAgICAgICAgICAgIGFuaVMgPSB0aW1lQ3VuICogMC4wMVxyXG4gICAgICAgICAgICAgICAgaWYodGltZVN3aWNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZUN1biArPSAzXHJcbiAgICAgICAgICAgICAgICAgICAgaWYodGltZUN1biA+PSAxMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZVN3aWNoID0gZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVDdW4gLT0gM1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHRpbWVDdW4gPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lQ3VuID0gMFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8g44K/44O844Ky44OD44OI44Gu56e75YuVXHJcbiAgICAgICAgICAgIC8vIHBpdm90TGlzdFswXS5yb3RhdGlvbi56IC09IDAuMDFcclxuICAgICAgICAgICAgLy8gcGl2b3RMaXN0WzFdLnJvdGF0aW9uLnogKz0gMC4wMVxyXG4gICAgICAgICAgICBwaXZvdExpc3RbMF0ucm90YXRpb24ueiA9IGNvbnRyb2wubGVmdEhhbmQgLyAyIC8vIOW3puaJi1xyXG4gICAgICAgICAgICBwaXZvdExpc3RbMV0ucm90YXRpb24ueiA9IGNvbnRyb2wucmlnaHRIYW5kIC8gMiAvLyDlj7PmiYtcclxuXHJcbiAgICAgICAgICAgIC8vIElL44Gu5pu05pawXHJcbiAgICAgICAgICAgIGlrTGlzdFswXS5zb2x2ZSgpXHJcbiAgICAgICAgICAgIGlrTGlzdFsxXS5zb2x2ZSgpXHJcblxyXG4gICAgICAgICAgICAvLyDohZXjga7mm7TmlrBcclxuICAgICAgICAgICAgdXBkYXRlQXJtKGJvbmVzTGlzdFswXSwgbm9kZXNMaXN0WzBdLCBNYXRoLlBJIC8gMilcclxuICAgICAgICAgICAgdXBkYXRlQXJtKGJvbmVzTGlzdFsxXSwgbm9kZXNMaXN0WzFdLCAtTWF0aC5QSSAvIDIpXHJcblxyXG4gICAgICAgICAgICB2cm0uYmxlbmRTaGFwZVByb3h5LnNldFZhbHVlKGFjdGlvbiwgYW5pUylcclxuICAgICAgICAgICAgdnJtLmJsZW5kU2hhcGVQcm94eS5zZXRWYWx1ZShUSFJFRS5WUk1TY2hlbWEuQmxlbmRTaGFwZVByZXNldE5hbWUuQSwgY29udHJvbC5tb3V0aEludC8xMClcclxuICAgIFxyXG4gICAgICAgICAgICB2cm0udXBkYXRlKGRlbHRhVGltZSlcclxuXHJcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB1cGRhdGUodnJtLCBpa0xpc3QsIHBpdm90TGlzdCwgYm9uZXNMaXN0LCBub2Rlc0xpc3QpKVxyXG4gICAgICAgICAgICByZW5kZXJlci5yZW5kZXIoc2NlbmUsIGNhbWVyYSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIG1vdXNlIGxpc3RlbmVyXHJcbiAgICAgICAgbGV0IG9mZnNldFggPSAwXHJcbiAgICAgICAgbGV0IG9mZnNldFkgPSAwXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdtb3VzZW1vdmUnLCAoIGV2ZW50ICkgPT4ge1xyXG4gICAgICAgICAgICAvLyBsb29rQXRUYXJnZXQucG9zaXRpb24ueCA9ICAxMC4wICogKCAoIGV2ZW50LmNsaWVudFggLSAwLjUgKiBjYW52YXMub2Zmc2V0V2lkdGggKSAvIGNhbnZhcy5vZmZzZXRIZWlnaHQgKTtcclxuICAgICAgICAgICAgLy8gbG9va0F0VGFyZ2V0LnBvc2l0aW9uLnkgPSAtMTAuMCAqICggKCBldmVudC5jbGllbnRZIC0gMC41ICogY2FudmFzLm9mZnNldEhlaWdodCApIC8gY2FudmFzLm9mZnNldEhlaWdodCApO1xyXG4gICAgICAgICAgICBvZmZzZXRYID0gKCAoIGV2ZW50LmNsaWVudFggLSAwLjUgKiBjYW52YXMub2Zmc2V0V2lkdGggKSAvIGNhbnZhcy5vZmZzZXRIZWlnaHQgKSAqIDEuMDtcclxuICAgICAgICAgICAgb2Zmc2V0WSA9ICggKCBldmVudC5jbGllbnRZIC0gMC41ICogY2FudmFzLm9mZnNldEhlaWdodCApIC8gY2FudmFzLm9mZnNldEhlaWdodCApICogLTEuMDtcclxuICAgICAgICAgICAgaWYob2Zmc2V0WCA+PSAwLjgpIHtcclxuICAgICAgICAgICAgICAgIG9mZnNldFggPSAwLjhcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihvZmZzZXRYIDw9IC0wLjgpIHtcclxuICAgICAgICAgICAgICAgIG9mZnNldFggPSAtMC44XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYob2Zmc2V0WSA+PSAwLjEwKSB7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXRZID0gMC4xMFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKG9mZnNldFkgPD0gLTAuNDUpIHtcclxuICAgICAgICAgICAgICAgIG9mZnNldFkgPSAtMC40NVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHgpXHJcbiAgICAgICAgfSlcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ21vdXNlZG93bicsICggZXZlbnQgKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGV2ZW50LmJ1dHRvbilcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59KVxyXG4iXX0=
