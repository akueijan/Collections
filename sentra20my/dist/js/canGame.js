"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}var carGame=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10;_classCallCheck(this,t),this.speed=e,this.mainSize={width:window.innerWidth,height:window.innerHeight},this.rot=this.mainSize.height/this.mainSize.width,this.imgs={roadimg:{src:"./images/road.jpg"},userCar:{src:"./images/game_usercar.png"},userCarwan:{src:"./images/game_usercar_wan.png"},targetCar:{src:"./images/game_targetcar.png"},targetCarbrk:{src:"./images/game_targetcar_brk.png"},gameoverCar:{src:"./images/white_brakes_gameover.png"},scoreBg:{src:"./images/game-secondbg.png"},overimg:{src:"./images/gameover_near.jpg"}}}return _createClass(t,[{key:"init",value:function(){var t=this,e=document.querySelector("#canvas");e.width=t.mainSize.width,e.height=t.mainSize.height;var i,a,r,h,n,o,g,d=new Image,c=new Image,s=new Image,w=new Image,l=new Image,m=new Image,f=new Image,u=new Image,p=new Image,v=e.getContext("2d"),b=2,I=150,C=0,y=0,_=0,x=60,O=0,k=0,j=0,P=document.querySelector(".playbtn");t.can1=e,d.src=t.imgs.roadimg.src,c.src=t.imgs.roadimg.src,s.src=t.imgs.userCar.src,w.src=t.imgs.userCarwan.src,l.src=t.imgs.targetCar.src,m.src=t.imgs.targetCarbrk.src,f.src=t.imgs.gameoverCar.src,u.src=t.imgs.scoreBg.src,p.src=t.imgs.overimg.src;var S=new Promise(function(e){d.onload=function(){e()}}),T=new Promise(function(e){c.onload=function(){e()}}),M=new Promise(function(e){s.onload=function(){e()}}),z=new Promise(function(e){w.onload=function(){e()}}),H=new Promise(function(e){l.onload=function(){e()}}),q=new Promise(function(e){m.onload=function(){e()}}),E=new Promise(function(e){f.onload=function(){e()}}),L=new Promise(function(e){u.onload=function(){e()}}),B=new Promise(function(e){p.onload=function(){e()}});function D(){i>e.height&&(i=-(d.height/t.rot-a)),a>e.height&&(a=-(c.height/t.rot-i)),v.clearRect(0,0,e.width,e.height),v.drawImage(d,0,0,d.width,d.height,0,i,e.width,d.height/t.rot),v.drawImage(c,0,0,c.width,c.height,0,a,e.width,c.height/t.rot),v.drawImage(u,0,0,u.width,u.height,e.width-u.width/2-10,20,u.width/2,u.height/2),i+=t.speed,a+=t.speed,70<=x&&(I-=b-.03*x),80<=x&&(I-=b-.02*x),100<=x&&(I-=(b=1)-.01*x),5<=C&&C<21&&(I-=b-.025*x,90<=x&&20<=++O&&(b=Math.random()<.5?-.1:2,O=0)),21<=C&&C<31&&(I-=b-.02*x,85<=x&&(10==++k&&(b=Math.random()<.5?-.1:2),13==k&&(b=Math.random()<.5?-.1:2),15<=k&&(k=0))),31<=C&&(I-=b-.01*x,80<=x&&(10==++j&&(b=Math.random()<.5?-.15:2),12==j&&(b=Math.random()<.5?-.15:2),13<=j&&(j=0))),I-=b-.03*x,(r-=1*Math.random()+1)<=-t.carObj.height&&(r=e.height,h=Math.random()<.5?35:e.width-(t.carObj.width/2+35)),v.drawImage(t.carObj,0,0,t.carObj.width,t.carObj.height,h,r,t.carObj.width/2,t.carObj.height/2),v.fillStyle="#ffffff",v.font="italic 20px Helvetica",v.fillText("km/h",70,50),v.font="italic 30px Helvetica",v.shadowOffsetX=3,v.shadowOffsetY=3,v.shadowColor="rgba(0,0,0,0.3)",v.fillText(y,e.width-58,48),v.fillText(":",e.width-73,46),v.fillText(_,e.width-95,48),v.font="italic 40px Helvetica",v.fillText(Math.floor(x),20,50),v.drawImage(s,0,0,s.width,s.height,e.width/2-s.width/4,e.height-s.height/2-10,s.width/2,s.height/2),b<0?v.drawImage(m,0,0,l.width,l.height,e.width/2-l.width/4,I,l.width/2,l.height/2):v.drawImage(l,0,0,l.width,l.height,e.width/2-l.width/4,I,l.width/2,l.height/2);l.height;e.height-s.height/2-l.height/2+40-30<=I&&v.drawImage(w,0,0,w.width,w.height,e.width/2-w.width/4,e.height-w.height/2-10,w.width/2,w.height/2)}function X(e){e.preventDefault(),this.style.background="url(./images/game_brakes-on.png) center top no-repeat",this.style.backgroundSize="cover",clearInterval(g),o=setInterval(function(){x+=1.5,t.speed+=1.5,50<=t.speed&&(t.speed=50),99<=x&&(x=99)},300)}function Y(e){e.preventDefault(),this.style.background="url(./images/game_brakes-off.png) center top no-repeat",this.style.backgroundSize="cover",clearInterval(o),g=setInterval(function(){x-=2.5,t.speed-=.08*t.speed,t.speed<=15&&(t.speed=15),x<=60&&(x=60)},300)}t.creatCar(),Promise.all([S,T,M,z,H,q,E,L,B]).then(function(){i=-(d.height/t.rot-e.height),v.drawImage(d,0,0,d.width,d.height,0,i,e.width,d.height/t.rot),a=-(c.height/t.rot-i),v.drawImage(c,0,0,c.width,c.height,0,a,e.width,c.height/t.rot),n=e.height-s.height/2-10,v.drawImage(s,0,0,s.width,s.height,e.width/2-s.width/4,n,s.width/2,s.height/2),v.drawImage(l,0,0,l.width,l.height,e.width/2-l.width/4,I,l.width/2,l.height/2),v.drawImage(u,0,0,u.width,u.height,e.width-u.width/2-10,20,u.width/2,u.height/2),v.fillStyle="#ffffff",v.font="italic 20px Helvetica",v.fillText("km/h",70,50),v.font="italic 30px Helvetica",v.shadowOffsetX=3,v.shadowOffsetY=3,v.shadowColor="rgba(0,0,0,0.3)",v.fillText("00",e.width-58,48),v.fillText(":",e.width-73,48),v.fillText("0",e.width-95,48),v.font="italic 40px Helvetica",v.fillText(Math.floor(x),20,50),h=Math.random()<.5?35:e.width-(t.carObj.width/2+35),r=e.height,v.drawImage(t.carObj,0,0,t.carObj.width,t.carObj.height,h,r,t.carObj.width/2,t.carObj.height/2)}),document.querySelector(".startbtn").addEventListener("click",function(){document.querySelector(".decoarr").style="display: none",document.querySelector(".startbtn").style="display: none",index_view.popup=!1,index_view.popPage="",setInterval(D,20),P.addEventListener("touchstart",X),P.addEventListener("touchend",Y),setInterval(function(){C+=1,60<=(y+=1)&&(_+=1,y=0)},1e3)})}},{key:"creatCar",value:function(){var e=this,t=new Image;t.src=e.imgs.targetCar.src,t.onload=function(){e.carObj=t}}}]),t}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhbkdhbWUuanMiXSwibmFtZXMiOlsiY2FyR2FtZSIsInNwZWVkIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIm1haW5TaXplIiwid2lkdGgiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJyb3QiLCJpbWdzIiwicm9hZGltZyIsInNyYyIsInVzZXJDYXIiLCJ1c2VyQ2Fyd2FuIiwidGFyZ2V0Q2FyIiwidGFyZ2V0Q2FyYnJrIiwiZ2FtZW92ZXJDYXIiLCJzY29yZUJnIiwib3ZlcmltZyIsIl9zZWxmIiwiY2FuMSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInkyIiwicm9hZGltZzEiLCJvdmVySW1nIiwiY2FuY3R4IiwiSW1hZ2UiLCJyb2FkaW1nMiIsImdldENvbnRleHQiLCJ0YXJnZXRZIiwib2Zmc2V0WSIsImN1biIsIm1pbmN1biIsImhhcmRjdW4iLCJ1c2VyQ2FyWSIsIm92ZXJnYW1lU2V0aW4iLCJ0aW1lQ3VuIiwiUHJvbWlzZSIsInJlc29sdmUiLCJvbmxvYWQiLCJyb2FkQmcyIiwicm9hZEJnMSIsInVzZXJDYXJpbWciLCJ1c2VyQ2Fyd2FuaW1nIiwidGFyZ2V0Q2FyaW1nIiwidGFyZ2V0Q2FyYnJraW1nIiwiZHJhd0NhbiIsInkxIiwic2VjIiwiY2xlYXJSZWN0IiwiZHJhd0ltYWdlIiwia2lsbyIsInNjb3JlIiwiTWF0aCIsInJhbmRvbSIsInk0IiwiY2FyT2JqIiwib2JqeCIsImZpbGxTdHlsZSIsImZvbnQiLCJmaWxsVGV4dCIsInNoYWRvd09mZnNldFkiLCJzaGFkb3dDb2xvciIsIm1pbiIsImZsb29yIiwiaGFuZGxlU3RhcnQiLCJlbCIsInByZXZlbnREZWZhdWx0Iiwic3R5bGUiLCJiYWNrZ3JvdW5kIiwiYmFja2dyb3VuZFNpemUiLCJjbGVhckludGVydmFsIiwidGltZURlbCIsInRpbWVBZGQiLCJzZXRJbnRlcnZhbCIsIm92ZXJMaW5lIiwiaGFuZGxlRW5kIiwiZ2FtZVBsYXkiLCJhZGRFdmVudExpc3RlbmVyIiwiYWxsIiwiZ2FtZW92ZXJDYXJpbWciLCJzY29yZUJnaW1nIiwib3ZlckltZ0JnIiwidGhlbiIsImNyZWF0Q2FyIiwic2hhZG93T2Zmc2V0WCIsImluZGV4X3ZpZXciLCJwb3B1cCIsInBvcFBhZ2UiLCJwbGF5YnRuIiwic2V0VGltZW91dCJdLCJtYXBwaW5ncyI6InVaQUFNQSxtQkFDRixTQUFBQSxJQUFzQixJQUFWQyxFQUFVLEVBQUFDLFVBQUFDLGFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFKLEdBQUlHLGdCQUFBQyxLQUFBTixHQUNsQk0sS0FBS0wsTUFBUUEsRUFFYkssS0FBS0MsU0FBVyxDQUNaQyxNQUFPQyxPQUFPQyxXQUNkQyxPQUFRRixPQUFPRyxhQUduQk4sS0FBS08sSUFBTVAsS0FBS0MsU0FBU0ksT0FBU0wsS0FBS0MsU0FBU0MsTUFDaERGLEtBQUtRLEtBQU8sQ0FUaEJDLFFBQXNCLENBQUFDLElBQUEscUJBQUFDLFFBQUEsQ0FjVkQsSUFBSyw2QkFFVEUsV0FBWSxDQWJYWCxJQUFXLGlDQUVOWSxVQUFTUCxDQWVYSSxJQUFLLCtCQVpiSSxhQUFnQmIsQ0FDSlMsSUFBQSxtQ0FFREssWUFBRSxDQUZETCxJQUFBLHNDQUtETSxRQUFFLENBTEROLElBQUEsOEJBUURPLFFBQUUsQ0FSRFAsSUFBQSxtRkFjSkEsSUFBR1EsRUFBRWxCLEtBZERtQixFQUFBQyxTQUFBQyxjQUFBLFdBZ0JSTixFQUFBQSxNQUFhRyxFQUFBakIsU0FBQUMsTUFDVFEsRUFBS0wsT0FBQWEsRUFBQWpCLFNBQUFJLE9BR0xLLElBUUpRLEVBa0JBSSxFQWhCQ3BCLEVBQ0FHLEVBR0RrQixFQVFBQyxFQUVBQyxFQXhCT0YsRUFBRSxJQUFBRyxNQXBCREMsRUFBQSxJQUFBRCxNQXNCUlQsRUFBUyxJQUFBUyxNQUNGZCxFQUFFLElBQUFjLE1BREFiLEVBQUEsSUFBQWEsTUF0QmJaLEVBQUEsSUFBQVksTUEwQkhYLEVB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QixFQUF6RnNDLE9BQW9HeEMsTUFBTyxFQUFDZCxFQUFNc0QsT0FBR3hDLE9BQVFYLEtBRTdIb0IsU0FBT2tDLGNBQU8sYUFBQW1CLGlCQUFkLFFBQUEsV0FpQkExRCxTQUFBQyxjQUFBLFlBQUErQyxNQUFBLGdCQUNBaEQsU0FBQUMsY0FBQSxhQUFBK0MsTUFBQSxnQkFDQWtCLFdBQUFDLE9BQUEsRUFDQUQsV0FBQUUsUUFBQSxHQUlBZCxZQUFBNUIsRUFBQSxJQW9MQTJDLEVBQVFYLGlCQUFpQixhQUFhYixHQTlCbkNuQyxFQUFPZ0QsaUJBQVYsV0FBNkJGLEdBcEo3QkYsWUFBQSxXQUNBdEIsR0FBQSxFQUVBLEtBREFKLEdBQUEsS0FFQWUsR0FBQSxFQUNBZixFQUFBLElBRUE1QiwwQ0FtVEosSUFBSUYsRUFBUWxCLEtBcENBd0QsRUFBSyxJQUFPOUIsTUFFUmdFLEVBQUFBLElBQUFBLEVBQVdsRixLQUFBSyxVQUFXSCxJQUNsQjRFLEVBQUFBLE9BQUFBLFdBRUhwRSxFQUFFc0MsT0FISEEiLCJmaWxlIjoiY2FuR2FtZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIGNhckdhbWUge1xyXG4gICAgY29uc3RydWN0b3Ioc3BlZWQ9MTApIHtcclxuICAgICAgICB0aGlzLnNwZWVkID0gc3BlZWRcclxuICAgICAgICAvLyB0aGlzLnJvdCA9IHdpbmRvdy5pbm5lckhlaWdodCAvIHdpbmRvdy5pbm5lcldpZHRoXHJcbiAgICAgICAgdGhpcy5tYWluU2l6ZSA9IHtcclxuICAgICAgICAgICAgd2lkdGg6IHdpbmRvdy5pbm5lcldpZHRoLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodFxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyB0aGlzLnJvdCA9IDEzMzQvNzUwXHJcbiAgICAgICAgdGhpcy5yb3QgPSB0aGlzLm1haW5TaXplLmhlaWdodCAvIHRoaXMubWFpblNpemUud2lkdGhcclxuICAgICAgICB0aGlzLmltZ3MgPSB7XHJcbiAgICAgICAgICAgIHJvYWRpbWc6IHtcclxuICAgICAgICAgICAgICAgIHNyYzogJy4vaW1hZ2VzL3JvYWQuanBnJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB1c2VyQ2FyOiB7XHJcbiAgICAgICAgICAgICAgICBzcmM6ICcuL2ltYWdlcy9nYW1lX3VzZXJjYXIucG5nJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB1c2VyQ2Fyd2FuOiB7XHJcbiAgICAgICAgICAgICAgICBzcmM6ICcuL2ltYWdlcy9nYW1lX3VzZXJjYXJfd2FuLnBuZydcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGFyZ2V0Q2FyOiB7XHJcbiAgICAgICAgICAgICAgICBzcmM6ICcuL2ltYWdlcy9nYW1lX3RhcmdldGNhci5wbmcnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRhcmdldENhcmJyazoge1xyXG4gICAgICAgICAgICAgICAgc3JjOiAnLi9pbWFnZXMvZ2FtZV90YXJnZXRjYXJfYnJrLnBuZydcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZ2FtZW92ZXJDYXI6IHtcclxuICAgICAgICAgICAgICAgIHNyYzogJy4vaW1hZ2VzL3doaXRlX2JyYWtlc19nYW1lb3Zlci5wbmcnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNjb3JlQmc6IHtcclxuICAgICAgICAgICAgICAgIHNyYzogJy4vaW1hZ2VzL2dhbWUtc2Vjb25kYmcucG5nJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvdmVyaW1nOiB7XHJcbiAgICAgICAgICAgICAgICBzcmM6ICcuL2ltYWdlcy9nYW1lb3Zlcl9uZWFyLmpwZydcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGluaXQoKSB7XHJcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpc1xyXG4gICAgICAgIGxldCBjYW4xID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NhbnZhcycpXHJcbiAgICAgICAgY2FuMS53aWR0aCA9IF9zZWxmLm1haW5TaXplLndpZHRoXHJcbiAgICAgICAgY2FuMS5oZWlnaHQgPSBfc2VsZi5tYWluU2l6ZS5oZWlnaHRcclxuICAgICAgICAvLyBjYW4xLndpZHRoID0gMzc1XHJcbiAgICAgICAgLy8gY2FuMS5oZWlnaHQgPSA2NjdcclxuICAgICAgICBsZXQgcm9hZGltZzEgPSBuZXcgSW1hZ2UoKVxyXG4gICAgICAgIGxldCByb2FkaW1nMiA9IG5ldyBJbWFnZSgpXHJcbiAgICAgICAgbGV0IHVzZXJDYXIgPSBuZXcgSW1hZ2UoKVxyXG4gICAgICAgIGxldCB1c2VyQ2Fyd2FuID0gbmV3IEltYWdlKClcclxuICAgICAgICBsZXQgdGFyZ2V0Q2FyID0gbmV3IEltYWdlKClcclxuICAgICAgICBsZXQgdGFyZ2V0Q2FyYnJrID0gbmV3IEltYWdlKClcclxuICAgICAgICBsZXQgZ2FtZW92ZXJDYXIgPSBuZXcgSW1hZ2UoKVxyXG4gICAgICAgIGxldCBzY29yZUJnID0gbmV3IEltYWdlKClcclxuICAgICAgICBsZXQgb3ZlckltZyA9IG5ldyBJbWFnZSgpXHJcblxyXG4gICAgICAgIGxldCBjYW5jdHggPSBjYW4xLmdldENvbnRleHQoJzJkJylcclxuICAgICAgICBsZXQgeTFcclxuICAgICAgICBsZXQgeTJcclxuICAgICAgICBsZXQgeTNcclxuICAgICAgICBsZXQgeTRcclxuICAgICAgICBsZXQgb2JqeFxyXG4gICAgICAgIGxldCB0YXJnZXRZID0gMlxyXG4gICAgICAgIGxldCBvZmZzZXRZID0gMTUwXHJcbiAgICAgICAgbGV0IHVzZXJDYXJZXHJcbiAgICAgICAgbGV0IHRDYXJzcGVlZCA9IDcwXHJcbiAgICAgICAgbGV0IHNjb3JlID0gMFxyXG4gICAgICAgIGxldCBzZWMgPSAwXHJcbiAgICAgICAgbGV0IG1pbiA9IDBcclxuICAgICAgICBsZXQga2lsbyA9IDYwXHJcbiAgICAgICAgbGV0IGdhbWVTZXRpblxyXG4gICAgICAgIGxldCBvdmVyZ2FtZVNldGluXHJcbiAgICAgICAgbGV0IHRpbWVBZGRcclxuICAgICAgICBsZXQgdGltZURlbFxyXG4gICAgICAgIGxldCB0aW1lQ3VuXHJcbiAgICAgICAgbGV0IGN1biA9IDBcclxuICAgICAgICBsZXQgbWluY3VuID0gMFxyXG4gICAgICAgIGxldCBoYXJkY3VuID0gMFxyXG4gICAgICAgIC8vIGxldCBzdG9wID0gZmFsc2VcclxuICAgICAgICBsZXQgcGxheWJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGF5YnRuJylcclxuXHJcbiAgICAgICAgX3NlbGYuY2FuMSA9IGNhbjFcclxuICAgICAgICAvLyBfc2VsZi5jYW5jdHggPSBjYW5jdHhcclxuXHJcbiAgICAgICAgcm9hZGltZzEuc3JjID0gX3NlbGYuaW1ncy5yb2FkaW1nLnNyY1xyXG4gICAgICAgIHJvYWRpbWcyLnNyYyA9IF9zZWxmLmltZ3Mucm9hZGltZy5zcmNcclxuICAgICAgICB1c2VyQ2FyLnNyYyA9IF9zZWxmLmltZ3MudXNlckNhci5zcmNcclxuICAgICAgICB1c2VyQ2Fyd2FuLnNyYyA9IF9zZWxmLmltZ3MudXNlckNhcndhbi5zcmNcclxuICAgICAgICB0YXJnZXRDYXIuc3JjID0gX3NlbGYuaW1ncy50YXJnZXRDYXIuc3JjXHJcbiAgICAgICAgdGFyZ2V0Q2FyYnJrLnNyYyA9IF9zZWxmLmltZ3MudGFyZ2V0Q2FyYnJrLnNyY1xyXG4gICAgICAgIGdhbWVvdmVyQ2FyLnNyYyA9IF9zZWxmLmltZ3MuZ2FtZW92ZXJDYXIuc3JjXHJcbiAgICAgICAgc2NvcmVCZy5zcmMgPSBfc2VsZi5pbWdzLnNjb3JlQmcuc3JjXHJcbiAgICAgICAgb3ZlckltZy5zcmMgPSBfc2VsZi5pbWdzLm92ZXJpbWcuc3JjXHJcbiAgICAgICAgbGV0IHJvYWRCZzEgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKXtcclxuICAgICAgICAgICAgcm9hZGltZzEub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgbGV0IHJvYWRCZzIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKXtcclxuICAgICAgICAgICAgcm9hZGltZzIub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgbGV0IHVzZXJDYXJpbWcgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKXtcclxuICAgICAgICAgICAgdXNlckNhci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBsZXQgdXNlckNhcndhbmltZyA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpe1xyXG4gICAgICAgICAgICB1c2VyQ2Fyd2FuLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIGxldCB0YXJnZXRDYXJpbWcgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKXtcclxuICAgICAgICAgICAgdGFyZ2V0Q2FyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIGxldCB0YXJnZXRDYXJicmtpbWcgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKXtcclxuICAgICAgICAgICAgdGFyZ2V0Q2FyYnJrLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIGxldCBnYW1lb3ZlckNhcmltZyA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpe1xyXG4gICAgICAgICAgICBnYW1lb3ZlckNhci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBsZXQgc2NvcmVCZ2ltZyA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpe1xyXG4gICAgICAgICAgICBzY29yZUJnLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIGxldCBvdmVySW1nQmcgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKXtcclxuICAgICAgICAgICAgb3ZlckltZy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgX3NlbGYuY3JlYXRDYXIoKVxyXG4gICAgICAgIC8vIGxldCBjYXJPYmpzZXQgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpe1xyXG4gICAgICAgIC8vICAgICBfc2VsZi5jcmVhdENhcigpXHJcbiAgICAgICAgLy8gICAgIG9ianggPSBNYXRoLnJhbmRvbSgpIDwgMC41ID8gMzUgOiBjYW4xLndpZHRoIC0gKF9zZWxmLmNhck9iai53aWR0aC8yKzM1KVxyXG4gICAgICAgIC8vICAgICBjb25zb2xlLmxvZygnY2FyIGJ1bGlkJylcclxuICAgICAgICAvLyB9LCAxNTAwKVxyXG4gICAgICAgIC8vY2FudmFz55Wr6Z2i5Yid5aeL5YyWXHJcbiAgICAgICAgUHJvbWlzZS5hbGwoW3JvYWRCZzEscm9hZEJnMix1c2VyQ2FyaW1nLHVzZXJDYXJ3YW5pbWcsdGFyZ2V0Q2FyaW1nLHRhcmdldENhcmJya2ltZyxnYW1lb3ZlckNhcmltZyxzY29yZUJnaW1nLG92ZXJJbWdCZ10pLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHkxID0gLSgocm9hZGltZzEuaGVpZ2h0L19zZWxmLnJvdCktY2FuMS5oZWlnaHQpXHJcbiAgICAgICAgICAgIGNhbmN0eC5kcmF3SW1hZ2Uocm9hZGltZzEsIDAsIDAsIHJvYWRpbWcxLndpZHRoLCByb2FkaW1nMS5oZWlnaHQsIDAsIHkxLCBjYW4xLndpZHRoLCByb2FkaW1nMS5oZWlnaHQvX3NlbGYucm90KVxyXG4gICAgICAgICAgICB5MiA9IC0ocm9hZGltZzIuaGVpZ2h0L19zZWxmLnJvdC15MSlcclxuICAgICAgICAgICAgY2FuY3R4LmRyYXdJbWFnZShyb2FkaW1nMiwgMCwgMCwgcm9hZGltZzIud2lkdGgsIHJvYWRpbWcyLmhlaWdodCwgMCwgeTIsIGNhbjEud2lkdGgsIHJvYWRpbWcyLmhlaWdodC9fc2VsZi5yb3QpXHJcbiAgICAgICAgICAgIHVzZXJDYXJZID0gY2FuMS5oZWlnaHQtKHVzZXJDYXIuaGVpZ2h0LzIpLTEwXHJcbiAgICAgICAgICAgIGNhbmN0eC5kcmF3SW1hZ2UodXNlckNhciwgMCwgMCwgdXNlckNhci53aWR0aCwgdXNlckNhci5oZWlnaHQsIChjYW4xLndpZHRoLzIpLSh1c2VyQ2FyLndpZHRoLzQpLCB1c2VyQ2FyWSwgdXNlckNhci53aWR0aC8yLCB1c2VyQ2FyLmhlaWdodC8yKVxyXG4gICAgICAgICAgICBjYW5jdHguZHJhd0ltYWdlKHRhcmdldENhciwgMCwgMCwgdGFyZ2V0Q2FyLndpZHRoLCB0YXJnZXRDYXIuaGVpZ2h0LCAoY2FuMS53aWR0aC8yKS0odGFyZ2V0Q2FyLndpZHRoLzQpLCBvZmZzZXRZLCB0YXJnZXRDYXIud2lkdGgvMiwgdGFyZ2V0Q2FyLmhlaWdodC8yKVxyXG4gICAgICAgICAgICBjYW5jdHguZHJhd0ltYWdlKHNjb3JlQmcsIDAsIDAsIHNjb3JlQmcud2lkdGgsIHNjb3JlQmcuaGVpZ2h0LCAoY2FuMS53aWR0aC1zY29yZUJnLndpZHRoLzIpLTEwLCAyMCwgc2NvcmVCZy53aWR0aC8yLCBzY29yZUJnLmhlaWdodC8yKVxyXG4gICAgICAgICAgICBjYW5jdHguZmlsbFN0eWxlID0gXCIjZmZmZmZmXCJcclxuICAgICAgICAgICAgY2FuY3R4LmZvbnQgPSAnaXRhbGljIDIwcHggSGVsdmV0aWNhJ1xyXG4gICAgICAgICAgICBjYW5jdHguZmlsbFRleHQoJ2ttL2gnLCA3MCwgNTApXHJcbiAgICAgICAgICAgIGNhbmN0eC5mb250ID0gJ2l0YWxpYyAzMHB4IEhlbHZldGljYSdcclxuICAgICAgICAgICAgY2FuY3R4LnNoYWRvd09mZnNldFggPSAzXHJcbiAgICAgICAgICAgIGNhbmN0eC5zaGFkb3dPZmZzZXRZID0gM1xyXG4gICAgICAgICAgICBjYW5jdHguc2hhZG93Q29sb3IgPSBcInJnYmEoMCwwLDAsMC4zKVwiXHJcbiAgICAgICAgICAgIGNhbmN0eC5maWxsVGV4dCgnMDAnLCBjYW4xLndpZHRoLTU4LCA0OClcclxuICAgICAgICAgICAgY2FuY3R4LmZpbGxUZXh0KCc6JywgY2FuMS53aWR0aC03MywgNDgpXHJcbiAgICAgICAgICAgIGNhbmN0eC5maWxsVGV4dCgnMCcsIGNhbjEud2lkdGgtOTUsIDQ4KVxyXG4gICAgICAgICAgICBjYW5jdHguZm9udCA9ICdpdGFsaWMgNDBweCBIZWx2ZXRpY2EnXHJcbiAgICAgICAgICAgIGNhbmN0eC5maWxsVGV4dChNYXRoLmZsb29yKGtpbG8pLCAyMCwgNTApXHJcbiAgICAgICAgICAgIC8vIGdhbWVTdGFydCgpXHJcbiAgICAgICAgICAgIG9ianggPSBNYXRoLnJhbmRvbSgpIDwgMC41ID8gMzUgOiBjYW4xLndpZHRoIC0gKF9zZWxmLmNhck9iai53aWR0aC8yKzM1KVxyXG4gICAgICAgICAgICB5NCA9IGNhbjEuaGVpZ2h0XHJcbiAgICAgICAgICAgIGNhbmN0eC5kcmF3SW1hZ2UoX3NlbGYuY2FyT2JqLCAwLCAwLCBfc2VsZi5jYXJPYmoud2lkdGgsIF9zZWxmLmNhck9iai5oZWlnaHQsIG9iangsIHk0LCBfc2VsZi5jYXJPYmoud2lkdGgvMiwgX3NlbGYuY2FyT2JqLmhlaWdodC8yKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN0YXJ0YnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAvLyBsZXQgc2Vjb25kID0gM1xyXG4gICAgICAgICAgICAvLyBsZXQgZ2FtZUN1biA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICAgICAgLy8gICAgIHNlY29uZCAtPSAxXHJcbiAgICAgICAgICAgIC8vICAgICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FtZWN1bicpLmlubmVySFRNTCA9IHNlY29uZFxyXG4gICAgICAgICAgICAvLyAgICAgaWYoc2Vjb25kIDw9IDApIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FtZWN1bicpLmlubmVySFRNTCA9ICdHTyEhJ1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIGNsZWFySW50ZXJ2YWwoZ2FtZUN1bilcclxuICAgICAgICAgICAgLy8gICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGVjb2FycicpLnN0eWxlID0gJ2Rpc3BsYXk6IG5vbmUnXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdGFydGJ0bicpLnN0eWxlID0gJ2Rpc3BsYXk6IG5vbmUnXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGluZGV4X3ZpZXcucG9wdXAgPSBmYWxzZVxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBpbmRleF92aWV3LnBvcFBhZ2UgPSAnJ1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBnYW1lU3RhcnQoKVxyXG4gICAgICAgICAgICAvLyAgICAgICAgIH0sIDEwMDApXHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vIH0sIDEwMDApXHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kZWNvYXJyJykuc3R5bGUgPSAnZGlzcGxheTogbm9uZSdcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN0YXJ0YnRuJykuc3R5bGUgPSAnZGlzcGxheTogbm9uZSdcclxuICAgICAgICAgICAgaW5kZXhfdmlldy5wb3B1cCA9IGZhbHNlXHJcbiAgICAgICAgICAgIGluZGV4X3ZpZXcucG9wUGFnZSA9ICcnXHJcbiAgICAgICAgICAgIGdhbWVTdGFydCgpXHJcbiAgICAgICAgfSlcclxuICAgICAgICBmdW5jdGlvbiBnYW1lU3RhcnQoKSB7XHJcbiAgICAgICAgICAgIGdhbWVTZXRpbiA9IHNldEludGVydmFsKGRyYXdDYW4sIDIwKVxyXG4gICAgICAgICAgICBnYW1lUGxheSgpXHJcbiAgICAgICAgICAgIHRpbWVDdW4gPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzY29yZSArPSAxXHJcbiAgICAgICAgICAgICAgICBzZWMgKz0gMVxyXG4gICAgICAgICAgICAgICAgaWYoc2VjID49NjAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWluICs9IDFcclxuICAgICAgICAgICAgICAgICAgICBzZWMgPSAwXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIDEwMDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgLy8gICAgIHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vICAgICAgICAgdGFyZ2V0WSA9IE1hdGgucmFuZG9tKCkgPCAwLjUgPyAtMiA6IDJcclxuICAgICAgICAvLyAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRhcmdldFkpXHJcbiAgICAgICAgLy8gICAgIH0sIDEyMDApXHJcbiAgICAgICAgLy8gfSwgMTAwMDApXHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGRyYXdDYW4oKSB7XHJcbiAgICAgICAgICAgIGlmKHkxID4gY2FuMS5oZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgIHkxID0gLShyb2FkaW1nMS5oZWlnaHQvX3NlbGYucm90LXkyKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKHkyID4gY2FuMS5oZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgIHkyID0gLShyb2FkaW1nMi5oZWlnaHQvX3NlbGYucm90LXkxKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhbmN0eC5jbGVhclJlY3QoMCwwLGNhbjEud2lkdGgsY2FuMS5oZWlnaHQpXHJcbiAgICAgICAgICAgIGNhbmN0eC5kcmF3SW1hZ2Uocm9hZGltZzEsIDAsIDAsIHJvYWRpbWcxLndpZHRoLCByb2FkaW1nMS5oZWlnaHQsIDAsIHkxLCBjYW4xLndpZHRoLCByb2FkaW1nMS5oZWlnaHQvX3NlbGYucm90KVxyXG4gICAgICAgICAgICBjYW5jdHguZHJhd0ltYWdlKHJvYWRpbWcyLCAwLCAwLCByb2FkaW1nMi53aWR0aCwgcm9hZGltZzIuaGVpZ2h0LCAwLCB5MiwgY2FuMS53aWR0aCwgcm9hZGltZzIuaGVpZ2h0L19zZWxmLnJvdClcclxuICAgICAgICAgICAgY2FuY3R4LmRyYXdJbWFnZShzY29yZUJnLCAwLCAwLCBzY29yZUJnLndpZHRoLCBzY29yZUJnLmhlaWdodCwgKGNhbjEud2lkdGgtc2NvcmVCZy53aWR0aC8yKS0xMCwgMjAsIHNjb3JlQmcud2lkdGgvMiwgc2NvcmVCZy5oZWlnaHQvMilcclxuICAgICAgICAgICAgeTEgKz0gX3NlbGYuc3BlZWRcclxuICAgICAgICAgICAgeTIgKz0gX3NlbGYuc3BlZWRcclxuXHJcbiAgICAgICAgICAgIC8vIGlmKGtpbG8gPD0gNDApIHtcclxuICAgICAgICAgICAgLy8gICAgIG9mZnNldFkgLT0gX3NlbGYuc3BlZWQqMC4wNVxyXG4gICAgICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgICAgICAvLyBpZihzY29yZSA8PSAxMCkge1xyXG4gICAgICAgICAgICAvLyAgICAgb2Zmc2V0WSAtPSAoMy1raWxvKjAuMDUpXHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgaWYoa2lsbyA+PSA3MCkge1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0WSAtPSAodGFyZ2V0WS1raWxvKjAuMDMpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoa2lsbyA+PSA4MCkge1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0WSAtPSAodGFyZ2V0WS1raWxvKjAuMDIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoa2lsbyA+PSAxMDApIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldFkgPSAxXHJcbiAgICAgICAgICAgICAgICBvZmZzZXRZIC09ICh0YXJnZXRZLWtpbG8qMC4wMSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gdGFyZ2V0WSA9IDIgLy8g54We6LuK54K66LKg5YC8XHJcbiAgICAgICAgICAgIGlmKHNjb3JlID49IDUgJiYgc2NvcmUgPCAyMSkge1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0WSAtPSAodGFyZ2V0WS1raWxvKjAuMDI1KVxyXG4gICAgICAgICAgICAgICAgaWYoa2lsbyA+PSA5MCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1bisrXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoY3VuID49IDIwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFkgPSBNYXRoLnJhbmRvbSgpIDwgMC41ID8gLTAuMSA6IDJcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VuID0gMFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihzY29yZSA+PSAyMSAmJiBzY29yZSA8IDMxKSB7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXRZIC09ICh0YXJnZXRZLWtpbG8qMC4wMilcclxuICAgICAgICAgICAgICAgIGlmKGtpbG8gPj0gODUpIHtcclxuICAgICAgICAgICAgICAgICAgICBtaW5jdW4rK1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKG1pbmN1biA9PSAxMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRZID0gTWF0aC5yYW5kb20oKSA8IDAuNSA/IC0wLjEgOiAyXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKG1pbmN1biA9PSAxMykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRZID0gTWF0aC5yYW5kb20oKSA8IDAuNSA/IC0wLjEgOiAyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVyblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZihtaW5jdW4gPj0gMTUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWluY3VuID0gMFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGFyZ2V0WSA9IDIuNVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKHNjb3JlID49IDMxKSB7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXRZIC09ICh0YXJnZXRZLWtpbG8qMC4wMSlcclxuICAgICAgICAgICAgICAgIGlmKGtpbG8gPj0gODApIHtcclxuICAgICAgICAgICAgICAgICAgICBoYXJkY3VuKytcclxuICAgICAgICAgICAgICAgICAgICBpZihoYXJkY3VuID09IDEwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFkgPSBNYXRoLnJhbmRvbSgpIDwgMC41ID8gLTAuMTUgOiAyXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGhhcmRjdW4gPT0gMTIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0WSA9IE1hdGgucmFuZG9tKCkgPCAwLjUgPyAtMC4xNSA6IDJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoaGFyZGN1biA+PSAxMykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXJkY3VuID0gMFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHRhcmdldFkgPSAyLjdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvZmZzZXRZIC09ICh0YXJnZXRZLWtpbG8qMC4wMylcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3RhcmdldFk6ICcsIHRhcmdldFkpXHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdjdW46ICcsIGN1bilcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2hhcmRjdW46ICcsIGhhcmRjdW4pXHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG9mZnNldFkpXHJcblxyXG4gICAgICAgICAgICB5NCAtPSBNYXRoLnJhbmRvbSgpICogKDItMSkgKyAxXHJcbiAgICAgICAgICAgIGlmKHk0IDw9IC0gX3NlbGYuY2FyT2JqLmhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgeTQgPSBjYW4xLmhlaWdodFxyXG4gICAgICAgICAgICAgICAgb2JqeCA9IE1hdGgucmFuZG9tKCkgPCAwLjUgPyAzNSA6IGNhbjEud2lkdGggLSAoX3NlbGYuY2FyT2JqLndpZHRoLzIrMzUpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FuY3R4LmRyYXdJbWFnZShfc2VsZi5jYXJPYmosIDAsIDAsIF9zZWxmLmNhck9iai53aWR0aCwgX3NlbGYuY2FyT2JqLmhlaWdodCwgb2JqeCwgeTQsIF9zZWxmLmNhck9iai53aWR0aC8yLCBfc2VsZi5jYXJPYmouaGVpZ2h0LzIpXHJcblxyXG4gICAgICAgICAgICBjYW5jdHguZmlsbFN0eWxlID0gXCIjZmZmZmZmXCJcclxuICAgICAgICAgICAgY2FuY3R4LmZvbnQgPSAnaXRhbGljIDIwcHggSGVsdmV0aWNhJ1xyXG4gICAgICAgICAgICBjYW5jdHguZmlsbFRleHQoJ2ttL2gnLCA3MCwgNTApXHJcbiAgICAgICAgICAgIGNhbmN0eC5mb250ID0gJ2l0YWxpYyAzMHB4IEhlbHZldGljYSdcclxuICAgICAgICAgICAgY2FuY3R4LnNoYWRvd09mZnNldFggPSAzXHJcbiAgICAgICAgICAgIGNhbmN0eC5zaGFkb3dPZmZzZXRZID0gM1xyXG4gICAgICAgICAgICBjYW5jdHguc2hhZG93Q29sb3IgPSBcInJnYmEoMCwwLDAsMC4zKVwiXHJcbiAgICAgICAgICAgIGNhbmN0eC5maWxsVGV4dChzZWMsIGNhbjEud2lkdGgtNTgsIDQ4KVxyXG4gICAgICAgICAgICBjYW5jdHguZmlsbFRleHQoJzonLCBjYW4xLndpZHRoLTczLCA0NilcclxuICAgICAgICAgICAgY2FuY3R4LmZpbGxUZXh0KG1pbiwgY2FuMS53aWR0aC05NSwgNDgpXHJcbiAgICAgICAgICAgIGNhbmN0eC5mb250ID0gJ2l0YWxpYyA0MHB4IEhlbHZldGljYSdcclxuICAgICAgICAgICAgY2FuY3R4LmZpbGxUZXh0KE1hdGguZmxvb3Ioa2lsbyksIDIwLCA1MClcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNhbmN0eC5kcmF3SW1hZ2UodXNlckNhciwgMCwgMCwgdXNlckNhci53aWR0aCwgdXNlckNhci5oZWlnaHQsIChjYW4xLndpZHRoLzIpLSh1c2VyQ2FyLndpZHRoLzQpLCBjYW4xLmhlaWdodC0odXNlckNhci5oZWlnaHQvMiktMTAsIHVzZXJDYXIud2lkdGgvMiwgdXNlckNhci5oZWlnaHQvMilcclxuICAgICAgICAgICAgLy8gY2FuY3R4LmZpbGxSZWN0KGNhbjEud2lkdGgvMi01MCxjYW4xLmhlaWdodCAtIDE1MCwxMDAsMTUwKVxyXG4gICAgICAgICAgICBpZih0YXJnZXRZIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgY2FuY3R4LmRyYXdJbWFnZSh0YXJnZXRDYXJicmssIDAsIDAsIHRhcmdldENhci53aWR0aCwgdGFyZ2V0Q2FyLmhlaWdodCwgKGNhbjEud2lkdGgvMiktKHRhcmdldENhci53aWR0aC80KSwgb2Zmc2V0WSwgdGFyZ2V0Q2FyLndpZHRoLzIsIHRhcmdldENhci5oZWlnaHQvMilcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNhbmN0eC5kcmF3SW1hZ2UodGFyZ2V0Q2FyLCAwLCAwLCB0YXJnZXRDYXIud2lkdGgsIHRhcmdldENhci5oZWlnaHQsIChjYW4xLndpZHRoLzIpLSh0YXJnZXRDYXIud2lkdGgvNCksIG9mZnNldFksIHRhcmdldENhci53aWR0aC8yLCB0YXJnZXRDYXIuaGVpZ2h0LzIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gY2FuY3R4LmZpbGxSZWN0KGNhbjEud2lkdGgvMi01MCxvZmZzZXRZLDEwMCwxNTApXHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHkxKVxyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhfc2VsZi5zcGVlZClcclxuXHJcbiAgICAgICAgICAgIGxldCBvdmVyTGluZSA9IDAgLSB0YXJnZXRDYXIuaGVpZ2h0LzJcclxuICAgICAgICAgICAgbGV0IG5lYXJMaW5lID0gY2FuMS5oZWlnaHQgLSB1c2VyQ2FyLmhlaWdodC8yIC0gdGFyZ2V0Q2FyLmhlaWdodC8yICsgNDBcclxuICAgICAgICAgICAgaWYob2Zmc2V0WSA+PSBuZWFyTGluZSAtIDMwKSB7XHJcbiAgICAgICAgICAgICAgICBjYW5jdHguZHJhd0ltYWdlKHVzZXJDYXJ3YW4sIDAsIDAsIHVzZXJDYXJ3YW4ud2lkdGgsIHVzZXJDYXJ3YW4uaGVpZ2h0LCAoY2FuMS53aWR0aC8yKS0odXNlckNhcndhbi53aWR0aC80KSwgY2FuMS5oZWlnaHQtKHVzZXJDYXJ3YW4uaGVpZ2h0LzIpLTEwLCB1c2VyQ2Fyd2FuLndpZHRoLzIsIHVzZXJDYXJ3YW4uaGVpZ2h0LzIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYob2Zmc2V0WSA+PSBuZWFyTGluZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ+mAsuWFpeWuieWFqOi3nemboicpXHJcbiAgICAgICAgICAgICAgICAvLyBjbGVhckludGVydmFsKGdhbWVTZXRpbilcclxuICAgICAgICAgICAgICAgIC8vIHBsYXlidG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsaGFuZGxlU3RhcnQpXHJcbiAgICAgICAgICAgICAgICAvLyBwbGF5YnRuLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJyxoYW5kbGVFbmQpXHJcbiAgICAgICAgICAgICAgICAvLyBjbGVhckludGVydmFsKHRpbWVEZWwpXHJcbiAgICAgICAgICAgICAgICAvLyBjbGVhckludGVydmFsKHRpbWVBZGQpXHJcbiAgICAgICAgICAgICAgICAvLyBjbGVhckludGVydmFsKHRpbWVDdW4pXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gY2xlYXJJbnRlcnZhbChjYXJPYmpzZXQpXHJcbiAgICAgICAgICAgICAgICAvLyBnYW1lb3Zlck5lYXIoKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZihvZmZzZXRZIDw9IG92ZXJMaW5lKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygn6LuK5bey6YGgJylcclxuICAgICAgICAgICAgICAgIC8vIGNsZWFySW50ZXJ2YWwoZ2FtZVNldGluKVxyXG4gICAgICAgICAgICAgICAgLy8gcGxheWJ0bi5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JyxoYW5kbGVTdGFydClcclxuICAgICAgICAgICAgICAgIC8vIHBsYXlidG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLGhhbmRsZUVuZClcclxuICAgICAgICAgICAgICAgIC8vIGNsZWFySW50ZXJ2YWwodGltZURlbClcclxuICAgICAgICAgICAgICAgIC8vIGNsZWFySW50ZXJ2YWwodGltZUFkZClcclxuICAgICAgICAgICAgICAgIC8vIGNsZWFySW50ZXJ2YWwodGltZUN1bilcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBjbGVhckludGVydmFsKGNhck9ianNldClcclxuICAgICAgICAgICAgICAgIC8vIGdhbWVvdmVyRmFyKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmdW5jdGlvbiBnYW1lUGxheSgpIHtcclxuICAgICAgICAgICAgcGxheWJ0bi5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JyxoYW5kbGVTdGFydClcclxuICAgICAgICAgICAgcGxheWJ0bi5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsaGFuZGxlRW5kKVxyXG4gICAgICAgIH1cclxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVTdGFydChlbCkge1xyXG4gICAgICAgICAgICBlbC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMpXHJcbiAgICAgICAgICAgIHRoaXMuc3R5bGUuYmFja2dyb3VuZCA9ICd1cmwoLi9pbWFnZXMvZ2FtZV9icmFrZXMtb24ucG5nKSBjZW50ZXIgdG9wIG5vLXJlcGVhdCdcclxuICAgICAgICAgICAgdGhpcy5zdHlsZS5iYWNrZ3JvdW5kU2l6ZSAgPSAnY292ZXInXHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZURlbClcclxuICAgICAgICAgICAgdGltZUFkZCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBraWxvICs9IDEuNVxyXG4gICAgICAgICAgICAgICAgX3NlbGYuc3BlZWQgKz0gMS41XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmKF9zZWxmLnNwZWVkID49IDUwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3NlbGYuc3BlZWQgPSA1MFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoa2lsbyA+PSA5OSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGtpbG8gPSA5OVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coX3NlbGYuc3BlZWQpXHJcbiAgICAgICAgICAgIH0sMzAwKVxyXG4gICAgICAgIH1cclxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVFbmQoZWwpIHtcclxuICAgICAgICAgICAgZWwucHJldmVudERlZmF1bHQoKVxyXG4gICAgICAgICAgICB0aGlzLnN0eWxlLmJhY2tncm91bmQgPSAndXJsKC4vaW1hZ2VzL2dhbWVfYnJha2VzLW9mZi5wbmcpIGNlbnRlciB0b3Agbm8tcmVwZWF0J1xyXG4gICAgICAgICAgICB0aGlzLnN0eWxlLmJhY2tncm91bmRTaXplICA9ICdjb3ZlcidcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lQWRkKVxyXG4gICAgICAgICAgICB0aW1lRGVsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGtpbG8gLT0gMi41XHJcbiAgICAgICAgICAgICAgICBfc2VsZi5zcGVlZCAtPSBfc2VsZi5zcGVlZCowLjA4XHJcbiAgICAgICAgICAgICAgICBpZihfc2VsZi5zcGVlZCA8PSAxNSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF9zZWxmLnNwZWVkID0gMTVcclxuICAgICAgICAgICAgICAgICAgICAvLyBjbGVhckludGVydmFsKHRpbWVEZWwpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZihraWxvIDw9IDYwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAga2lsbyA9IDYwXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhfc2VsZi5zcGVlZClcclxuICAgICAgICAgICAgfSwzMDApXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIGdhbWVvdmVyTmVhcigpIHtcclxuICAgICAgICAgICAgaW5kZXhfdmlldy5wb3B1cCA9IHRydWVcclxuICAgICAgICAgICAgaW5kZXhfdmlldy5wb3BQYWdlID0gJ2dhbWVvdmVyJ1xyXG4gICAgICAgICAgICBpbmRleF92aWV3LnVzZXJTY29yZSA9IHNjb3JlXHJcbiAgICAgICAgICAgIGluZGV4X3ZpZXcudXNlck1pbiA9IG1pblxyXG4gICAgICAgICAgICBpbmRleF92aWV3LnVzZXJTZWMgPSBzZWNcclxuICAgICAgICAgICAgLy8gaW5kZXhfdmlldy5zYXZlTGVhZGVyKClcclxuICAgICAgICAgICAgaWYoc2NvcmUgPCAxMCkge1xyXG4gICAgICAgICAgICAgICAgaW5kZXhfdmlldy5yZXN1bHRXb3JkID0gJ+aJjeWJm+mWi+Wni+Wwsee0r+S6hiE/IOmAmeimgeaAjum6vOmWi+i7iuWHuumWgOWVij88YnI+6K6TQUxMIE5FVyBTRU5UUkHkvobmi6/mlZHkvaDlkKfvvIEnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoc2NvcmUgPj0gMTAgJiYgc2NvcmUgPD0gMzApIHtcclxuICAgICAgICAgICAgICAgIGluZGV4X3ZpZXcucmVzdWx0V29yZCA9ICfmhJ/oprrliLDnlrLmhorkuobll44/54++5a+m5Y+v5rKS6YCZ6bq86LyV6ayG5ZGifjxicj7ovJXprIbmm7TmnInlnovlsLHpnaBBTEwgTkVXIFNFTlRSQe+8gSdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihzY29yZSA+PSAzMSkge1xyXG4gICAgICAgICAgICAgICAgaW5kZXhfdmlldy5yZXN1bHRXb3JkID0gJ+Wkqua9ruS6huWQpyHkvaDoqbLkuI3mnIPkuIDlgIvkurrplovou4rnkrDpgY7ls7Y/PGJyPumCo+S9oOS4gOWumuimgeippuippkFMTCBORVcgU0VOVFJB77yBJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaW5kZXhfdmlldy5wb3B1cCA9IGZhbHNlXHJcbiAgICAgICAgICAgICAgICBpbmRleF92aWV3LnBvcFBhZ2UgPSAnJ1xyXG4gICAgICAgICAgICAgICAgbGV0IHNwZWVkID0gOFxyXG4gICAgICAgICAgICAgICAgLy8geTMgPSAtKG92ZXJJbWcuaGVpZ2h0L19zZWxmLnJvdClcclxuICAgICAgICAgICAgICAgIHkzID0gLShnYW1lb3ZlckNhci5oZWlnaHQvMilcclxuICAgICAgICAgICAgICAgIG92ZXJnYW1lU2V0aW4gPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYoeTEgPiBjYW4xLmhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICB5MSA9IC0ocm9hZGltZzEuaGVpZ2h0L19zZWxmLnJvdC15MilcclxuICAgICAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYoeTIgPiBjYW4xLmhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICB5MiA9IC0ocm9hZGltZzIuaGVpZ2h0L19zZWxmLnJvdC15MSlcclxuICAgICAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICAgICAgeTEgKz0gc3BlZWRcclxuICAgICAgICAgICAgICAgICAgICB5MiArPSBzcGVlZFxyXG4gICAgICAgICAgICAgICAgICAgIHkzICs9IHNwZWVkXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gb2Zmc2V0WSArPSBzcGVlZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHVzZXJDYXJZICs9IHNwZWVkXHJcbiAgICAgICAgICAgICAgICAgICAgY2FuY3R4LmNsZWFyUmVjdCgwLDAsY2FuMS53aWR0aCxjYW4xLmhlaWdodClcclxuICAgICAgICAgICAgICAgICAgICBjYW5jdHguZHJhd0ltYWdlKHJvYWRpbWcxLCAwLCAwLCByb2FkaW1nMS53aWR0aCwgcm9hZGltZzEuaGVpZ2h0LCAwLCB5MSwgY2FuMS53aWR0aCwgcm9hZGltZzEuaGVpZ2h0L19zZWxmLnJvdClcclxuICAgICAgICAgICAgICAgICAgICBjYW5jdHguZHJhd0ltYWdlKHJvYWRpbWcyLCAwLCAwLCByb2FkaW1nMi53aWR0aCwgcm9hZGltZzIuaGVpZ2h0LCAwLCB5MiwgY2FuMS53aWR0aCwgcm9hZGltZzIuaGVpZ2h0L19zZWxmLnJvdClcclxuICAgICAgICAgICAgICAgICAgICAvLyBjYW5jdHguZHJhd0ltYWdlKG92ZXJJbWcsIDAsIDAsIG92ZXJJbWcud2lkdGgsIG92ZXJJbWcuaGVpZ2h0LCAwLCB5MywgY2FuMS53aWR0aCwgb3ZlckltZy5oZWlnaHQvX3NlbGYucm90KVxyXG4gICAgICAgICAgICAgICAgICAgIGNhbmN0eC5kcmF3SW1hZ2UoZ2FtZW92ZXJDYXIsIDAsIDAsIGdhbWVvdmVyQ2FyLndpZHRoLCBnYW1lb3ZlckNhci5oZWlnaHQsIChjYW4xLndpZHRoLzIpLSh1c2VyQ2FyLndpZHRoLzQpLCB5MywgZ2FtZW92ZXJDYXIud2lkdGgvMiwgZ2FtZW92ZXJDYXIuaGVpZ2h0LzIpXHJcbiAgICAgICAgICAgICAgICAgICAgY2FuY3R4LmRyYXdJbWFnZShzY29yZUJnLCAwLCAwLCBzY29yZUJnLndpZHRoLCBzY29yZUJnLmhlaWdodCwgKGNhbjEud2lkdGgtc2NvcmVCZy53aWR0aC8yKS0xMCwgMjAsIHNjb3JlQmcud2lkdGgvMiwgc2NvcmVCZy5oZWlnaHQvMilcclxuICAgICAgICAgICAgICAgICAgICBjYW5jdHguZmlsbFN0eWxlID0gXCIjZmZmZmZmXCJcclxuICAgICAgICAgICAgICAgICAgICBjYW5jdHguZm9udCA9ICdpdGFsaWMgMjBweCBIZWx2ZXRpY2EnXHJcbiAgICAgICAgICAgICAgICAgICAgY2FuY3R4LmZpbGxUZXh0KCdrbS9oJywgNzAsIDUwKVxyXG4gICAgICAgICAgICAgICAgICAgIGNhbmN0eC5mb250ID0gJ2l0YWxpYyAzMHB4IEhlbHZldGljYSdcclxuICAgICAgICAgICAgICAgICAgICBjYW5jdHguc2hhZG93T2Zmc2V0WCA9IDNcclxuICAgICAgICAgICAgICAgICAgICBjYW5jdHguc2hhZG93T2Zmc2V0WSA9IDNcclxuICAgICAgICAgICAgICAgICAgICBjYW5jdHguc2hhZG93Q29sb3IgPSBcInJnYmEoMCwwLDAsMC4zKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgY2FuY3R4LmZpbGxUZXh0KHNlYywgY2FuMS53aWR0aC01OCwgNDgpXHJcbiAgICAgICAgICAgICAgICAgICAgY2FuY3R4LmZpbGxUZXh0KCc6JywgY2FuMS53aWR0aC03MywgNDYpXHJcbiAgICAgICAgICAgICAgICAgICAgY2FuY3R4LmZpbGxUZXh0KG1pbiwgY2FuMS53aWR0aC05NSwgNDgpXHJcbiAgICAgICAgICAgICAgICAgICAgY2FuY3R4LmZvbnQgPSAnaXRhbGljIDQwcHggSGVsdmV0aWNhJ1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbmN0eC5maWxsVGV4dChNYXRoLmZsb29yKGtpbG8pLCAyMCwgNTApXHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY2FuY3R4LmRyYXdJbWFnZSh1c2VyQ2FyLCAwLCAwLCB1c2VyQ2FyLndpZHRoLCB1c2VyQ2FyLmhlaWdodCwgKGNhbjEud2lkdGgvMiktKHVzZXJDYXIud2lkdGgvNCksIHVzZXJDYXJZLCB1c2VyQ2FyLndpZHRoLzIsIHVzZXJDYXIuaGVpZ2h0LzIpXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FuY3R4LmZpbGxSZWN0KGNhbjEud2lkdGgvMi01MCxjYW4xLmhlaWdodCAtIDE1MCwxMDAsMTUwKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHRhcmdldFkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbmN0eC5kcmF3SW1hZ2UodGFyZ2V0Q2FyYnJrLCAwLCAwLCB0YXJnZXRDYXIud2lkdGgsIHRhcmdldENhci5oZWlnaHQsIChjYW4xLndpZHRoLzIpLSh0YXJnZXRDYXIud2lkdGgvNCksIG9mZnNldFksIHRhcmdldENhci53aWR0aC8yLCB0YXJnZXRDYXIuaGVpZ2h0LzIpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FuY3R4LmRyYXdJbWFnZSh0YXJnZXRDYXIsIDAsIDAsIHRhcmdldENhci53aWR0aCwgdGFyZ2V0Q2FyLmhlaWdodCwgKGNhbjEud2lkdGgvMiktKHRhcmdldENhci53aWR0aC80KSwgb2Zmc2V0WSwgdGFyZ2V0Q2FyLndpZHRoLzIsIHRhcmdldENhci5oZWlnaHQvMilcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoeTMgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKG92ZXJnYW1lU2V0aW4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleF92aWV3LnN0ZXAgPSAncmVhc29uJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhfdmlldy5yZWFzb24gPSAnbmVhcidcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTUwMClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgMjApO1xyXG4gICAgICAgICAgICB9LCAxNTAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gZ2FtZW92ZXJGYXIoKSB7XHJcbiAgICAgICAgICAgIGluZGV4X3ZpZXcucG9wdXAgPSB0cnVlXHJcbiAgICAgICAgICAgIGluZGV4X3ZpZXcucG9wUGFnZSA9ICdnYW1lb3ZlcidcclxuICAgICAgICAgICAgaW5kZXhfdmlldy51c2VyU2NvcmUgPSBzY29yZVxyXG4gICAgICAgICAgICBpbmRleF92aWV3LnVzZXJNaW4gPSBtaW5cclxuICAgICAgICAgICAgaW5kZXhfdmlldy51c2VyU2VjID0gc2VjXHJcbiAgICAgICAgICAgIC8vIGluZGV4X3ZpZXcuc2F2ZUxlYWRlcigpXHJcbiAgICAgICAgICAgIGlmKHNjb3JlIDwgMTApIHtcclxuICAgICAgICAgICAgICAgIGluZGV4X3ZpZXcucmVzdWx0V29yZCA9ICfmiY3liZvplovlp4vlsLHntK/kuoYhPyDpgJnopoHmgI7purzplovou4rlh7rploDllYo/PGJyPuiuk0FMTCBORVcgU0VOVFJB5L6G5ouv5pWR5L2g5ZCn77yBJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKHNjb3JlID49IDEwICYmIHNjb3JlIDw9IDMwKSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleF92aWV3LnJlc3VsdFdvcmQgPSAn5oSf6Ka65Yiw55ay5oaK5LqG5ZeOP+ePvuWvpuWPr+aykumAmem6vOi8lemshuWRon48YnI+6LyV6ayG5pu05pyJ5Z6L5bCx6Z2gQUxMIE5FVyBTRU5UUkHvvIEnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoc2NvcmUgPj0gMzEpIHtcclxuICAgICAgICAgICAgICAgIGluZGV4X3ZpZXcucmVzdWx0V29yZCA9ICflpKrmva7kuoblkKch5L2g6Kmy5LiN5pyD5LiA5YCL5Lq66ZaL6LuK55Kw6YGO5bO2Pzxicj7pgqPkvaDkuIDlrpropoHoqaboqaZBTEwgTkVXIFNFTlRSQe+8gSdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgaW5kZXhfdmlldy5wb3B1cCA9IGZhbHNlXHJcbiAgICAgICAgICAgICAgICBpbmRleF92aWV3LnBvcFBhZ2UgPSAnJ1xyXG4gICAgICAgICAgICAgICAgaW5kZXhfdmlldy5zdGVwID0gJ3JlYXNvbidcclxuICAgICAgICAgICAgICAgIGluZGV4X3ZpZXcucmVhc29uID0gJ2ZhcidcclxuICAgICAgICAgICAgfSwgMTIwMClcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjcmVhdENhcigpIHtcclxuICAgICAgICBsZXQgX3NlbGYgPSB0aGlzXHJcbiAgICAgICAgbGV0IGNhck9iaiA9IG5ldyBJbWFnZSgpXHJcbiAgICAgICAgLy8gbGV0IGNydHggPSBfc2VsZi5jYW4xLmdldENvbnRleHQoJzJkJylcclxuICAgICAgICBjYXJPYmouc3JjID0gX3NlbGYuaW1ncy50YXJnZXRDYXIuc3JjXHJcbiAgICAgICAgY2FyT2JqLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvLyBjcnR4LmRyYXdJbWFnZShjYXJPYmosIDAsIDAsIGNhck9iai53aWR0aCwgY2FyT2JqLmhlaWdodCwgMjAsIDIwLCBjYXJPYmoud2lkdGgvMiwgY2FyT2JqLmhlaWdodC8yKVxyXG4gICAgICAgICAgICBfc2VsZi5jYXJPYmogPSBjYXJPYmpcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coY2FyT2JqKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSJdfQ==
