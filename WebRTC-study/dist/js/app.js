"use strict";var production="false"===$("#appjs").data("mode"),friendo_url=$("#appjs").data("site"),device=deviceCheck();Vue.config.devtools=!production,Vue.config.debug=!production,Vue.config.silent=!production;var md=new MobileDetect(window.navigator.userAgent),tag=document.createElement("script");function findGetParameter(o){var t=null,n=[];return location.search.substr(1).split("&").forEach(function(e){(n=e.split("="))[0]===o&&(t=decodeURIComponent(n[1]))}),t}function checkCookie(o){var t=null,n=[];return document.cookie.split(";").forEach(function(e){" "==e.charAt(0)&&(e=e.substring(1)),(n=e.split("="))[0]===o&&(t=n[1])}),t}function deviceCheck(){var e={},o=new MobileDetect(window.navigator.userAgent);return o.match(/android/i)?(e.os="android",e.version=o.version("android")):o.match(/(iphone|ipad|ipod);?/i)?(e.os="ios",e.version=o.version("iOS")):(e.os="pc",e.version=o.version("Chrome")),e}$(function(){console.log("v1.0"),console.log(device),$(".nav").menu()}),Vue.mixin({data:function(){return{status:"",start_date:"2100/08/09 12:09:10",error_msg:"",mode:production?"Started":"Testing",loading:!1,navHeight:""}},computed:{openCome:function(){return!("Testing"==this.mode||start_date<=0)}},watch:{error_msg:function(e){$("body").toggleClass("_freeze")}},methods:{gaEvant:function(e){dataLayer.push({event:e}),console.log("ga:",e)},server_busy:function(){var e=this;e.error_msg="系統忙碌中，請稍後在試!",e.loading=!1,e.error_cou=6},setCookie:function(e,o,t){var n=new Date;n.setTime(n.getTime()+1e3*t);var i="expires="+n.toUTCString();document.cookie=e+"="+o+";"+i+";"},logger:function(e,o,t){if(production){_LTracker.push({level:["ERROR","DEBUG","WARNING","INFO","ALL"][e],content:JSON.stringify(o),path:window.location.href,tag:t||null,device:device,timestamp:Date.now()})}},errorDone:function(){this.error_msg=""},checkOnline:function(){navigator.onLine||alert("Internet 連線已斷開，請確認您的網路狀態。")},state_check:function(){var t=this;return $.ajax({method:"GET",url:"".concat(friendo_url,"GetProjectInfo"),success:function(e){var o=e.Data;t.start_date=o.StartDateTime,t.mode=o.Status}})},scrollTo:function(e){$("html,body").animate({scrollTop:$(e).offset().top-this.navHeight},500)},getToken:function(){return $.ajax({url:"".concat(friendo_url,"api/auth/login?projectId=61"),headers:{webtoken:"2YRiIGevkjZZ-S22iwwuSoajRcnZUSeEJ+dwslTtM+s="},method:"GET",dataType:"json"})},getIe:function(){var o,e;function t(e){return 0<=o.indexOf(e)}"ie"==(o=window.navigator.userAgent,e="ActiveXObject"in window,t("MSIE")||e?"ie":t("Firefox")&&!e?"Firefox":t("Chrome")&&!e?"Chrome":t("Opera")&&!e?"Opera":t("Safari")&&!e?"Safari":void 0)&&(this.ie11=!0)}},components:{comingsoon:comingsoon},mounted:function(){}}),Vue.component("comingsoon",{template:"#comingsoon",props:["StartDate","mode"],data:function(){return{comingsoon:!1,date:{total:0,days:0,hours:0,minutes:0,seconds:0}}},mounted:function(){function r(e,o){return(e=""+e).length>=o?e:r("0"+e,o)}var a=this,c=setInterval(function(){var e=Date.parse(new Date(a.StartDate))-Date.parse(new Date),o=Math.floor(e/1e3%60),t=Math.floor(e/1e3/60%60),n=Math.floor(e/36e5%24),i=Math.floor(e/864e5);a.date={total:e,days:r(i,2),hours:r(n,2),minutes:r(t,2),seconds:r(o,2)},a.date.total<=0||"Testing"==a.mode?(clearInterval(c),a.comingsoon=!1):a.comingsoon=!0},1e3)}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJwcm9kdWN0aW9uIiwiJCIsImRhdGEiLCJkZXZpY2UiLCJkZXZpY2VDaGVjayIsIlZ1ZSIsImNvbmZpZyIsImRlYnVnIiwic2lsZW50IiwibWQiLCJNb2JpbGVEZXRlY3QiLCJ3aW5kb3ciLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJjb25zb2xlIiwibG9nIiwidG1wIiwicGFyYW1ldGVyTmFtZSIsInJlc3VsdCIsIml0ZW0iLCJsb2NhdGlvbiIsInNlYXJjaCIsInN1YnN0ciIsImNoZWNrQ29va2llIiwic3BsaXQiLCJkb2N1bWVudCIsImNvb2tpZSIsImZvckVhY2giLCJjaGFyQXQiLCJzdWJzdHJpbmciLCJzdGFydF9kYXRlIiwidmVyc2lvbiIsIm9zIiwibWF0Y2giLCJmaW5kR2V0UGFyYW1ldGVyIiwibWVudSIsIm1vZGUiLCJsb2FkaW5nIiwibmF2SGVpZ2h0Iiwic3RhdHVzIiwiZXJyb3JfbXNnIiwib3BlbkNvbWUiLCJ0b2dnbGVDbGFzcyIsInRoaXMiLCJnYUV2YW50IiwiZGF0YUxheWVyIiwicHVzaCIsInZhbCIsImd0bURhdGEiLCJtZXRob2RzIiwic2VydmVyX2J1c3kiLCJldmVudCIsInZtIiwic2V0Q29va2llIiwic2V0VGltZSIsImVycm9yX2NvdSIsImNuYW1lIiwiY3ZhbHVlIiwidGltZSIsImQiLCJEYXRlIiwiZ2V0VGltZSIsInRhZyIsImNvbnRlbnQiLCJ0b1VUQ1N0cmluZyIsImV4cGlyZXMiLCJsb2dnZXIiLCJsZXZlbCIsIl9MVHJhY2tlciIsInN0cmluZ2lmeSIsIkpTT04iLCJwYXRoIiwibm93IiwiaHJlZiIsInRpbWVzdGFtcCIsImNoZWNrT25saW5lIiwib25MaW5lIiwiYWxlcnQiLCJ1cmwiLCJzdWNjZXNzIiwiYWpheCIsImZyaWVuZG9fdXJsIiwiU3RhdHVzIiwicmVzIiwiRGF0YSIsIlN0YXJ0RGF0ZVRpbWUiLCJzY3JvbGxUbyIsImUiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwib2Zmc2V0IiwidG9wIiwiY29uY2F0IiwiaGVhZGVycyIsIndlYnRva2VuIiwibWV0aG9kIiwiZGF0YVR5cGUiLCJnZXRJZSIsImNvbXBhcmUiLCJleHBsb3JlciIsImllMTEiLCJzIiwiaW5kZXhPZiIsImNvbXBvbmVudHMiLCJjb21pbmdzb29uIiwibW91bnRlZCIsInRlbXBsYXRlIiwicHJvcHMiLCJjb21wb25lbnQiLCJkYXRlIiwidG90YWwiLCJkYXlzIiwiaG91cnMiLCJtaW51dGVzIiwic2Vjb25kcyIsInBhZExlZnQiLCJzdHIiLCJsZW4iLCJsZW5ndGgiLCJ0aW1laW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsInQiLCJwYXJzZSIsIlN0YXJ0RGF0ZSIsIk1hdGgiLCJmbG9vciJdLCJtYXBwaW5ncyI6ImFBQUEsSUFDSUEsV0FBMEMsVUFBN0JDLEVBQUUsVUFBVUMsS0FBSyxRQUE5QkYsWUFBY0MsRUFBQyxVQUFVQyxLQUFLLFFBRzVCQyxPQUFTQyxjQUdmQyxJQUFJQyxPQUFPQyxVQUFTUCxXQUNwQkssSUFBSUMsT0FBT0UsT0FBU1IsV0FFcEJLLElBQUlJLE9BQUtELFFBQUlFLFdBSWJULElBQUVRLEdBQUEsSUFBQUMsYUFBWUMsT0FBQUMsVUFBQUMsV0FFVkMsSUFBUUMsU0FBSVosY0FBWixVQWFRLFNBQUlhLGlCQUFXQyxHQUx2QixJQUFBQyxFQUFBLEtBUUFGLEVBQU9FLEdBVUtDLE9BVGZDLFNBQUFDLE9BUlFDLE9BQU8sR0FVUEMsTUFBQUEsS0FDREwsUUFBUyxTQUFiQyxJQUNVSCxFQURWRyxFQUFBSyxNQUFBLE1BRWFDLEtBQVNDLElBQ1RSLEVBQ1JTLG1CQUF3QlgsRUFBQSxPQUViRSxFQUVSRixTQUFHTyxZQUFjTixHQUNqQixJQUFJRCxFQUFBLEtBTlpBLEVBQUEsR0FjQSxPQUxBUyxTQUFBQyxPQUNIRixNQUFBLEtBVFFHLFFBQVEsU0FBVVIsR0FVSixLQUFkZixFQUFUd0IsT0FBdUIsS0FDTlQsRUFBYkEsRUFBQVUsVUFBQSxLQVBRYixFQUFNRyxFQUFLSyxNQUFNLE1BU1os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cHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdFxyXG4gICAgcHJvZHVjdGlvbiA9ICQoXCIjYXBwanNcIikuZGF0YShcIm1vZGVcIikgPT09IFwiZmFsc2VcIixcclxuICAgIGZyaWVuZG9fdXJsID0gJChcIiNhcHBqc1wiKS5kYXRhKFwic2l0ZVwiKTtcclxuXHJcbmNvbnN0IGRldmljZSA9IGRldmljZUNoZWNrKCk7XHJcblxyXG5WdWUuY29uZmlnLmRldnRvb2xzID0gIXByb2R1Y3Rpb247XHJcblZ1ZS5jb25maWcuZGVidWcgPSAhcHJvZHVjdGlvbjtcclxuVnVlLmNvbmZpZy5zaWxlbnQgPSAhcHJvZHVjdGlvbjtcclxuXHJcbnZhciBtZCA9IG5ldyBNb2JpbGVEZXRlY3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG5cclxudmFyIHRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcInYxLjBcIik7XHJcbiAgICBjb25zb2xlLmxvZyhkZXZpY2UpO1xyXG4gICAgJChcIi5uYXZcIikubWVudSgpO1xyXG59KTtcclxuXHJcblxyXG5mdW5jdGlvbiBmaW5kR2V0UGFyYW1ldGVyKHBhcmFtZXRlck5hbWUpIHtcclxuICAgIHZhciByZXN1bHQgPSBudWxsLFxyXG4gICAgICAgIHRtcCA9IFtdO1xyXG4gICAgbG9jYXRpb24uc2VhcmNoXHJcbiAgICAgICAgLnN1YnN0cigxKVxyXG4gICAgICAgIC5zcGxpdChcIiZcIilcclxuICAgICAgICAuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICB0bXAgPSBpdGVtLnNwbGl0KFwiPVwiKTtcclxuICAgICAgICAgICAgaWYgKHRtcFswXSA9PT0gcGFyYW1ldGVyTmFtZSlcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGRlY29kZVVSSUNvbXBvbmVudCh0bXBbMV0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZnVuY3Rpb24gY2hlY2tDb29raWUocGFyYW1ldGVyTmFtZSkge1xyXG4gICAgdmFyIHJlc3VsdCA9IG51bGwsXHJcbiAgICAgICAgdG1wID0gW107XHJcbiAgICB2YXIgY29va2llID0gZG9jdW1lbnQuY29va2llO1xyXG4gICAgY29va2llLnNwbGl0KFwiO1wiKVxyXG4gICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtLmNoYXJBdCgwKSA9PSBcIiBcIikge1xyXG4gICAgICAgICAgICAgICAgaXRlbSA9IGl0ZW0uc3Vic3RyaW5nKDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRtcCA9IGl0ZW0uc3BsaXQoXCI9XCIpO1xyXG4gICAgICAgICAgICBpZiAodG1wWzBdID09PSBwYXJhbWV0ZXJOYW1lKVxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdG1wWzFdO1xyXG4gICAgICAgIH0pXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmZ1bmN0aW9uIGRldmljZUNoZWNrKCkge1xyXG4gICAgdmFyIGRldmljZSA9IHt9O1xyXG4gICAgdmFyIG1kID0gbmV3IE1vYmlsZURldGVjdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcbiAgICBpZiAobWQubWF0Y2goL2FuZHJvaWQvaSkpIHtcclxuICAgICAgICBkZXZpY2Uub3MgPSBcImFuZHJvaWRcIjtcclxuICAgICAgICBkZXZpY2UudmVyc2lvbiA9IG1kLnZlcnNpb24oXCJhbmRyb2lkXCIpO1xyXG4gICAgfSBlbHNlIGlmIChtZC5tYXRjaCgvKGlwaG9uZXxpcGFkfGlwb2QpOz8vaSkpIHtcclxuICAgICAgICBkZXZpY2Uub3MgPSBcImlvc1wiO1xyXG4gICAgICAgIGRldmljZS52ZXJzaW9uID0gbWQudmVyc2lvbihcImlPU1wiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZGV2aWNlLm9zID0gXCJwY1wiO1xyXG4gICAgICAgIGRldmljZS52ZXJzaW9uID0gbWQudmVyc2lvbihcIkNocm9tZVwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBkZXZpY2U7XHJcbn1cclxuVnVlLm1peGluKHtcclxuICAgIGRhdGE6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzdGF0dXM6IFwiXCIsXHJcbiAgICAgICAgICAgIHN0YXJ0X2RhdGU6IFwiMjEwMC8wOC8wOSAxMjowOToxMFwiLFxyXG4gICAgICAgICAgICBlcnJvcl9tc2c6IFwiXCIsXHJcbiAgICAgICAgICAgIG1vZGU6IHByb2R1Y3Rpb24gPyBcIlN0YXJ0ZWRcIiA6IFwiVGVzdGluZ1wiLFxyXG4gICAgICAgICAgICBsb2FkaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgbmF2SGVpZ2h0OiBcIlwiLFxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBjb21wdXRlZDoge1xyXG4gICAgICAgIG9wZW5Db21lOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhKHRoaXMubW9kZSA9PSBcIlRlc3RpbmdcIiB8fCBzdGFydF9kYXRlIDw9IDApO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICB3YXRjaDoge1xyXG4gICAgICAgIGVycm9yX21zZzogZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgICAgICAgICAkKCdib2R5JykudG9nZ2xlQ2xhc3MoJ19mcmVlemUnKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgbWV0aG9kczoge1xyXG4gICAgICAgIGdhRXZhbnQ6IGZ1bmN0aW9uIChndG1EYXRhKSB7XHJcbiAgICAgICAgICAgIGRhdGFMYXllci5wdXNoKHsnZXZlbnQnOiBndG1EYXRhfSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZ2E6XCIsIGd0bURhdGEpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2VydmVyX2J1c3k6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAgICAgdm0uZXJyb3JfbXNnID0gXCLns7vntbHlv5nnoozkuK3vvIzoq4vnqI3lvozlnKjoqaYhXCI7XHJcbiAgICAgICAgICAgIHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgdm0uZXJyb3JfY291ID0gNjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldENvb2tpZTogZnVuY3Rpb24gKGNuYW1lLCBjdmFsdWUsIHRpbWUpIHtcclxuICAgICAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICBkLnNldFRpbWUoZC5nZXRUaW1lKCkgKyAodGltZSAqIDEwMDApKTtcclxuICAgICAgICAgICAgdmFyIGV4cGlyZXMgPSBcImV4cGlyZXM9XCIgKyBkLnRvVVRDU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNuYW1lICsgXCI9XCIgKyBjdmFsdWUgKyBcIjtcIiArIGV4cGlyZXMgKyBcIjtcIjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxvZ2dlcjogZnVuY3Rpb24gKGxldmVsLCBjb250ZW50LCB0YWcpIHtcclxuICAgICAgICAgICAgaWYgKHByb2R1Y3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIC8vIGxldmVsIDogWydFUlJPUicgPT4gMCwgREVCVUcnID0+IDEsICdXQVJOSU5HJyA9PiAyLCAnSU5GTycgPT4gMywgJ0FMTCcgPT4gNF1cclxuICAgICAgICAgICAgICAgIHZhciBsZXZlbF9pbmZvID0gWydFUlJPUicsICdERUJVRycsICdXQVJOSU5HJywgJ0lORk8nLCAnQUxMJ107XHJcbiAgICAgICAgICAgICAgICBfTFRyYWNrZXIucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2xldmVsJzogbGV2ZWxfaW5mb1tsZXZlbF0sXHJcbiAgICAgICAgICAgICAgICAgICAgJ2NvbnRlbnQnOiBKU09OLnN0cmluZ2lmeShjb250ZW50KSxcclxuICAgICAgICAgICAgICAgICAgICAncGF0aCc6IHdpbmRvdy5sb2NhdGlvbi5ocmVmLFxyXG4gICAgICAgICAgICAgICAgICAgICd0YWcnOiB0YWcgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAnZGV2aWNlJzogZGV2aWNlLFxyXG4gICAgICAgICAgICAgICAgICAgICd0aW1lc3RhbXAnOiBEYXRlLm5vdygpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXJyb3JEb25lOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXJyb3JfbXNnID0gXCJcIjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNoZWNrT25saW5lOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghbmF2aWdhdG9yLm9uTGluZSkge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCJJbnRlcm5ldCDpgKPnt5rlt7LmlrfplovvvIzoq4vnorroqo3mgqjnmoTntrLot6/ni4DmhYvjgIJcIik7XHJcbiAgICAgICAgICAgICAgICAvLyB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHN0YXRlX2NoZWNrOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICAgICAgdXJsOiBgJHtmcmllbmRvX3VybH1HZXRQcm9qZWN0SW5mb2AsXHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHJlcy5EYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLnN0YXJ0X2RhdGUgPSBkYXRhLlN0YXJ0RGF0ZVRpbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0ubW9kZSA9IGRhdGEuU3RhdHVzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2Nyb2xsVG86IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgICQoXCJodG1sLGJvZHlcIikuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGxUb3A6ICQoZSkub2Zmc2V0KCkudG9wIC0gdm0ubmF2SGVpZ2h0XHJcbiAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRUb2tlbjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgLy8gdXJsOiBcImh0dHBzOi8vY2FycmVmb3VyMjAxOWNueS5henVyZXdlYnNpdGVzLm5ldC9hcGkvYXV0aC9sb2dpbj9wcm9qZWN0SWQ9NjFcIixcclxuICAgICAgICAgICAgICAgIHVybDogYCR7ZnJpZW5kb191cmx9YXBpL2F1dGgvbG9naW4/cHJvamVjdElkPTYxYCxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBcIndlYnRva2VuXCI6IFwiMllSaUlHZXZralpaLVMyMml3d3VTb2FqUmNuWlVTZUVKK2R3c2xUdE0rcz1cIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIlxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBnZXRJZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZhciBnZXRFeHBsb3JlciA9IChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBleHBsb3JlciA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LFxyXG4gICAgICAgICAgICAgICAgY29tcGFyZSA9IGZ1bmN0aW9uKHMpIHsgcmV0dXJuIChleHBsb3Jlci5pbmRleE9mKHMpID49IDApOyB9LFxyXG4gICAgICAgICAgICAgICAgaWUxMSA9IChmdW5jdGlvbigpIHsgcmV0dXJuIChcIkFjdGl2ZVhPYmplY3RcIiBpbiB3aW5kb3cpIH0pKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29tcGFyZShcIk1TSUVcIikgfHwgaWUxMSkgeyByZXR1cm4gJ2llJzsgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY29tcGFyZShcIkZpcmVmb3hcIikgJiYgIWllMTEpIHsgcmV0dXJuICdGaXJlZm94JzsgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY29tcGFyZShcIkNocm9tZVwiKSAmJiAhaWUxMSkgeyByZXR1cm4gJ0Nocm9tZSc7IH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbXBhcmUoXCJPcGVyYVwiKSAmJiAhaWUxMSkgeyByZXR1cm4gJ09wZXJhJzsgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY29tcGFyZShcIlNhZmFyaVwiKSAmJiAhaWUxMSkgeyByZXR1cm4gJ1NhZmFyaSc7IH1cclxuICAgICAgICAgICAgfSkoKVxyXG4gICAgICAgICAgICBpZiAoZ2V0RXhwbG9yZXIgPT0gJ2llJykge1xyXG4gICAgICAgICAgICAgICAgdm0uaWUxMSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvLyBhbGVydCgn55uu5YmN54CP6Ka95Zmo54K66IiK54mIIElF77yM5bu66K2w5L2/55SoQ2hyb21l54CP6Ka95Zmo77yM542y5b6X5pyA5L2z6YGK5oiy6auU6amX77yBJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuICAgIGNvbXBvbmVudHM6IHtcclxuICAgICAgICBjb21pbmdzb29uOiBjb21pbmdzb29uXHJcbiAgICB9LFxyXG4gICAgbW91bnRlZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICBcclxuICAgIH1cclxufSlcclxuXHJcblxyXG5WdWUuY29tcG9uZW50KCdjb21pbmdzb29uJywge1xyXG4gICAgdGVtcGxhdGU6IFwiI2NvbWluZ3Nvb25cIixcclxuICAgIHByb3BzOiBbJ1N0YXJ0RGF0ZScsICdtb2RlJ10sXHJcbiAgICBkYXRhOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY29taW5nc29vbjogZmFsc2UsXHJcbiAgICAgICAgICAgIGRhdGU6IHtcclxuICAgICAgICAgICAgICAgIHRvdGFsOiAwLFxyXG4gICAgICAgICAgICAgICAgZGF5czogMCxcclxuICAgICAgICAgICAgICAgIGhvdXJzOiAwLFxyXG4gICAgICAgICAgICAgICAgbWludXRlczogMCxcclxuICAgICAgICAgICAgICAgIHNlY29uZHM6IDBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gICBcclxuICAgIH0sXHJcbiAgICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHBhZExlZnQgPSBmdW5jdGlvbiAoc3RyLCBsZW4pIHtcclxuICAgICAgICAgICAgc3RyID0gJycgKyBzdHI7XHJcbiAgICAgICAgICAgIGlmIChzdHIubGVuZ3RoID49IGxlbikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0cjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwYWRMZWZ0KFwiMFwiICsgc3RyLCBsZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgIC8vIHZtLnN0YXRlX2NoZWNrKCkudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgLy8gICAgIHZhciBkYXRhID0gcmVzLkRhdGE7XHJcbiAgICAgICAgLy8gICAgIHZtLnN0YXJ0X2RhdGUgPSBkYXRhLlN0YXJ0RGF0ZVRpbWU7XHJcbiAgICAgICAgdmFyIHRpbWVpbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHQgPSBEYXRlLnBhcnNlKG5ldyBEYXRlKHZtLlN0YXJ0RGF0ZSkpIC0gRGF0ZS5wYXJzZShuZXcgRGF0ZSgpKTtcclxuICAgICAgICAgICAgdmFyIHNlY29uZHMgPSBNYXRoLmZsb29yKCh0IC8gMTAwMCkgJSA2MCk7XHJcbiAgICAgICAgICAgIHZhciBtaW51dGVzID0gTWF0aC5mbG9vcigodCAvIDEwMDAgLyA2MCkgJSA2MCk7XHJcbiAgICAgICAgICAgIHZhciBob3VycyA9IE1hdGguZmxvb3IoKHQgLyAoMTAwMCAqIDYwICogNjApKSAlIDI0KTtcclxuICAgICAgICAgICAgdmFyIGRheXMgPSBNYXRoLmZsb29yKHQgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpO1xyXG4gICAgICAgICAgICB2bS5kYXRlID0ge1xyXG4gICAgICAgICAgICAgICAgJ3RvdGFsJzogdCxcclxuICAgICAgICAgICAgICAgICdkYXlzJzogcGFkTGVmdChkYXlzLCAyKSxcclxuICAgICAgICAgICAgICAgICdob3Vycyc6IHBhZExlZnQoaG91cnMsIDIpLFxyXG4gICAgICAgICAgICAgICAgJ21pbnV0ZXMnOiBwYWRMZWZ0KG1pbnV0ZXMsIDIpLFxyXG4gICAgICAgICAgICAgICAgJ3NlY29uZHMnOiBwYWRMZWZ0KHNlY29uZHMsIDIpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmICh2bS5kYXRlLnRvdGFsIDw9IDAgfHwgdm0ubW9kZSA9PSBcIlRlc3RpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1laW50ZXJ2YWwpO1xyXG4gICAgICAgICAgICAgICAgdm0uY29taW5nc29vbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdm0uY29taW5nc29vbiA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCAxMDAwKTtcclxuICAgICAgICAvLyB9KTtcclxuICAgIH0sXHJcbn0pXHJcbiJdfQ==
