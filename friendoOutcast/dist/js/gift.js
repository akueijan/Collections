"use strict";var gift=new Vue({el:"#gift",data:{gift_data:{},url_id:findGetParameter("card_url"),phone:"",errorStyle:4,errorMsg:"",success:!1},methods:{ga_click:ga_init,send_phone:function(){var e=this;if(""==e.phone||!e.phone.match(/^09[0-9]{8}$/))return alert("請輸入手機正確格式"),!1;$.post({url:friendo_url+"UpdateGiftInfo",data:{url_id:e.url_id,phone_num:e.phone},dataType:"json",success:function(r){if(console.log(r),r.result)e.success=!0,e.ga_click("result","gift_領取兌換券成功","gift_領取兌換券成功");else switch(r.errorCode){case 501:e.errorStyle=1,e.ga_click("result","gift_兌換卷過期","gift_兌換卷過期");break;case 502:e.errorStyle=2,e.ga_click("result","gift_兌換券已被領取","gift_兌換券已被領取");break;default:console.log("result",r.errorMsg)}}})}},mounted:function(){var e=this;$("body").loadpage("init",{async:!0}).then(function(r){$.post({url:friendo_url+"GetGiftInfo",data:{url_id:e.url_id},dataType:"json",success:function(r){if($("body").loadpage("close"),console.log(r),r.result)e.gift_data=r.data,e.gift_data.expired?e.errorStyle=1:void 0!==e.gift_data.expire_date?e.errorStyle=0:(e.errorMsg="查無此號碼!",e.ga_click("result","gift_兌換卷過期","gift_兌換卷過期"));else switch(r.errorCode){case 501:e.errorStyle=1,e.ga_click("result","gift_兌換券已被領取","gift_兌換券已被領取");break;case 502:e.errorStyle=2,e.errorMsg="禮物已經被領取囉!",e.ga_click("result","gift_兌換券已被領取","gift_兌換券已被領取");break;default:console.log("error",r.errorMsg)}}})})}});