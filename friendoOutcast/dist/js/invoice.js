"use strict";var invoice_view=new Vue({el:"#invoice",data:{username:"",phone:"",inv_date:"",inv_num:"",random_number:"",check:"",loading:!1,success:!1,demo:!1,first:!0,startTimeout:!1,slider_inx:{section1:0,section2:0}},watch:{demo:function(e){$("body").toggleClass("_freeze")}},computed:{nowdate:function(){var e=new Date,n=e.getMonth()+1,i=e.getFullYear();return 100*(i-=1911)+n+1},device_type:function(){var e=0;switch(deviceCheck()){case"andorid":e=2;break;case"ios":e=1}return e}},methods:{ga_click:ga_init,post_inv:function(){var e=this,n=!1;if(!e.loading&&!e.startTimeout){e.loading=!0;""==$("#g-recaptcha-response").val()&&(alert("請勾選我不是機器人"),n=!0,e.loading=!1),""==e.username&&(alert("請輸入使用者名稱"),n=!0,e.loading=!1),""!=e.phone&&e.phone.match(/^09[0-9]{8}$/)||(alert("請輸入手機正確格式"),n=!0,e.loading=!1),""==e.inv_date&&(alert("請選擇發票期別"),n=!0,e.loading=!1),""!=e.inv_num&&e.inv_num.match(/^[a-zA-Z]{2}[0-9]{8}$/)||(alert("請輸入發票正確格式"),n=!0,e.loading=!1),""==e.random_number&&(alert("請輸入發票隨機碼"),n=!0,e.loading=!1),1!=e.check&&(alert("請勾選同意說明"),n=!0,e.loading=!1),n||$.post({url:friendo_url+"SaveInvoiceEx",data:{cell_no:e.phone,user_name:e.username,email:"",inv_num:e.inv_num,inv_date:e.inv_date,random_number:e.random_number,captcha:$("#g-recaptcha-response").val()},success:function(n){if(e.loading=!1,grecaptcha.reset(),n.result){var i=n.data;1==i.inv_type||4==i.inv_type?($("html").scrollTop(0),e.success=!0,FB.init({appId:"1768128233496858",autoLogAppEvents:!0,xfbml:!0,version:"v2.11"}),e.ga_click("result","invoice_登錄成功","invoice_登錄成功")):e.ga_click("result","invoice_登錄失敗","invoice_登錄失敗")}else alert(n.errorMsg),e.ga_click("result","invoice_登錄失敗","invoice_登錄失敗")},dataType:"json"})}},sliderOneChange:function(e){this.slider_inx.section1=e},sliderTwoChange:function(e){this.slider_inx.section2=e}},components:{"carousel-3d":Carousel3d.Carousel3d,slide:Carousel3d.Slide},mounted:function(){this.success=!1,findGetParameter("first")&&(this.first=!1),Date.parse("2018/04/01").valueOf()<new Date&&(this.startTimeout=!0,alert("活動已於3/31結束囉!"),location=friendo_url),$("body").loadpage()}});