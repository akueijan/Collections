"use strict";var production="false"===$("#appjs").data("mode"),friendo_url=$("#appjs").data("site"),device=deviceCheck();Vue.config.devtools=!production,Vue.config.debug=!production,Vue.config.silent=!production;var md=new MobileDetect(window.navigator.userAgent),tag=document.createElement("script");function findGetParameter(e){var t=null,n=[];return location.search.substr(1).split("&").forEach(function(o){(n=o.split("="))[0]===e&&(t=decodeURIComponent(n[1]))}),t}function checkCookie(e){var t=null,n=[];return document.cookie.split(";").forEach(function(o){" "==o.charAt(0)&&(o=o.substring(1)),(n=o.split("="))[0]===e&&(t=n[1])}),t}function deviceCheck(){var o={},e=new MobileDetect(window.navigator.userAgent);return e.match(/android/i)?(o.os="android",o.version=e.version("android")):e.match(/(iphone|ipad|ipod);?/i)?(o.os="ios",o.version=e.version("iOS")):(o.os="pc",o.version=e.version("Chrome")),o}$(function(){console.log("v1.0"),console.log(device),$(".nav").menu()}),Vue.mixin({data:function(){return{status:"",start_date:"2100/08/09 12:09:10",error_msg:"",mode:production?"Started":"Testing",loading:!1,popuptop:"",navHeight:"",rewardShake:!0,lineHref:""}},computed:{openCome:function(){return!("Testing"==this.mode||start_date<=0)}},watch:{error_msg:function(o){$("body").toggleClass("_freeze")}},methods:{gaEvant:function(o){dataLayer.push({event:o}),console.log("ga:",o)},server_busy:function(){var o=this;o.error_msg="系統忙碌中，請稍後在試!",o.loading=!1,o.error_cou=6},setCookie:function(o,e,t){var n=new Date;n.setTime(n.getTime()+1e3*t);var r="expires="+n.toUTCString();document.cookie=o+"="+e+";"+r+";"},logger:function(o,e,t){if(production){_LTracker.push({level:["ERROR","DEBUG","WARNING","INFO","ALL"][o],content:JSON.stringify(e),path:window.location.href,tag:t||null,device:device,timestamp:Date.now()})}},errorDone:function(){this.error_msg=""},checkOnline:function(){navigator.onLine||alert("Internet 連線已斷開，請確認您的網路狀態。")},state_check:function(){var t=this;return $.ajax({method:"GET",url:friendo_url+"GetProjectInfo",success:function(o){var e=o.Data;t.start_date=e.StartDateTime,t.mode=e.Status}})},scrollTo:function(o){var e=this;e.room=null,e.allPopupClose(),$("html,body").animate({scrollTop:$(o).offset().top-e.navHeight},500)},popupOpen:function(){var o=this;o.popuptop&&0!==o.popuptop||(o.popuptop=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop)),$("body").addClass("_freeze")},popupClose:function(){$("body").removeClass("_freeze"),$("html, body").scrollTop(this.popuptop),this.popuptop=0},afterEnter:function(){this.popupOpen()},getToken:function(){return $.ajax({url:friendo_url+"api/auth/login?projectId=61",headers:{webtoken:"2YRiIGevkjZZ-S22iwwuSoajRcnZUSeEJ+dwslTtM+s="},method:"GET",dataType:"json"})}},components:{comingsoon:comingsoon},mounted:function(){var o=$(".window-top").height();this.navHeight=o-30,$("body").css("margin-top",this.navHeight),$(".nav-lock").click(function(){$("body").removeClass("_freeze")})}}),Vue.component("comingsoon",{template:"#comingsoon",props:["StartDate","mode"],data:function(){return{comingsoon:!1,date:{total:0,days:0,hours:0,minutes:0,seconds:0}}},mounted:function(){var i=function o(e,t){return(e=""+e).length>=t?e:o("0"+e,t)},a=this,s=setInterval(function(){var o=Date.parse(new Date(a.StartDate))-Date.parse(new Date),e=Math.floor(o/1e3%60),t=Math.floor(o/1e3/60%60),n=Math.floor(o/36e5%24),r=Math.floor(o/864e5);a.date={total:o,days:i(r,2),hours:i(n,2),minutes:i(t,2),seconds:i(e,2)},a.date.total<=0||"Testing"==a.mode?(clearInterval(s),a.comingsoon=!1):a.comingsoon=!0},1e3)}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJwcm9kdWN0aW9uIiwiJCIsImRhdGEiLCJkZXZpY2UiLCJkZXZpY2VDaGVjayIsIlZ1ZSIsImNvbmZpZyIsImRldnRvb2xzIiwiZGVidWciLCJtZCIsIk1vYmlsZURldGVjdCIsIndpbmRvdyIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRhZyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImZpbmRHZXRQYXJhbWV0ZXIiLCJwYXJhbWV0ZXJOYW1lIiwicmVzdWx0IiwidG1wIiwibG9jYXRpb24iLCJzZWFyY2giLCJpdGVtIiwic3BsaXQiLCJmb3JFYWNoIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiY29va2llIiwiY2hhckF0Iiwic3Vic3RyaW5nIiwidmVyc2lvbiIsInN0YXJ0X2RhdGUiLCJtYXRjaCIsIm9zIiwiY29uc29sZSIsImxvZyIsIm1vZGUiLCJsb2FkaW5nIiwicG9wdXB0b3AiLCJuYXZIZWlnaHQiLCJyZXdhcmRTaGFrZSIsImxpbmVIcmVmIiwiY29tcHV0ZWQiLCJvcGVuQ29tZSIsImVycm9yX21zZyIsInRoaXMiLCJnYUV2YW50IiwiZGF0YUxheWVyIiwidmFsIiwiZ3RtRGF0YSIsIm1ldGhvZHMiLCJ2bSIsInB1c2giLCJldmVudCIsImVycm9yX2NvdSIsInNldENvb2tpZSIsImQiLCJzZXRUaW1lIiwiZ2V0VGltZSIsImV4cGlyZXMiLCJsb2dnZXIiLCJjbmFtZSIsImxldmVsIiwiY29udGVudCIsInRpbWUiLCJsZXZlbF9pbmZvIiwidG9VVENTdHJpbmciLCJfTFRyYWNrZXIiLCJjdmFsdWUiLCJKU09OIiwic3RyaW5naWZ5IiwicGF0aCIsImhyZWYiLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwiZXJyb3JEb25lIiwic3RhdGVfY2hlY2siLCJvbkxpbmUiLCJhbGVydCIsImFqYXgiLCJ1cmwiLCJmcmllbmRvX3VybCIsInN1Y2Nlc3MiLCJyZXMiLCJEYXRhIiwiU3RhcnREYXRlVGltZSIsIlN0YXR1cyIsInNjcm9sbFRvIiwiZSIsInBvcHVwT3BlbiIsImFsbFBvcHVwQ2xvc2UiLCJNYXRoIiwicGFnZVlPZmZzZXQiLCJwb3B1cENsb3NlIiwicmVtb3ZlQ2xhc3MiLCJtYXgiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JvbGxUb3AiLCJib2R5IiwiYWZ0ZXJFbnRlciIsImdldFRva2VuIiwibWV0aG9kIiwiaGVhZGVycyIsIndlYnRva2VuIiwiY29taW5nc29vbiIsImRhdGFUeXBlIiwiY29tcG9uZW50cyIsImhlaWdodCIsImNzcyIsImNvbXBvbmVudCIsImNsaWNrIiwidGVtcGxhdGUiLCJ0b3RhbCIsImRheXMiLCJob3VycyIsIm1pbnV0ZXMiLCJzZWNvbmRzIiwiZGF0ZSIsInBhZExlZnQiLCJzdHIiLCJsZW5ndGgiLCJtb3VudGVkIiwibGVuIiwidGltZWludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJ0IiwiU3RhcnREYXRlIiwicGFyc2UiLCJmbG9vciIsImNsZWFySW50ZXJ2YWwiXSwibWFwcGluZ3MiOiJhQUFBLElBQ0lBLFdBQTBDLFVBQTdCQyxFQUFFLFVBQVVDLEtBQUssUUFBOUJGLFlBQWFDLEVBQUUsVUFBVUMsS0FBSyxRQUc1QkMsT0FBU0MsY0FFZkMsSUFBSUMsT0FBT0MsVUFBWVAsV0FBdkJLLElBQUlDLE9BQU9DLE9BQVhQLFdBQ0FLLElBQUlDLE9BQU9FLFFBQVNSLFdBR3BCLElBQUlTLEdBQUssSUFBSUMsYUFBYUMsT0FBT0MsVUFBVUMsV0FFdkNDLElBQU1DLFNBQVNDLGNBQWMsVUFTakMsU0FBU0MsaUJBQWlCQyxHQUN0QixJQUFJQyxFQUFTLEtBQ1RDLEVBQU0sR0FhVixPQVpBQyxTQUFTQyxPQUlERixPQUFNRyxHQUNOQyxNQUFJSixLQUxaSyxRQUFBLFNBQUFGLElBUU9KLEVBQVBJLEVBQUFDLE1BQUEsTUFDSCxLQUFBTixJQUhlQyxFQUFTTyxtQkFBbUJOLEVBQUksT0FNeENELEVBR0pRLFNBQUFBLFlBQUFULEdBRVEsSUFBQUMsRUFBU1MsS0FDTEwsRUFBQUEsR0FZ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SCxJQUFBLElBSU5WLEVBQUF4QixLQUFXMkIsTUFBUUgsRUFBUixJQUpMLEdBQUEsSUFLTkQsRUFBQXZCLEtBQVcyQixNQUFRRixFQUFBQSxLQUFSLElBTGZILEVBQUF0QixLQUFBcUMsTUFBQUgsRUFBQUEsT0FPQTNFLEVBQUFtRSxLQUFPQSxDQUNIWSxNQUFBQSxFQUNBL0UsS0FBR3NELEVBQWFTLEVBQWhCLEdBRkpDLE1BR09JLEVBQUFKLEVBQUEsR0FDSGhFLFFBQUdzRCxFQUFhVyxFQUFoQixHQUNIQyxRQUFBRSxFQUFBRixFQUFBLElBRUxsRSxFQUFBbUUsS0FBQUwsT0FBQSxHQUFBLFdBQUE5RCxFQUFBZixNQUNIOEYsY0FBQU4sR0FqREx6RSxFQUFBc0QsWUFBQSxHQTZDZ0J0RCxFQUFHc0QsWUFBYSxHQUVyQiIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdFxyXG4gICAgcHJvZHVjdGlvbiA9ICQoXCIjYXBwanNcIikuZGF0YShcIm1vZGVcIikgPT09IFwiZmFsc2VcIixcclxuICAgIGZyaWVuZG9fdXJsID0gJChcIiNhcHBqc1wiKS5kYXRhKFwic2l0ZVwiKTtcclxuXHJcbmNvbnN0IGRldmljZSA9IGRldmljZUNoZWNrKCk7XHJcblxyXG5WdWUuY29uZmlnLmRldnRvb2xzID0gIXByb2R1Y3Rpb247XHJcblZ1ZS5jb25maWcuZGVidWcgPSAhcHJvZHVjdGlvbjtcclxuVnVlLmNvbmZpZy5zaWxlbnQgPSAhcHJvZHVjdGlvbjtcclxuXHJcbnZhciBtZCA9IG5ldyBNb2JpbGVEZXRlY3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG5cclxudmFyIHRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcInYxLjBcIik7XHJcbiAgICBjb25zb2xlLmxvZyhkZXZpY2UpO1xyXG4gICAgJChcIi5uYXZcIikubWVudSgpO1xyXG59KTtcclxuXHJcblxyXG5mdW5jdGlvbiBmaW5kR2V0UGFyYW1ldGVyKHBhcmFtZXRlck5hbWUpIHtcclxuICAgIHZhciByZXN1bHQgPSBudWxsLFxyXG4gICAgICAgIHRtcCA9IFtdO1xyXG4gICAgbG9jYXRpb24uc2VhcmNoXHJcbiAgICAgICAgLnN1YnN0cigxKVxyXG4gICAgICAgIC5zcGxpdChcIiZcIilcclxuICAgICAgICAuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICB0bXAgPSBpdGVtLnNwbGl0KFwiPVwiKTtcclxuICAgICAgICAgICAgaWYgKHRtcFswXSA9PT0gcGFyYW1ldGVyTmFtZSlcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGRlY29kZVVSSUNvbXBvbmVudCh0bXBbMV0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZnVuY3Rpb24gY2hlY2tDb29raWUocGFyYW1ldGVyTmFtZSkge1xyXG4gICAgdmFyIHJlc3VsdCA9IG51bGwsXHJcbiAgICAgICAgdG1wID0gW107XHJcbiAgICB2YXIgY29va2llID0gZG9jdW1lbnQuY29va2llO1xyXG4gICAgY29va2llLnNwbGl0KFwiO1wiKVxyXG4gICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtLmNoYXJBdCgwKSA9PSBcIiBcIikge1xyXG4gICAgICAgICAgICAgICAgaXRlbSA9IGl0ZW0uc3Vic3RyaW5nKDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRtcCA9IGl0ZW0uc3BsaXQoXCI9XCIpO1xyXG4gICAgICAgICAgICBpZiAodG1wWzBdID09PSBwYXJhbWV0ZXJOYW1lKVxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdG1wWzFdO1xyXG4gICAgICAgIH0pXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmZ1bmN0aW9uIGRldmljZUNoZWNrKCkge1xyXG4gICAgdmFyIGRldmljZSA9IHt9O1xyXG4gICAgdmFyIG1kID0gbmV3IE1vYmlsZURldGVjdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcbiAgICBpZiAobWQubWF0Y2goL2FuZHJvaWQvaSkpIHtcclxuICAgICAgICBkZXZpY2Uub3MgPSBcImFuZHJvaWRcIjtcclxuICAgICAgICBkZXZpY2UudmVyc2lvbiA9IG1kLnZlcnNpb24oXCJhbmRyb2lkXCIpO1xyXG4gICAgfSBlbHNlIGlmIChtZC5tYXRjaCgvKGlwaG9uZXxpcGFkfGlwb2QpOz8vaSkpIHtcclxuICAgICAgICBkZXZpY2Uub3MgPSBcImlvc1wiO1xyXG4gICAgICAgIGRldmljZS52ZXJzaW9uID0gbWQudmVyc2lvbihcImlPU1wiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZGV2aWNlLm9zID0gXCJwY1wiO1xyXG4gICAgICAgIGRldmljZS52ZXJzaW9uID0gbWQudmVyc2lvbihcIkNocm9tZVwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBkZXZpY2U7XHJcbn1cclxuVnVlLm1peGluKHtcclxuICAgIGRhdGE6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzdGF0dXM6IFwiXCIsXHJcbiAgICAgICAgICAgIHN0YXJ0X2RhdGU6IFwiMjEwMC8wOC8wOSAxMjowOToxMFwiLFxyXG4gICAgICAgICAgICBlcnJvcl9tc2c6IFwiXCIsXHJcbiAgICAgICAgICAgIG1vZGU6IHByb2R1Y3Rpb24gPyBcIlN0YXJ0ZWRcIiA6IFwiVGVzdGluZ1wiLFxyXG4gICAgICAgICAgICBsb2FkaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgcG9wdXB0b3A6IFwiXCIsXHJcbiAgICAgICAgICAgIG5hdkhlaWdodDogXCJcIixcclxuICAgICAgICAgICAgcmV3YXJkU2hha2U6IHRydWUsXHJcbiAgICAgICAgICAgIGxpbmVIcmVmOiAnJyxcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgY29tcHV0ZWQ6IHtcclxuICAgICAgICBvcGVuQ29tZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gISh0aGlzLm1vZGUgPT0gXCJUZXN0aW5nXCIgfHwgc3RhcnRfZGF0ZSA8PSAwKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgd2F0Y2g6IHtcclxuICAgICAgICBlcnJvcl9tc2c6IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAgICAgJCgnYm9keScpLnRvZ2dsZUNsYXNzKCdfZnJlZXplJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIG1ldGhvZHM6IHtcclxuICAgICAgICBnYUV2YW50OiBmdW5jdGlvbiAoZ3RtRGF0YSkge1xyXG4gICAgICAgICAgICBkYXRhTGF5ZXIucHVzaCh7J2V2ZW50JzogZ3RtRGF0YX0pO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImdhOlwiLCBndG1EYXRhKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNlcnZlcl9idXN5OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZtLmVycm9yX21zZyA9IFwi57O757Wx5b+Z56KM5Lit77yM6KuL56iN5b6M5Zyo6KmmIVwiO1xyXG4gICAgICAgICAgICB2bS5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZtLmVycm9yX2NvdSA9IDY7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXRDb29raWU6IGZ1bmN0aW9uIChjbmFtZSwgY3ZhbHVlLCB0aW1lKSB7XHJcbiAgICAgICAgICAgIHZhciBkID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgZC5zZXRUaW1lKGQuZ2V0VGltZSgpICsgKHRpbWUgKiAxMDAwKSk7XHJcbiAgICAgICAgICAgIHZhciBleHBpcmVzID0gXCJleHBpcmVzPVwiICsgZC50b1VUQ1N0cmluZygpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBjbmFtZSArIFwiPVwiICsgY3ZhbHVlICsgXCI7XCIgKyBleHBpcmVzICsgXCI7XCI7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBsb2dnZXI6IGZ1bmN0aW9uIChsZXZlbCwgY29udGVudCwgdGFnKSB7XHJcbiAgICAgICAgICAgIGlmIChwcm9kdWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBsZXZlbCA6IFsnRVJST1InID0+IDAsIERFQlVHJyA9PiAxLCAnV0FSTklORycgPT4gMiwgJ0lORk8nID0+IDMsICdBTEwnID0+IDRdXHJcbiAgICAgICAgICAgICAgICB2YXIgbGV2ZWxfaW5mbyA9IFsnRVJST1InLCAnREVCVUcnLCAnV0FSTklORycsICdJTkZPJywgJ0FMTCddO1xyXG4gICAgICAgICAgICAgICAgX0xUcmFja2VyLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICdsZXZlbCc6IGxldmVsX2luZm9bbGV2ZWxdLFxyXG4gICAgICAgICAgICAgICAgICAgICdjb250ZW50JzogSlNPTi5zdHJpbmdpZnkoY29udGVudCksXHJcbiAgICAgICAgICAgICAgICAgICAgJ3BhdGgnOiB3aW5kb3cubG9jYXRpb24uaHJlZixcclxuICAgICAgICAgICAgICAgICAgICAndGFnJzogdGFnIHx8IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2RldmljZSc6IGRldmljZSxcclxuICAgICAgICAgICAgICAgICAgICAndGltZXN0YW1wJzogRGF0ZS5ub3coKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVycm9yRG9uZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yX21zZyA9IFwiXCI7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjaGVja09ubGluZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIW5hdmlnYXRvci5vbkxpbmUpIHtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwiSW50ZXJuZXQg6YCj57ea5bey5pa36ZaL77yM6KuL56K66KqN5oKo55qE57ay6Lev54uA5oWL44CCXCIpO1xyXG4gICAgICAgICAgICAgICAgLy8gd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdGF0ZV9jaGVjazogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gJC5hamF4KHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgICAgIHVybDogYCR7ZnJpZW5kb191cmx9R2V0UHJvamVjdEluZm9gLFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSByZXMuRGF0YTtcclxuICAgICAgICAgICAgICAgICAgICB2bS5zdGFydF9kYXRlID0gZGF0YS5TdGFydERhdGVUaW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLm1vZGUgPSBkYXRhLlN0YXR1cztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNjcm9sbFRvOiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICB2bS5yb29tID0gbnVsbDtcclxuICAgICAgICAgICAgdm0uYWxsUG9wdXBDbG9zZSgpO1xyXG4gICAgICAgICAgICAkKFwiaHRtbCxib2R5XCIpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiAkKGUpLm9mZnNldCgpLnRvcCAtIHZtLm5hdkhlaWdodFxyXG4gICAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcG9wdXBPcGVuOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgIGlmICghdm0ucG9wdXB0b3AgfHwgdm0ucG9wdXB0b3AgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHZtLnBvcHVwdG9wID0gTWF0aC5tYXgod2luZG93LnBhZ2VZT2Zmc2V0LCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wLCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdfZnJlZXplJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBwb3B1cENsb3NlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnX2ZyZWV6ZScpO1xyXG4gICAgICAgICAgICAkKCdodG1sLCBib2R5Jykuc2Nyb2xsVG9wKHZtLnBvcHVwdG9wKTtcclxuICAgICAgICAgICAgdm0ucG9wdXB0b3AgPSAwO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWZ0ZXJFbnRlcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICB2bS5wb3B1cE9wZW4oKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldFRva2VuOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAgICAgcmV0dXJuICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAvLyB1cmw6IFwiaHR0cHM6Ly9jYXJyZWZvdXIyMDE5Y255LmF6dXJld2Vic2l0ZXMubmV0L2FwaS9hdXRoL2xvZ2luP3Byb2plY3RJZD02MVwiLFxyXG4gICAgICAgICAgICAgICAgdXJsOiBgJHtmcmllbmRvX3VybH1hcGkvYXV0aC9sb2dpbj9wcm9qZWN0SWQ9NjFgLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgIFwid2VidG9rZW5cIjogXCIyWVJpSUdldmtqWlotUzIyaXd3dVNvYWpSY25aVVNlRUorZHdzbFR0TStzPVwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgY29tcG9uZW50czoge1xyXG4gICAgICAgIGNvbWluZ3Nvb246IGNvbWluZ3Nvb25cclxuICAgIH0sXHJcbiAgICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAvLyBmaXgtYm9keS1zcGFjZVxyXG4gICAgICAgIHZhciBuYXZIZWlnaHQgPSAkKCcud2luZG93LXRvcCcpLmhlaWdodCgpO1xyXG4gICAgICAgIHZtLm5hdkhlaWdodCA9IG5hdkhlaWdodCAtIDMwO1xyXG4gICAgICAgICQoJ2JvZHknKS5jc3MoJ21hcmdpbi10b3AnLCB2bS5uYXZIZWlnaHQpO1xyXG4gICAgICAgICQoXCIubmF2LWxvY2tcIikuY2xpY2soZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJChcImJvZHlcIikucmVtb3ZlQ2xhc3MoXCJfZnJlZXplXCIpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn0pXHJcblxyXG5cclxuVnVlLmNvbXBvbmVudCgnY29taW5nc29vbicsIHtcclxuICAgIHRlbXBsYXRlOiBcIiNjb21pbmdzb29uXCIsXHJcbiAgICBwcm9wczogWydTdGFydERhdGUnLCAnbW9kZSddLFxyXG4gICAgZGF0YTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGNvbWluZ3Nvb246IGZhbHNlLFxyXG4gICAgICAgICAgICBkYXRlOiB7XHJcbiAgICAgICAgICAgICAgICB0b3RhbDogMCxcclxuICAgICAgICAgICAgICAgIGRheXM6IDAsXHJcbiAgICAgICAgICAgICAgICBob3VyczogMCxcclxuICAgICAgICAgICAgICAgIG1pbnV0ZXM6IDAsXHJcbiAgICAgICAgICAgICAgICBzZWNvbmRzOiAwXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ICAgXHJcbiAgICB9LFxyXG4gICAgbW91bnRlZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBwYWRMZWZ0ID0gZnVuY3Rpb24gKHN0ciwgbGVuKSB7XHJcbiAgICAgICAgICAgIHN0ciA9ICcnICsgc3RyO1xyXG4gICAgICAgICAgICBpZiAoc3RyLmxlbmd0aCA+PSBsZW4pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdHI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFkTGVmdChcIjBcIiArIHN0ciwgbGVuKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAvLyB2bS5zdGF0ZV9jaGVjaygpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgIC8vICAgICB2YXIgZGF0YSA9IHJlcy5EYXRhO1xyXG4gICAgICAgIC8vICAgICB2bS5zdGFydF9kYXRlID0gZGF0YS5TdGFydERhdGVUaW1lO1xyXG4gICAgICAgIHZhciB0aW1laW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB0ID0gRGF0ZS5wYXJzZShuZXcgRGF0ZSh2bS5TdGFydERhdGUpKSAtIERhdGUucGFyc2UobmV3IERhdGUoKSk7XHJcbiAgICAgICAgICAgIHZhciBzZWNvbmRzID0gTWF0aC5mbG9vcigodCAvIDEwMDApICUgNjApO1xyXG4gICAgICAgICAgICB2YXIgbWludXRlcyA9IE1hdGguZmxvb3IoKHQgLyAxMDAwIC8gNjApICUgNjApO1xyXG4gICAgICAgICAgICB2YXIgaG91cnMgPSBNYXRoLmZsb29yKCh0IC8gKDEwMDAgKiA2MCAqIDYwKSkgJSAyNCk7XHJcbiAgICAgICAgICAgIHZhciBkYXlzID0gTWF0aC5mbG9vcih0IC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTtcclxuICAgICAgICAgICAgdm0uZGF0ZSA9IHtcclxuICAgICAgICAgICAgICAgICd0b3RhbCc6IHQsXHJcbiAgICAgICAgICAgICAgICAnZGF5cyc6IHBhZExlZnQoZGF5cywgMiksXHJcbiAgICAgICAgICAgICAgICAnaG91cnMnOiBwYWRMZWZ0KGhvdXJzLCAyKSxcclxuICAgICAgICAgICAgICAgICdtaW51dGVzJzogcGFkTGVmdChtaW51dGVzLCAyKSxcclxuICAgICAgICAgICAgICAgICdzZWNvbmRzJzogcGFkTGVmdChzZWNvbmRzLCAyKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpZiAodm0uZGF0ZS50b3RhbCA8PSAwIHx8IHZtLm1vZGUgPT0gXCJUZXN0aW5nXCIpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZWludGVydmFsKTtcclxuICAgICAgICAgICAgICAgIHZtLmNvbWluZ3Nvb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZtLmNvbWluZ3Nvb24gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgLy8gfSk7XHJcbiAgICB9LFxyXG59KVxyXG4iXX0=
