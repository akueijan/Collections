"use strict";function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,i,t){return i&&_defineProperties(e.prototype,i),t&&_defineProperties(e,t),e}var canGame=function(){function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10;_classCallCheck(this,i),this.speed=e,this.mainSize={width:window.innerWidth,height:window.innerHeight},this.rot=this.mainSize.height/this.mainSize.width,this.imgs={gameBg:{src:"./images/road.jpg"},playBtn_off:{src:"./images/game_brakes-off.png"},playBtn_on:{src:"./images/game_brakes-on.png"}}}return _createClass(i,[{key:"init",value:function(){var e=this,i=document.querySelector("#canvas");i.width=e.mainSize.width,i.height=e.mainSize.height;var t,n,a=i.getContext("2d");e.canvas=i,e.ctx=a;var r=new Image;r.onload=function(){t=-(r.height/e.rot-i.height),n=-(r.height/e.rot-t),a.drawImage(r,0,0,r.width,r.height,0,t,i.width,r.height/e.rot),a.drawImage(r,0,0,r.width,r.height,0,n,i.width,r.height/e.rot),e.control()},r.src=e.imgs.gameBg.src}},{key:"control",value:function(){var i=this,t=new Image,n=new Image,e=new Promise(function(e){t.onload=function(){e()},t.src=i.imgs.playBtn_on.src}),a=new Promise(function(e){n.onload=function(){e()},n.src=i.imgs.playBtn_off.src});Promise.all([e,a]).then(function(){i.ctx.drawImage(n,0,0,n.width,n.height,i.canvas.width-n.width/2-10,canvas.height-n.height/2-10,n.width/2,n.height/2),i.playOn=t,i.playOff=n})}}]),i}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkdhbWUuanMiXSwibmFtZXMiOlsiY2FuR2FtZSIsInNwZWVkIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIm1haW5TaXplIiwid2lkdGgiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJyb3QiLCJpbWdzIiwiZ2FtZUJnIiwic3JjIiwicGxheUJ0bl9vbiIsIl9zZWxmIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicGxheUJ0bl9vZmYiLCJnYW1lQmdZMSIsImdhbWVCZ1kyIiwiY2FudmFzIiwiZ2V0Q29udGV4dCIsImN0eCIsImdhbWVCZ2ltZyIsIkltYWdlIiwib25sb2FkIiwiZHJhd0ltYWdlIiwicGxheU9mZiIsInJlc29sdmUiLCJwcnBsYXlPZmYiLCJQcm9taXNlIiwiY2xlYXJSZWN0IiwiYWxsIiwicHJwbGF5T24iLCJ0aGVuIiwicGxheU9uIl0sIm1hcHBpbmdzIjoidVpBQU1BLG1CQUNGLFNBQUFBLElBQXNCLElBQVZDLEVBQVUsRUFBQUMsVUFBQUMsYUFBQUMsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQUosR0FBSUcsZ0JBQUFDLEtBQUFOLEdBQ2xCTSxLQUFLTCxNQUFRQSxFQUNiSyxLQUFLQyxTQUFXLENBQ1pDLE1BQU9DLE9BQU9DLFdBQ2RDLE9BQVFGLE9BQU9HLGFBRW5CTixLQUFLTyxJQUFNUCxLQUFLQyxTQUFTSSxPQUFTTCxLQUFLQyxTQUFTQyxNQVBsRFIsS0FRT2MsS0FBTyxDQUNSQyxPQUFRLENBQ0pDLElBQUsscUJBVExmLFlBQVUsQ0FZVmUsSUFBSyxnQ0FFVEMsV0FBWSxDQWJoQkQsSUFBYWYsb0ZBS2IsSUFBQWlCLEVBQWdCWCxLQUNYTyxFQUFPSyxTQUFBQyxjQUFBLFdBQ1JMLEVBQVFQLE1BQUFVLEVBQUFYLFNBQUFDLE1BQ0pRLEVBQUtMLE9BQUFPLEVBQUFYLFNBQUFJLE9BRVRVLElBSU9DLEVBREtDLEVBSFpGLEVBQVdHLEVBQUVDLFdBQUEsTUFDVFQsRUFBS1EsT0FBQUEsRUFMRE4sRUFBQVEsSUFBQUEsRUFBWixJQUFBQyxFQUFBLElBQUFDLE1BMkJBRCxFQUFVRSxPQUFTLFdBQ2ZQLElBQWNLLEVBQVVoQixPQUFPTyxFQUFNTCxJQUFLVyxFQUFPYixRQUNqRFksSUFBYUksRUFqQmRoQixPQUFBTyxFQUFBTCxJQUFBUyxHQW1CQ0ksRUFBSUksVUFBVUgsRUFBVSxFQUFFLEVBQUVBLEVBQVVuQixNQUFNbUIsRUFBVWhCLE9BQU8sRUFBRVcsRUFBU0UsRUFBT2hCLE1BQU1tQixFQUFVaEIsT0FBT08sRUFBTUwsS0FqQjVHVyxFQUFNTSxVQUFHWCxFQUFTQyxFQUFBQSxFQUFBQSxFQUFjWixNQUFwQ21CLEVBQUFoQixPQUFBLEVBQUFZLEVBQUFDLEVBQUFoQixNQUFBbUIsRUFBQWhCLE9BQUFPLEVBQUFMLEtBRU1LLEVBQUNQLFdBR1BPLEVBQUFGLElBQWVRLEVBQWZWLEtBQUFDLE9BQUFDLHNDQW9CSU0sSUFBQUEsRUFBWUosS0FDWkssRUFBWUwsSUFBS1UsTUFrQmpCRyxFQUFVLElBQUlILE1BakJYTixFQUFXRSxJQUFBQSxRQUFPYixTQUFyQnFCLEdBQ0lWLEVBQVFPLE9BQUtGLFdBQ2hCSyxLQUNFVCxFQUFBQSxJQUFXQyxFQUFPYixLQUFyQk0sV0FBNkJELE1BRTVCaUIsRUFBQSxJQUFBQyxRQUFBLFNBQUFGLEdBb0JERCxFQUFRRixPQUFTLFdBbkJiTSxLQUVBTCxFQUFBQSxJQUFVSCxFQUFkYixLQUFBTyxZQUFzQ2IsTUFLN0MwQixRQUFBRSxJQUFBLENBQUFDLEVBQUFKLElBQUFLLEtBQUEsV0FrQk9wQixFQUFNUSxJQUFJSSxVQUFVQyxFQUFTLEVBQUcsRUFBR0EsRUFBUXZCLE1BQU91QixFQUFRcEIsT0FBUU8sRUFBTU0sT0FBT2hCLE1BQVF1QixFQUFRdkIsTUFBTSxFQUFJLEdBQUlnQixPQUFPYixPQUFTb0IsRUFBUXBCLE9BQU8sRUFBSSxHQUFJb0IsRUFBUXZCLE1BQU0sRUFBR3VCLEVBQVFwQixPQUFPLEdBRXBMTyxFQUFNcUIsT0FBU0EsRUFsQmZyQixFQUFRYSxRQUFaQSIsImZpbGUiOiJHYW1lLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgY2FuR2FtZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihzcGVlZD0xMCkge1xyXG4gICAgICAgIHRoaXMuc3BlZWQgPSBzcGVlZFxyXG4gICAgICAgIHRoaXMubWFpblNpemUgPSB7XHJcbiAgICAgICAgICAgIHdpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHRcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yb3QgPSB0aGlzLm1haW5TaXplLmhlaWdodCAvIHRoaXMubWFpblNpemUud2lkdGhcclxuICAgICAgICB0aGlzLmltZ3MgPSB7XHJcbiAgICAgICAgICAgIGdhbWVCZzoge1xyXG4gICAgICAgICAgICAgICAgc3JjOiAnLi9pbWFnZXMvcm9hZC5qcGcnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHBsYXlCdG5fb2ZmOiB7XHJcbiAgICAgICAgICAgICAgICBzcmM6ICcuL2ltYWdlcy9nYW1lX2JyYWtlcy1vZmYucG5nJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBwbGF5QnRuX29uOiB7XHJcbiAgICAgICAgICAgICAgICBzcmM6ICcuL2ltYWdlcy9nYW1lX2JyYWtlcy1vbi5wbmcnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIGxldCBfc2VsZiA9IHRoaXNcclxuICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NhbnZhcycpXHJcbiAgICAgICAgY2FudmFzLndpZHRoID0gX3NlbGYubWFpblNpemUud2lkdGhcclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gX3NlbGYubWFpblNpemUuaGVpZ2h0XHJcblxyXG4gICAgICAgIGxldCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKVxyXG4gICAgICAgIF9zZWxmLmNhbnZhcyA9IGNhbnZhc1xyXG4gICAgICAgIF9zZWxmLmN0eCA9IGN0eFxyXG5cclxuICAgICAgICBsZXQgZ2FtZUJnWTFcclxuICAgICAgICBsZXQgZ2FtZUJnWTJcclxuICAgICAgICBsZXQgZ2FtZUJnaW1nID0gbmV3IEltYWdlKClcclxuICAgICAgICBsZXQgZ2FtZUJnaW1nMlxyXG5cclxuICAgICAgICBnYW1lQmdpbWcub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBnYW1lQmdZMSA9IC0oKGdhbWVCZ2ltZy5oZWlnaHQvX3NlbGYucm90KS1jYW52YXMuaGVpZ2h0KVxyXG4gICAgICAgICAgICBnYW1lQmdZMiA9IC0oZ2FtZUJnaW1nLmhlaWdodC9fc2VsZi5yb3QgLSBnYW1lQmdZMSlcclxuICAgICAgICAgICAgLy8gZ2FtZUJnaW1nMiA9IGdhbWVCZ2ltZ1xyXG4gICAgICAgICAgICBjdHguZHJhd0ltYWdlKGdhbWVCZ2ltZywwLDAsZ2FtZUJnaW1nLndpZHRoLGdhbWVCZ2ltZy5oZWlnaHQsMCxnYW1lQmdZMSxjYW52YXMud2lkdGgsZ2FtZUJnaW1nLmhlaWdodC9fc2VsZi5yb3QpXHJcbiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoZ2FtZUJnaW1nLDAsMCxnYW1lQmdpbWcud2lkdGgsZ2FtZUJnaW1nLmhlaWdodCwwLGdhbWVCZ1kyLGNhbnZhcy53aWR0aCxnYW1lQmdpbWcuaGVpZ2h0L19zZWxmLnJvdClcclxuICAgICAgICAgICAgLy8gbGV0IGdhbWVCZ1NlaSA9IHNldEludGVydmFsKGRyYXdCZywgMjApXHJcbiAgICAgICAgICAgIF9zZWxmLmNvbnRyb2woKVxyXG4gICAgICAgIH1cclxuICAgICAgICBnYW1lQmdpbWcuc3JjID0gX3NlbGYuaW1ncy5nYW1lQmcuc3JjXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGRyYXdCZygpIHtcclxuICAgICAgICAgICAgZ2FtZUJnWTEgKz0gX3NlbGYuc3BlZWRcclxuICAgICAgICAgICAgZ2FtZUJnWTIgKz0gX3NlbGYuc3BlZWRcclxuICAgICAgICAgICAgaWYoZ2FtZUJnWTEgPiBjYW52YXMuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICBnYW1lQmdZMSA9IC0oZ2FtZUJnaW1nLmhlaWdodC9fc2VsZi5yb3QgLSBnYW1lQmdZMilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihnYW1lQmdZMiA+IGNhbnZhcy5oZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgIGdhbWVCZ1kyID0gLShnYW1lQmdpbWcuaGVpZ2h0L19zZWxmLnJvdCAtIGdhbWVCZ1kxKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwwLGNhbnZhcy53aWR0aCxjYW52YXMuaGVpZ2h0KVxyXG4gICAgICAgICAgICBjdHguZHJhd0ltYWdlKGdhbWVCZ2ltZywwLDAsZ2FtZUJnaW1nLndpZHRoLGdhbWVCZ2ltZy5oZWlnaHQsMCxnYW1lQmdZMSxjYW52YXMud2lkdGgsZ2FtZUJnaW1nLmhlaWdodC9fc2VsZi5yb3QpXHJcbiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoZ2FtZUJnaW1nLDAsMCxnYW1lQmdpbWcud2lkdGgsZ2FtZUJnaW1nLmhlaWdodCwwLGdhbWVCZ1kyLGNhbnZhcy53aWR0aCxnYW1lQmdpbWcuaGVpZ2h0L19zZWxmLnJvdClcclxuXHJcbiAgICAgICAgICAgIC8vIF9zZWxmLmNvbnRyb2woKS5kcmF3QnRuKClcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG4gICAgY29udHJvbCgpIHtcclxuICAgICAgICBsZXQgX3NlbGYgPSB0aGlzXHJcbiAgICAgICAgbGV0IHBsYXlPbiA9IG5ldyBJbWFnZSgpXHJcbiAgICAgICAgbGV0IHBsYXlPZmYgPSBuZXcgSW1hZ2UoKVxyXG4gICAgICAgIGxldCBwcnBsYXlPbiA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgIHBsYXlPbi5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwbGF5T24uc3JjID0gX3NlbGYuaW1ncy5wbGF5QnRuX29uLnNyY1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgbGV0IHBycGxheU9mZiA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgIHBsYXlPZmYub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcGxheU9mZi5zcmMgPSBfc2VsZi5pbWdzLnBsYXlCdG5fb2ZmLnNyY1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgUHJvbWlzZS5hbGwoW3BycGxheU9uLHBycGxheU9mZl0pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBfc2VsZi5jdHguZHJhd0ltYWdlKHBsYXlPZmYsIDAsIDAsIHBsYXlPZmYud2lkdGgsIHBsYXlPZmYuaGVpZ2h0LCBfc2VsZi5jYW52YXMud2lkdGggLSBwbGF5T2ZmLndpZHRoLzIgLSAxMCwgY2FudmFzLmhlaWdodCAtIHBsYXlPZmYuaGVpZ2h0LzIgLSAxMCwgcGxheU9mZi53aWR0aC8yLCBwbGF5T2ZmLmhlaWdodC8yKVxyXG4gICAgICAgICAgICAvLyBsZXQgY29udHJvbFNlaSA9IHNldEludGVydmFsKGRyYXdCdG4sIDIwKVxyXG4gICAgICAgICAgICBfc2VsZi5wbGF5T24gPSBwbGF5T25cclxuICAgICAgICAgICAgX3NlbGYucGxheU9mZiA9IHBsYXlPZmZcclxuICAgICAgICB9KVxyXG4gICAgICAgIC8vIGZ1bmN0aW9uIGRyYXdCdG4oKSB7XHJcbiAgICAgICAgLy8gICAgIF9zZWxmLmN0eC5jbGVhclJlY3QoMCwwLF9zZWxmLmNhbnZhcy53aWR0aCxfc2VsZi5jYW52YXMuaGVpZ2h0KVxyXG4gICAgICAgIC8vICAgICBfc2VsZi5jdHguZHJhd0ltYWdlKHBsYXlPZmYsIDAsIDAsIHBsYXlPZmYud2lkdGgsIHBsYXlPZmYuaGVpZ2h0LCBfc2VsZi5jYW52YXMud2lkdGggLSBwbGF5T2ZmLndpZHRoLzIgLSAxMCwgY2FudmFzLmhlaWdodCAtIHBsYXlPZmYuaGVpZ2h0LzIgLSAxMCwgcGxheU9mZi53aWR0aC8yLCBwbGF5T2ZmLmhlaWdodC8yKVxyXG4gICAgICAgIC8vIH1cclxuICAgIH1cclxufSJdfQ==
