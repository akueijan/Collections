"use strict";var registry_view=new Vue({el:"#app",data:{lineid:"",name:"",birthday:{year:"1980",month:"1",day:"1"},phone:"",car_no:"",owner:!1,agree:!1,otp:"",check:!0,isform1:!0,isform2:!1,SMScount:6,SMSdisabled:59,plate:"",TO:{},notebox:!1,pageload:!0,firstCheck:!0},computed:{},watch:{car_no:function(e){this.plate=e.toUpperCase()}},methods:{GetProfile:function(){var r=this,e={lineid:r.lineid,act:r.act};return $.ajax({url:friendo_url+"CarMember/GetProfile",method:"POST",headers:{auth:r.webToken},error:function(e){alert("系統忙碌中，請稍後再試!"),r.logger(0,e,"GetProfile")},data:e,dataType:"json"})},EventStart:function(){var t=this;t.logger(3,"event start:"+t.lineid,"EventStart"),t.JoinAct().then(function(e){e.Success?e.Data.game_over?t.error_msg="活動已結束!":(console.log(e),e.Data.is_member&&e.Data.played?(t.logger(3,"is member and played:"+t.lineid,"JoinAct"),location="ending.html"):(t.pageload=!1,t.GetProfile().then(function(e){if(e.Success){if(t.logger(3,e,"GetProfile"),t.name=e.Data.name,t.phone=e.Data.phone,e.Data.plate&&(t.car_no=e.Data.plate,t.owner=1),e.Data.birthday){var r=e.Data.birthday.split("/");t.birthday.year=r[0],t.birthday.month=r[1],t.birthday.day=r[2]}}else t.logger(0,e,"GetProfile")}))):alert(e.Message)})},JoinAct:function(){var r=this,e={act:r.act,lineid:r.lineid,finished:!1};return $.ajax({url:friendo_url+"CarMember/JoinAct",method:"POST",headers:{auth:r.webToken},data:e,error:function(e){alert("系統忙碌中，請稍後再試!"),r.logger(0,e,"JoinAct"),location.reload()},dataType:"json"})},SendOtp:function(){var r=this,e={lineid:r.lineid,phone:r.phone,act:r.act};return r.logger(3,e,"SendData"),$.ajax({url:friendo_url+"CarMember/SendOtp",method:"POST",headers:{auth:r.webToken},data:e,error:function(e){alert("系統忙碌中，請稍後再試!"),r.loading=!1,r.logger(0,e,"SendOtp")},dataType:"json"})},setSMSTime:function(){var e=this;e.TO=setInterval(function(){e.SMSdisabled--,e.SMSdisabled<0&&(clearInterval(e.TO),e.SMSdisabled=60)},1e3)},SendData:function(){var r=this;if(""!=r.name&&String(r.name).match(/^[\u4E00-\u9FA5]{2,5}$/))if(""!=r.birthday.year)if(""!=r.birthday.month)if(""!=r.birthday.day)if(r.phone&&String(r.phone).match(/^09[0-9]{8}$/))if(1!=r.owner||String(r.plate).match(/^[0-9A-Z]{1,4}-[0-9A-Z]{1,4}$/))if(0!=r.agree){var e=new Date(r.birthday.year,r.birthday.month-1,r.birthday.day);e.getDate()==r.birthday.day&&e.getMonth()==r.birthday.month-1&&e.getFullYear()==r.birthday.year?r.loading||(r.gaEvant("click","registry_送出資料","registry_送出資料"),r.loading=!0,r.SendOtp().then(function(e){r.loading=!1,r.logger(3,e,"SendData"),e.Success&&0==e.ErrorCode?r.checkResult(e)?(r.gaEvant("click","registry_認證簡訊","registry_認證簡訊"),r.firstCheck=!1,r.notebox=!1,r.isform1=!1,r.isform2=!0,r.SMSdisabled=59,r.setSMSTime()):r.gaEvant("result","registry_送出失敗","registry_送出失敗"):r.RSerror(e)})):r.error_msg="請選取正確的出生日期"}else r.error_msg="請點擊確認，同意會員服務條款";else r.error_msg="車牌格式錯誤";else r.error_msg="手機號碼格式錯誤";else r.error_msg="請選取出生日";else r.error_msg="請選取出生月份";else r.error_msg="請選取出生年份";else r.error_msg="中文姓名格式錯誤"},resendOTP:function(){var r=this;r.loading||(r.loading=!0,r.firstCheck=!0,r.logger(3,"resend OTP","resendOTP"),r.setSMSTime(),r.SendOtp().then(function(e){if(r.loading=!1,e.Success&&0==e.ErrorCode)r.checkResult(e),r.firstCheck=!1;else switch(e.ErrorCode){case 401:alert("未授權使用網站");break;case 502:alert("發送驗證碼系統忙碌中");break;default:return}}).fail(function(e){alert("系統忙碌中，請稍後再試!"),r.loading=!1,console.log(e)}))},SaveProfile:function(){var r=this,e={act:r.act,lineid:r.lineid,name:r.name,birthday:r.birthday.year+"/"+r.birthday.month+"/"+r.birthday.day,phone:r.phone,plate:r.plate,otp:r.otp};return r.logger(3,e,"SaveProfile"),$.ajax({url:friendo_url+"CarMember/SaveProfile/",method:"POST",headers:{auth:r.webToken},error:function(e){alert("系統忙碌中，請稍後再試!"),r.loading=!1,r.logger(0,e,"SaveProfile")},dataType:"json",data:e})},FinishAct:function(){var r=this,e={act:r.act,lineid:r.lineid};return r.logger(3,e,"FinishAct"),$.ajax({url:friendo_url+"CarMember/FinishAct",method:"POST",headers:{auth:r.webToken},error:function(e){alert("系統忙碌中，請稍後再試!"),r.loading=!1,r.logger(0,e,"FinishAct")},dataType:"json",data:e})},SendRegistry:function(){var r=this;""!=r.otp&&r.otp.match(/^[0-9]{6}$/)?r.loading||(r.loading=!0,r.gaEvant("click","registry_送出認證","registry_送出認證"),r.SaveProfile().then(function(e){r.logger(3,e,"SendRegistry"),console.log(e),r.loading=!1,r.checkResult(e)&&0==e.Data?r.FinishAct().then(function(){r.gaEvant("result","registry_認證成功","registry_認證成功"),location="ending.html"}):r.gaEvant("result","registry_認證失敗","registry_認證失敗")})):r.error_msg="認證碼格式錯誤"},checkResult:function(e){var r=this;if(r.logger(3,JSON.stringify(e)+"lineID:"+r.lineid,"checkResult"),e.Success&&0==e.ErrorCode){if(0<e.Data&&e.Data<6)return r.SMScount=e.Data,!!r.firstCheck||(r.error_msg="驗證碼錯誤，請重新輸入，剩餘次數為:"+e.Data,!1);if(0==e.Data)return!0;switch(e.Data){case-1:r.error_msg="驗證次數已達上線，請洽NISSAN客服0800-088-888。";break;case-2:r.error_msg="驗證碼重送次數已達上線，請洽NISSAN客服0800-088-888。";break;case-3:r.error_msg="距離上次重送時間過短，請稍後再試。";break;case-4:r.error_msg="驗證碼已過期，請重新發送。";break;case-7:r.error_msg="資料填寫錯誤，請再確認一次。";break;case-8:r.error_msg="此電話號碼已綁定，請使用其他號碼或洽NISSAN客服0800-088-888。";break;case-9:location="ending.html";break;case-10:alert("您尚未同意LINE使用您的個人資訊，請重新授權。"),location="/CarMember/Index?state=P486ZGhmO4KqAJDrrzsinQ==";break;default:return!1}return!1}switch(e.ErrorCode){case 401:alert("未授權使用網站");break;case 502:alert("系統忙碌中，請稍後再試!");break;default:return}},RSerror:function(e){switch(this.logger(0,e,"RSerror"),e.ErrorCode){case 401:alert("未授權使用網站");break;case 502:alert("發送驗證碼系統忙碌中");break;default:return void alert("系統忙碌中，請稍後再試!")}},refix:function(){this.isform1=!0,this.isform2=!1,this.firstCheck=!0,clearInterval(this.TO)},getYear:function(){var e=(new Date).getFullYear(),r=$(".selyear"),t=void 0;for(t=e-100;t<e+1;t++)r.append("<option>"+t+"</option>")},getMonth:function(){var e=void 0,r=$(".selmonth");for(e=1;e<13;e++)r.append("<option>"+e+"</option>")},getDay:function(){var e=void 0,r=$(".selday");for(e=1;e<32;e++)r.append("<option>"+e+"</option>")},note_toggle:function(e){$(".note__title").toggleClass("note__title--active"),this.notebox=!this.notebox}},mounted:function(){$(window).on("online offline",this.checkOnline),findGetParameter("token")?(this.lineid=findGetParameter("token"),window.history.replaceState("","","registry.html"),this.EventStart()):location="/CarMember/Index?state=P486ZGhmO4KqAJDrrzsinQ=="}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZ2lzdHJ5LmpzIl0sIm5hbWVzIjpbInJlZ2lzdHJ5X3ZpZXciLCJWdWUiLCJlbCIsImRhdGEiLCJsaW5laWQiLCJuYW1lIiwiYmlydGhkYXkiLCJ5ZWFyIiwibW9udGgiLCJwaG9uZSIsImNhcl9ubyIsIm93bmVyIiwiYWdyZWUiLCJvdHAiLCJjaGVjayIsImlzZm9ybTEiLCJpc2Zvcm0yIiwiU01TY291bnQiLCJTTVNkaXNhYmxlZCIsInBsYXRlIiwiVE8iLCJub3RlYm94IiwicGFnZWxvYWQiLCJjb21wdXRlZCIsIndhdGNoIiwidmFsIiwidGhpcyIsInRvVXBwZXJDYXNlIiwibWV0aG9kcyIsIkdldFByb2ZpbGUiLCJ2bSIsImdldF9kYXRhIiwiYWN0IiwiJCIsImFqYXgiLCJ1cmwiLCJmcmllbmRvX3VybCIsIm1ldGhvZCIsImhlYWRlcnMiLCJhdXRoIiwid2ViVG9rZW4iLCJlcnJvciIsImUiLCJhbGVydCIsImxvZ2dlciIsImRhdGFUeXBlIiwiRXZlbnRTdGFydCIsIkpvaW5BY3QiLCJ0aGVuIiwicmVzdWx0IiwiU3VjY2VzcyIsIkRhdGEiLCJnYW1lX292ZXIiLCJlcnJvcl9tc2ciLCJjb25zb2xlIiwiaXNfbWVtYmVyIiwicGxheWVkIiwibG9jYXRpb24iLCJnZXRCaXJ0aGRheSIsInNwbGl0IiwiZGF5IiwiTWVzc2FnZSIsInBvc3RfZGF0YSIsInJlbG9hZCIsIlNlbmRPdHAiLCJvdHBfZGF0YSIsImxvYWRpbmciLCJzZXRTTVNUaW1lIiwiY2xlYXJJbnRlcnZhbCIsIlNlbmREYXRhIiwiY2FyX3J1bGUiLCJTdHJpbmciLCJtYXRjaCIsInRlc3REYXRlIiwiRGF0ZSIsImdldE1vbnRoIiwiZ2V0RnVsbFllYXIiLCJnYUV2YW50IiwiRXJyb3JDb2RlIiwiY2hlY2tSZXN1bHQiLCJSU2Vycm9yIiwiZmlyc3RDaGVjayIsImZhaWwiLCJGaW5pc2hBY3QiLCJpbnZfcnVsZSIsImxvZyIsIkpTT04iLCJyZWZpeCIsInkiLCJpIiwieWxpc3QiLCJnZXRZZWFyIiwiZGxpc3QiLCJhcHBlbmQiLCJub3RlX3RvZ2dsZSIsIm1saXN0IiwiZ2V0RGF5Iiwid2luZG93IiwiZmluZEdldFBhcmFtZXRlciIsImhpc3RvcnkiLCJyZXBsYWNlU3RhdGUiLCJvYmoiLCJ0b2dnbGVDbGFzcyIsIm1vdW50ZWQiLCJvbiIsImNoZWNrT25saW5lIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFNQSxjQUFnQixJQUFJQyxJQUFJLENBQXhCRCxHQUFBQSxPQUNGRSxLQUFJLENBQ0pDLE9BQU0sR0FDRkMsS0FBQUEsR0FDQUMsU0FGRSxDQUdGQyxLQUFVLE9BQ05DLE1BQU0sSUFDTkMsSUFBQUEsS0FGTUMsTUFIUixHQVFGQSxPQUFPLEdBQ1BDLE9BQUFBLEVBQ0FDLE9BQU8sRUFDUEMsSUFBQUEsR0FDQUMsT0FaRSxFQWFGQyxTQUFPLEVBQ1BDLFNBQVMsRUFDVEMsU0FBUyxFQUNUQyxZQWhCRSxHQWlCRkMsTUFBQUEsR0FDQUMsR0FBQUEsR0FDQUMsU0FuQkUsRUFvQkZDLFVBQVMsRUFDVEMsWUFBVSxHQXJCUkMsU0FGb0IsR0E0QjFCQyxNQUFPLENBQ0hkLE9BQVEsU0FBQWUsR0FDSkMsS0FBS1AsTUFBUU0sRUFBSUUsZ0JBR3pCQyxRQUFTLENBRUxDLFdBQVksV0FDUixJQUFJQyxFQUFLSixLQUNMSyxFQUFXLENBQ1gzQixPQUFVMEIsRUFBRzFCLE9BQ2I0QixJQUFPRixFQUFHRSxLQUVkLE9BQU9DLEVBQUVDLEtBQUssQ0FDVkMsSUFBS0MsWUFBYyx1QkFDbkJDLE9BQVEsT0FDUkMsUUFBUyxDQUNMQyxLQUFRVCxFQUFHVSxVQUVmQyxNQUFPLFNBQUFDLEdBQ0hDLE1BQU0sZ0JBQ05iLEVBQUdjLE9BQU8sRUFBR0YsRUFBRyxlQUVwQnZDLEtBQU00QixFQUNOYyxTQUFVLFVBSWxCQyxXQUFZLFdBQ1IsSUFBSWhCLEVBQUtKLEtBRVRJLEVBQUdjLE9BQU8sRUFBRyxlQUFBZCxFQUFlQSxPQUE1QixjQUNBQSxFQUFHaUIsVUFBVUMsS0FBSyxTQUFVQyxHQUNwQkEsRUFBT0MsUUFDSEQsRUFBT0UsS0FBS0MsVUFDWnRCLEVBQUd1QixVQUFZLFVBSWZDLFFBQUlMLElBQU9FLEdBQ1ByQixFQUFHYyxLQUFIVyxXQUFhTixFQUFBRSxLQUFBSyxRQUNiQyxFQUFBQSxPQUFBQSxFQUFXLHdCQUFYM0IsRUFBQTFCLE9BQUEsV0FGSnFELFNBSUssZ0JBR0czQixFQUFBUixVQUFJMkIsRUFDQW5CLEVBQUFBLGFBQUdjLEtBQVVLLFNBQVFBLEdBQ3JCbkIsR0FBQUEsRUFBQW9CLFNBUUlwQixHQVBKQSxFQUFHckIsT0FBSCxFQUFXd0MsRUFBT0UsY0FDbEJyQixFQUFBekIsS0FBSTRDLEVBQVk5QixLQUFoQmQsS0FDSXlCLEVBQUFBLE1BQUdwQixFQUFTdUMsS0FBT0UsTUFDbkJyQixFQUFHbkIsS0FBSFEsUUFDSFcsRUFBQXBCLE9BQUF1QyxFQUFBRSxLQUFBaEMsTUFDRzhCLEVBQUFBLE1BQUEsR0FFQW5CLEVBQUd4QixLQUFTQyxTQUFPbUQsQ0FDbkI1QixJQUFHeEIsRUFBSDJDLEVBQW9CUyxLQUFBQSxTQUFwQkMsTUFBQSxLQUNBN0IsRUFBR3hCLFNBQVNzRCxLQUFNRixFQUFBLEdBQ3JCNUIsRUFBQXhCLFNBQUFFLE1BQUFrRCxFQUFBLEdBRUE1QixFQUFBeEIsU0FBQXNELElBQUFGLEVBQUEsU0FJWjVCLEVBQUFjLE9BQUEsRUFBQUssRUFBQSxrQkFRakJOLE1BQUFNLEVBQUFZLFlBS1FkLFFBQUEsV0FDQSxJQUFBakIsRUFBQUosS0FISm9DLEVBQUEsQ0FLQTlCLElBQVNFLEVBQUtGLElBQ1ZHLE9BQUtDLEVBQUFBLE9BQ0xDLFVBQVEsR0FFSixPQUFBSixFQUFBQyxLQUFBLENBREtDLElBSENDLFlBQUEsb0JBTVZqQyxPQUFNMkQsT0FDTnJCLFFBQU8sQ0FDSEUsS0FBTWIsRUFBQVUsVUFFTmlCLEtBQUFBLEVBQ0hoQixNQVhTLFNBQUFDLEdBWVZHLE1BQVUsZ0JBWmRmLEVBQUFjLE9BQUEsRUFBQUYsRUFBQSxXQTVFQ2UsU0FBQU0sVUE0RkxDLFNBQVMsVUFJREEsUUFBQSxXQUNBLElBQUFsQyxFQUFBSixLQUhKdUMsRUFBQSxDQUtHckIsT0FBVXFCLEVBQUFBLE9BQ2J4RCxNQUFPcUIsRUFBT3JCLE1BQ1YwQixJQUFLQyxFQUFBQSxLQUdELE9BREpFLEVBQUFBLE9BQUFBLEVBQVMyQixFQUFBLFlBQ0xoQyxFQUFBQyxLQUFBLENBREtDLElBSENDLFlBQUEsb0JBTVZqQyxPQUFNOEQsT0FDTnhCLFFBQU8sQ0FDSEUsS0FBTWIsRUFBQVUsVUFFTlYsS0FBQUEsRUFDSFcsTUFYUyxTQUFBQyxHQVlWRyxNQUFVLGdCQVpkZixFQUFBb0MsU0FBQSxFQXBHQ3BDLEVBQUFjLE9BQUEsRUFBQUYsRUFBQSxZQW9IR1osU0FBSixVQUdJcUMsV0FBR3JDLFdBQ0NzQyxJQUFBQSxFQUFBQSxLQUNBdEMsRUFBQUEsR0FBQUEsWUFBR1osV0FDTlksRUFBQVosY0FMR1ksRUFBUlosWUFBQSxJQXJIQ2tELGNBQUF0QyxFQUFBVixJQTZITFUsRUFBQVosWUFBQSxLQUVJLE1BR0FtRCxTQUFJQyxXQUNKLElBQUl4QyxFQUFHekIsS0FLSHlCLEdBQUd1QixJQUFIdkIsRUFBR3VCLE1BQVlrQixPQUFmekMsRUFBQXpCLE1BQUFtRSxNQUpHbkIsMEJBU0gsR0FBQSxJQUFBdkIsRUFBQXhCLFNBQUFDLEtBRUMsR0FJaUJnRSxJQUFqQnpDLEVBQUtBLFNBQUR0QixNQUtMc0IsR0FBQSxJQUFHdUIsRUFBQUEsU0FBWU8sSUFLZixHQUFBOUIsRUFBQXJCLE9BQUE4RCxPQUFBekMsRUFBQXJCLE9BQUErRCxNQXhCQSxnQkE0QkFDLEdBQUEsR0FBQUEsRUFBQUEsT0FBeUJuRSxPQUFId0IsRUFBWThCLE9BQU9hLE1BMUJqQ25FLGlDQW9CUCxHQUFnQixHQUFad0IsRUFBR2xCLE1BQVAsQ0FlR2tCLElBQUFBLEVBQUdvQyxJQUFIUSxLQUFhNUMsRUFBYnhCLFNBQUFDLEtBQUF1QixFQUFBeEIsU0FBQUUsTUFBQSxFQUFBc0IsRUFBQXhCLFNBQUFzRCxLQUNBOUIsRUFBR2MsV0FBVUssRUFBUTNDLFNBQUFzRCxLQUFyQmEsRUFBQUUsWUFBQTdDLEVBQUF4QixTQUFBRSxNQUFBLEdBQUFpRSxFQUFBRyxlQUFBOUMsRUFBQXhCLFNBQUFDLEtBS1F1QixFQUFBQSxVQUNBQSxFQUFBQSxRQUFBQSxRQUFHZixnQkFBSCxpQkFDQWUsRUFBQUEsU0FBQUEsRUFDQUEsRUFBQUEsVUFBQUEsS0FBR1osU0FBSCtCLEdBQ0FuQixFQUFBQSxTQUFHcUMsRUFDTnJDLEVBQUFjLE9BUkQsRUFTS0ssRUFBQSxZQUNEbkIsRUFBRytDLFNBQWtCLEdBQVY1QixFQUFVNkIsVUFDeEJoRCxFQUFBaUQsWUFBQTlCLElBQ0VuQixFQUFBK0MsUUFBQSxRQUFBLGdCQUFBLGlCQUNBRyxFQUFBQSxZQUFILEVBQ0hsRCxFQUFBVCxTQUFBLEVBbEJMUyxFQUFBZixTQUFBLEVBb0JIZSxFQUFBZCxTQUFBLEVBN0xBYyxFQUFBWixZQUFBLEdBK0xNWSxFQUFBcUMsY0FHSHJDLEVBQWErQyxRQUFiLFNBQUEsZ0JBQUEsaUJBR0dWLEVBQUFBLFFBQUhsQixNQXpCSW5CLEVBQUF1QixVQUFXSCxrQkFOZnBCLEVBQUNBLFVBQVksc0JBSmJBLEVBQUd1QixVQUFZLGNBSmxCdkIsRUFBQXVCLFVBQUEsZ0JBTEd2QixFQUFBdUIsVUFBQSxjQUxBdkIsRUFBR3VCLFVBQVksZUFUZHZCLEVBSUF1QixVQUFPL0MsZUFOUndCLEVBQUF1QixVQUFBLFlBaUVRdkIsVUFBQUEsV0FDSCxJQUFBQSxFQUhESixLQUlJSSxFQUFBb0MsVUFDSXBDLEVBQUFvQyxTQUFBLEVBQ0l2QixFQUFBQSxZQUFBQSxFQUNBYixFQUFBYyxPQUFBLEVBQUEsYUFBQSxhQUNKZCxFQUFBcUMsYUFDSXhCLEVBQUFBLFVBQUFBLEtBQUFBLFNBQU1NLEdBRVYsR0FESW5CLEVBQUFvQyxTQUFBLEVBQ0pqQixFQUFBQyxTQUFBLEdBQUFELEVBQUE2QixVQUNJaEQsRUFBQWlELFlBQUE5QixHQVJSbkIsRUFTQ21ELFlBQUEsT0FFRCxPQUFBaEMsRUFBVUEsV0FDUixLQUFBLElBQ05OLE1BQUEsV0FDWU0sTUFwQmhCLEtBQUEsSUFzQkhOLE1BQUEsY0E1TkEsTUE4TkwsUUFDYSxVQUdMdUMsS0FBT3BELFNBREttQixHQUVaTixNQUFVYixnQkFDVkEsRUFBQW9DLFNBSFksRUFJWlosUUFBWXhCLElBQUd4QixPQUtuQndCLFlBQUEsV0FDQSxJQUFBQSxFQUFTSSxLQUNMQyxFQUFLQyxDQUNMQyxJQUFBQSxFQUFRTCxJQUNSTSxPQUFTUixFQUFBMUIsT0FDTEMsS0FBQXlCLEVBQUF6QixLQURLQyxTQUhDd0IsRUFBQXhCLFNBQUFDLEtBQUEsSUFBQXVCLEVBQUF4QixTQUFBRSxNQUFBLElBQUFzQixFQUFBeEIsU0FBQXNELElBTVZuQixNQUFPWCxFQUFBckIsTUFDSGtDLE1BQUFBLEVBQU14QixNQUNOVyxJQUFHb0MsRUFBQUEsS0FHUHJCLE9BRENmLEVBQUFjLE9BVlMsRUFBQWtCLEVBQUEsZUFXVmpCLEVBQUFBLEtBQVUsQ0FDVjFDLElBQUFBLFlBQU0yRCx5QkFaVnpCLE9BQUEsT0EzT0NDLFFBQUEsQ0EwUExDLEtBQUFULEVBQUFVLFVBRVFWLE1BQUssU0FBVFksR0FDSW9CLE1BQUFBLGdCQUNBaEMsRUFBT0EsU0FESyxFQUVaQSxFQUFBYyxPQUFheEMsRUFBQUEsRUFBQUEsZ0JBRWR3QyxTQUFVa0IsT0FDYjNELEtBQVMrQixLQUlEaUQsVUFBQSxXQURLLElBQUFyRCxFQUhDSixLQU1WZSxFQUFPLENBQ0hFLElBQUFBLEVBQU1YLElBQ05GLE9BQUdvQyxFQUFBQSxRQUdQckIsT0FEQ2YsRUFBQWMsT0FWUyxFQUFBa0IsRUFBQSxhQVdWakIsRUFBQUEsS0FBVSxDQUNWMUMsSUFBQUEsWUFBTTJELHNCQVpWekIsT0FBQSxPQWxRQ0MsUUFBQSxDQWlSTEMsS0FBQVQsRUFBQVUsVUFFUVYsTUFBSyxTQUFUWSxHQUNJMEMsTUFBQUEsZ0JBQ0V2RSxFQUFIcUQsU0FBaUJwQyxFQUNidUIsRUFBQUEsT0FBSCxFQUFlWCxFQUFBLGNBRWxCRyxTQUFBLE9BQ0cxQyxLQUFJK0QsS0FJQXBDLGFBQUFBLFdBQ0F3QixJQUFBQSxFQUFBQSxLQUVJeEIsSUFBSkEsRUFBQWpCLEtBQU9rRSxFQUFBQSxJQUFZOUIsTUFEaEJpQixjQUtFcEMsRUFBQW9DLFVBQ0pwQyxFQUFBb0MsU0FBTSxFQVZYcEMsRUFBRytDLFFBQVEsUUFBUyxnQkFBaUIsaUJBWTdCL0MsRUFBQUEsY0FBRytDLEtBQVEsU0FBVTVCLEdBQ3hCbkIsRUFBQWMsT0FBQSxFQUFBSyxFQUFBLGdCQVpMSyxRQUFBK0IsSUFBQXBDLEdBY0huQixFQUFBb0MsU0FBQSxFQTFTQXBDLEVBQUFpRCxZQUFBOUIsSUFBQSxHQUFBQSxFQUFBRSxLQTRTUXJCLEVBQUFxRCxZQUFBbkMsS0FBVUMsV0FDbkJuQixFQUFBK0MsUUFBQSxTQUFBLGdCQUFBLGlCQUNhUyxTQUFBLGdCQUlGeEQsRUFBQ0EsUUFBR21ELFNBQVcsZ0JBQUEsb0JBakJkbkQsRUFBQUEsVUFBR3FELFdBdUJOSixZQUFBLFNBQUE5QixHQUNKLElBQUFuQixFQUFBSixLQUVHLEdBREpJLEVBQUFjLE9BQUlLLEVBQUFBLEtBQU9FLFVBQVdGLEdBQUEsVUFBQW5CLEVBQUExQixPQUFBLGVBQ2xCNkMsRUFBQUMsU0FBQSxHQUFBRCxFQUFBNkIsVUFBQSxDQUNILEdBQUEsRUFBQTdCLEVBQUFFLE1BQUFGLEVBQUFFLEtBQUEsRUFFRyxPQURKckIsRUFBQWIsU0FBZWtDLEVBQWZBLE9BQ0lyQixFQUFBbUQsYUFDSW5ELEVBQUd1QixVQUFZLHFCQUFBSixFQUFBRSxNQUNmLEdBTUEsR0FBQSxHQUFBRixFQUFBRSxLQUNKLE9BQUEsRUFFSSxPQUFBRixFQUFBRSxNQUNKLEtBQU0sRUFDRnJCLEVBQUd1QixVQUFZLG1DQUNmLE1BQ0osS0FBTSxFQUNGdkIsRUFBR3VCLFVBQVksc0NBQ2YsTUFDSixLQUFNLEVBQ0ZJLEVBQUFBLFVBQVcsb0JBQ1gsTUFDSixLQUFNLEVBQ0ZkLEVBQUFBLFVBQU0sZ0JBQ05jLE1BQ0EsS0FBQSxFQUNKM0IsRUFBQXVCLFVBQUEsaUJBQ0ksTUFDUCxLQUFBLEVBQ012QixFQUFBdUIsVUFBUCwwQ0FFQyxNQUNELEtBQVFKLEVBQ0pRLFNBQUEsY0FDSWQsTUFDQSxLQUFBLEdBQ0pBLE1BQUEsNEJBQ0lBLFNBQU0sa0RBQ04sTUFDSixRQUNJLE9BQUEsRUFFWCxPQUFBLEVBR0xxQyxPQUFTL0IsRUFBQTZCLFdBQ0FsQyxLQUFMLElBQ1FLLE1BQU82QixXQUNYLE1BQ0luQyxLQUFBQSxJQUNBQSxNQUFBLGdCQUNKLE1BQ0lBLFFBQ0EsU0FLWHFDLFFBdlhJLFNBQUEvQixHQXlYRCxPQURKc0MsS0FBTzNDLE9BQUEsRUFBQUssRUFBWSxXQUNYbkIsRUFBSmdELFdBQ0cvRCxLQUFBQSxJQUNBQyxNQUFVLFdBQ1ZpRSxNQUNIYixLQUFBQSxJQTdYQ3pCLE1BQUEsY0ErWEksTUFDRDZDLFFBRUFDLFlBREFDLE1BQVUsa0JBSWJILE1BQUEsV0FyWUE3RCxLQXVZTGlELFNBQVUsRUF2WUxqRCxLQXdZRFYsU0FBSXlFLEVBeFlIL0QsS0F5WUR1RCxZQUFjLEVBQ2RiLGNBMVlDMUMsS0EwWVVOLEtBRVZ1RSxRQUFBLFdBNVlBLElBQUFILEdBQUEsSUFBQWQsTUFBQUUsY0E4WUdjLEVBQUF6RCxFQUFBLFlBQ0F3RCxPQUFBQSxFQUNKLElBQUlHLEVBQUFBLEVBQUFBLElBQVEzRCxFQUFFdUQsRUFBQSxFQUFBQyxJQUNkQyxFQUFBRyxPQUFXLFdBQVNKLEVBQUEsY0FHdkJkLFNBcFpJLFdBcVpMbUIsSUFBQUEsT0FBQUEsRUFDTUMsRUFBQTlELEVBQUEsYUFDRixJQUFBd0QsRUFBS3BFLEVBQUFBLEVBQUFBLEdBQVVvRSxJQUNsQk0sRUFBQUYsT0FBQSxXQUFBSixFQUFBLGNBR0RPLE9BQUlsRSxXQUNGbUUsSUFBRlIsT0FBQUEsRUFDSVMsRUFBQUEsRUFBQUEsV0FDQXBFLElBQUcxQixFQUFBQSxFQUFIcUYsRUFBQSxHQUFZUyxJQUNaRCxFQUFPRSxPQUFRQyxXQUFhWCxFQUE1QixjQUlBaEMsWUFBQUEsU0FBVzRDLEdBQ2RwRSxFQUFBLGdCQUFBcUUsWUFBQSx1QkFDSjVFLEtBQUFMLFNBQUFLLEtBQUFMLFVBWERrRixRQUFTLFdBRUx0RSxFQUFFZ0UsUUFBUU8sR0FBRyxpQkFESjlFLEtBQ3lCK0UsYUFDOUJQLGlCQUFpQixVQUZaeEUsS0FHRnRCLE9BQVM4RixpQkFBaUIsU0FDN0JELE9BQU9FLFFBQVFDLGFBQWEsR0FBSSxHQUFJLGlCQUovQjFFLEtBS0ZvQixjQUdIVyxTQUFXIiwiZmlsZSI6InJlZ2lzdHJ5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmNvbnN0IHJlZ2lzdHJ5X3ZpZXcgPSBuZXcgVnVlKHtcclxuICAgIGVsOiBcIiNhcHBcIixcclxuICAgIGRhdGE6IHtcclxuICAgICAgICBsaW5laWQ6IFwiXCIsXHJcbiAgICAgICAgbmFtZTogXCJcIixcclxuICAgICAgICBiaXJ0aGRheToge1xyXG4gICAgICAgICAgICB5ZWFyOiBcIjE5ODBcIixcclxuICAgICAgICAgICAgbW9udGg6IFwiMVwiLFxyXG4gICAgICAgICAgICBkYXk6XCIxXCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwaG9uZTogXCJcIixcclxuICAgICAgICBjYXJfbm86IFwiXCIsXHJcbiAgICAgICAgb3duZXI6IGZhbHNlLFxyXG4gICAgICAgIGFncmVlOiBmYWxzZSxcclxuICAgICAgICBvdHA6IFwiXCIsXHJcbiAgICAgICAgY2hlY2s6IHRydWUsXHJcbiAgICAgICAgaXNmb3JtMTogdHJ1ZSxcclxuICAgICAgICBpc2Zvcm0yOiBmYWxzZSxcclxuICAgICAgICBTTVNjb3VudDogNixcclxuICAgICAgICBTTVNkaXNhYmxlZDogNTksXHJcbiAgICAgICAgcGxhdGU6XCJcIixcclxuICAgICAgICBUTzoge30sXHJcbiAgICAgICAgbm90ZWJveDogZmFsc2UsXHJcbiAgICAgICAgcGFnZWxvYWQ6IHRydWUsXHJcbiAgICAgICAgZmlyc3RDaGVjazp0cnVlXHJcbiAgICB9LFxyXG4gICAgY29tcHV0ZWQ6IHtcclxuICAgIH0sXHJcbiAgICB3YXRjaDoge1xyXG4gICAgICAgIGNhcl9ubzogZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgICAgICAgICB0aGlzLnBsYXRlID0gdmFsLnRvVXBwZXJDYXNlKCk7XHJcbiAgICAgICAgfSAgICBcclxuICAgIH0sXHJcbiAgICBtZXRob2RzOiB7XHJcbiAgICAgICAgLy89PT09PeWPluW+l+eUqOaItuizh+aWmSBBUEk9PT09PS8vXHJcbiAgICAgICAgR2V0UHJvZmlsZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBsZXQgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICBsZXQgZ2V0X2RhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBcImxpbmVpZFwiOiB2bS5saW5laWQsXHJcbiAgICAgICAgICAgICAgICBcImFjdFwiOiB2bS5hY3QsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiBmcmllbmRvX3VybCArIFwiQ2FyTWVtYmVyL0dldFByb2ZpbGVcIixcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2F1dGgnOiB2bS53ZWJUb2tlblxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZSkgeyBcclxuICAgICAgICAgICAgICAgICAgICBhbGVydChcIuezu+e1seW/meeijOS4re+8jOiri+eojeW+jOWGjeippiFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0ubG9nZ2VyKDAsIGUsIFwiR2V0UHJvZmlsZVwiKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBkYXRhOiBnZXRfZGF0YSxcclxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIlxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8vPT09PT095rWB56iL5pON5L2cPT09PT0vL1xyXG4gICAgICAgIEV2ZW50U3RhcnQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBsZXQgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdm0ubG9nZ2VyKDMsIFwiZXZlbnQgc3RhcnQ6XCIrdm0ubGluZWlkLCBcIkV2ZW50U3RhcnRcIik7XHJcbiAgICAgICAgICAgIHZtLkpvaW5BY3QoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuU3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuRGF0YS5nYW1lX292ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm0uZXJyb3JfbXNnID0gXCLmtLvli5Xlt7LntZDmnZ8hXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LkRhdGEuaXNfbWVtYmVyICYmIHJlc3VsdC5EYXRhLnBsYXllZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0ubG9nZ2VyKDMsIFwiaXMgbWVtYmVyIGFuZCBwbGF5ZWQ6XCIgKyB2bS5saW5laWQsIFwiSm9pbkFjdFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uID0gXCJlbmRpbmcuaHRtbFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0ucGFnZWxvYWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLkdldFByb2ZpbGUoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LlN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0ubG9nZ2VyKDMsIHJlc3VsdCwgXCJHZXRQcm9maWxlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5uYW1lID0gcmVzdWx0LkRhdGEubmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0ucGhvbmUgPSByZXN1bHQuRGF0YS5waG9uZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5EYXRhLnBsYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5jYXJfbm8gPSByZXN1bHQuRGF0YS5wbGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLm93bmVyID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LkRhdGEuYmlydGhkYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBnZXRCaXJ0aGRheSA9IHJlc3VsdC5EYXRhLmJpcnRoZGF5LnNwbGl0KFwiL1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLmJpcnRoZGF5LnllYXIgPSBnZXRCaXJ0aGRheVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLmJpcnRoZGF5Lm1vbnRoID0gZ2V0QmlydGhkYXlbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5iaXJ0aGRheS5kYXkgPSBnZXRCaXJ0aGRheVsyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0ubG9nZ2VyKDAscmVzdWx0LCBcIkdldFByb2ZpbGVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQocmVzdWx0Lk1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSAgICBcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8vID09PT09PeWPg+WKoOa0u+WLlUFQST09PT09PS8vXHJcbiAgICAgICAgSm9pbkFjdDogZnVuY3Rpb24gKCkgeyBcclxuICAgICAgICAgICAgbGV0IHZtID0gdGhpcztcclxuICAgICAgICAgICAgbGV0IHBvc3RfZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIFwiYWN0XCI6IHZtLmFjdCxcclxuICAgICAgICAgICAgICAgIFwibGluZWlkXCI6IHZtLmxpbmVpZCxcclxuICAgICAgICAgICAgICAgIFwiZmluaXNoZWRcIjogZmFsc2VcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmV0dXJuICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6IGZyaWVuZG9fdXJsICsgXCJDYXJNZW1iZXIvSm9pbkFjdFwiLFxyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAnYXV0aCc6IHZtLndlYlRva2VuXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZGF0YTogcG9zdF9kYXRhLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCLns7vntbHlv5nnoozkuK3vvIzoq4vnqI3lvozlho3oqaYhXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLmxvZ2dlcigwLCBlLCBcIkpvaW5BY3RcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLy89PT09PT3lr4TpgIHnsKHoqIphcGk9PT09PS8vXHJcbiAgICAgICAgU2VuZE90cDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGxldCB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgIGxldCBvdHBfZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIFwibGluZWlkXCI6IHZtLmxpbmVpZCxcclxuICAgICAgICAgICAgICAgIFwicGhvbmVcIjogdm0ucGhvbmUsXHJcbiAgICAgICAgICAgICAgICBcImFjdFwiOnZtLmFjdFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2bS5sb2dnZXIoMywgb3RwX2RhdGEsIFwiU2VuZERhdGFcIik7XHJcbiAgICAgICAgICAgIHJldHVybiAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiBmcmllbmRvX3VybCArIFwiQ2FyTWVtYmVyL1NlbmRPdHBcIixcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2F1dGgnOiB2bS53ZWJUb2tlblxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IG90cF9kYXRhLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCLns7vntbHlv5nnoozkuK3vvIzoq4vnqI3lvozlho3oqaYhXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB2bS5sb2dnZXIoMCwgZSwgXCJTZW5kT3RwXCIpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXRTTVNUaW1lOiBmdW5jdGlvbiAoKSB7IFxyXG4gICAgICAgICAgICBsZXQgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICB2bS5UTyA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZtLlNNU2Rpc2FibGVkLS07XHJcbiAgICAgICAgICAgICAgICBpZih2bS5TTVNkaXNhYmxlZCA8IDApe1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodm0uVE8pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLlNNU2Rpc2FibGVkID0gNjA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIDEwMDApO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLy89PT09PT3lj5blvpdPVFAg5rWB56iL5pON5L2cPT09PT0vL1xyXG4gICAgICAgIFNlbmREYXRhOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGxldCB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgIGxldCByZWc9L15bXFx1NEUwMC1cXHU5RkE1XXsyLDV9JC87XHJcbiAgICAgICAgICAgIGxldCBwaG9uZV9ydWxlID0gL14wOVswLTldezh9JC87XHJcbiAgICAgICAgICAgIGxldCBjYXJfcnVsZSA9IC9eWzAtOUEtWl17MSw0fS1bMC05QS1aXXsxLDR9JC9cclxuICAgICAgICAgICAgaWYgKHZtLm5hbWUgPT0gXCJcIiB8fCAhU3RyaW5nKHZtLm5hbWUpLm1hdGNoKHJlZykpIHtcclxuICAgICAgICAgICAgICAgIHZtLmVycm9yX21zZz0gXCLkuK3mloflp5PlkI3moLzlvI/pjK/oqqRcIjtcclxuICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHZtLmJpcnRoZGF5LnllYXIgPT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgdm0uZXJyb3JfbXNnID0gXCLoq4vpgbjlj5blh7rnlJ/lubTku71cIjtcclxuICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHZtLmJpcnRoZGF5Lm1vbnRoID09IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgIHZtLmVycm9yX21zZyA9IFwi6KuL6YG45Y+W5Ye655Sf5pyI5Lu9XCI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh2bS5iaXJ0aGRheS5kYXkgPT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgdm0uZXJyb3JfbXNnID0gXCLoq4vpgbjlj5blh7rnlJ/ml6VcIjtcclxuICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKCF2bS5waG9uZXx8ICFTdHJpbmcodm0ucGhvbmUpLm1hdGNoKHBob25lX3J1bGUpKSB7XHJcbiAgICAgICAgICAgICAgICB2bS5lcnJvcl9tc2cgPSBcIuaJi+apn+iZn+eivOagvOW8j+mMr+iqpFwiO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodm0ub3duZXIgPT0gdHJ1ZSAmJiAhU3RyaW5nKHZtLnBsYXRlKS5tYXRjaChjYXJfcnVsZSkpe1xyXG4gICAgICAgICAgICAgICAgdm0uZXJyb3JfbXNnID0gXCLou4rniYzmoLzlvI/pjK/oqqRcIjtcclxuICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHZtLmFncmVlID09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICB2bS5lcnJvcl9tc2cgPSBcIuiri+m7nuaTiueiuuiqje+8jOWQjOaEj+acg+WToeacjeWLmeaineasvlwiO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciB0ZXN0RGF0ZSA9IG5ldyBEYXRlKHZtLmJpcnRoZGF5LnllYXIsICh2bS5iaXJ0aGRheS5tb250aC0xKSwgdm0uYmlydGhkYXkuZGF5KTtcclxuICAgICAgICAgICAgaWYgKHRlc3REYXRlLmdldERhdGUoKSAhPSB2bS5iaXJ0aGRheS5kYXkgfHwgdGVzdERhdGUuZ2V0TW9udGgoKSAhPSAodm0uYmlydGhkYXkubW9udGggLSAxKSB8fCB0ZXN0RGF0ZS5nZXRGdWxsWWVhcigpICE9IHZtLmJpcnRoZGF5LnllYXIpIHtcclxuICAgICAgICAgICAgICAgIHZtLmVycm9yX21zZyA9IFwi6KuL6YG45Y+W5q2j56K655qE5Ye655Sf5pel5pyfXCI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gO1xyXG4gICAgICAgICAgICB9IFxyXG5cclxuICAgICAgICAgICAgaWYgKCF2bS5sb2FkaW5nKSB7XHJcbiAgICAgICAgICAgICAgICB2bS5nYUV2YW50KFwiY2xpY2tcIiwgXCJyZWdpc3RyeV/pgIHlh7ros4fmlplcIixcInJlZ2lzdHJ5X+mAgeWHuuizh+aWmVwiKTtcclxuICAgICAgICAgICAgICAgIHZtLmxvYWRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdm0uU2VuZE90cCgpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB2bS5sb2dnZXIoMywgcmVzdWx0LCBcIlNlbmREYXRhXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuU3VjY2VzcyAmJiByZXN1bHQuRXJyb3JDb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZtLmNoZWNrUmVzdWx0KHJlc3VsdCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLmdhRXZhbnQoXCJjbGlja1wiLCBcInJlZ2lzdHJ5X+iqjeitieewoeioilwiLCBcInJlZ2lzdHJ5X+iqjeitieewoeioilwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLmZpcnN0Q2hlY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLm5vdGVib3ggPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLmlzZm9ybTEgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLmlzZm9ybTIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uU01TZGlzYWJsZWQgPSA1OTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLnNldFNNU1RpbWUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLmdhRXZhbnQoXCJyZXN1bHRcIiwgXCJyZWdpc3RyeV/pgIHlh7rlpLHmlZdcIiwgXCJyZWdpc3RyeV/pgIHlh7rlpLHmlZdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5SU2Vycm9yKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVzZW5kT1RQOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGxldCB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgIGlmICghdm0ubG9hZGluZykge1xyXG4gICAgICAgICAgICAgICAgdm0ubG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB2bS5maXJzdENoZWNrID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHZtLmxvZ2dlcigzLCBcInJlc2VuZCBPVFBcIiwgXCJyZXNlbmRPVFBcIik7XHJcbiAgICAgICAgICAgICAgICB2bS5zZXRTTVNUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICB2bS5TZW5kT3RwKCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0ubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuU3VjY2VzcyAmJiByZXN1bHQuRXJyb3JDb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm0uY2hlY2tSZXN1bHQocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm0uZmlyc3RDaGVjayA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocmVzdWx0LkVycm9yQ29kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCLmnKrmjojmrIrkvb/nlKjntrLnq5lcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDUwMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcIueZvOmAgempl+itieeivOezu+e1seW/meeijOS4rVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCLns7vntbHlv5nnoozkuK3vvIzoq4vnqI3lvozlho3oqaYhXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIC8vPT09PT095YSy5a2Y5pyD5ZOh6LOH5paZYXBpPT09PT0vL1xyXG4gICAgICAgIFNhdmVQcm9maWxlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbGV0IHZtID0gdGhpcztcclxuICAgICAgICAgICAgbGV0IHBvc3RfZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIFwiYWN0XCI6IHZtLmFjdCxcclxuICAgICAgICAgICAgICAgIFwibGluZWlkXCI6IHZtLmxpbmVpZCxcclxuICAgICAgICAgICAgICAgIFwibmFtZVwiOiB2bS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgXCJiaXJ0aGRheVwiOiB2bS5iaXJ0aGRheS55ZWFyK1wiL1wiK3ZtLmJpcnRoZGF5Lm1vbnRoK1wiL1wiK3ZtLmJpcnRoZGF5LmRheSxcclxuICAgICAgICAgICAgICAgIFwicGhvbmVcIjogdm0ucGhvbmUsXHJcbiAgICAgICAgICAgICAgICBcInBsYXRlXCI6IHZtLnBsYXRlLFxyXG4gICAgICAgICAgICAgICAgXCJvdHBcIjogdm0ub3RwLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2bS5sb2dnZXIoMywgcG9zdF9kYXRhLCBcIlNhdmVQcm9maWxlXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gJC5hamF4KHtcclxuICAgICAgICAgICAgICAgIHVybDogZnJpZW5kb191cmwgKyBcIkNhck1lbWJlci9TYXZlUHJvZmlsZS9cIixcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2F1dGgnOiB2bS53ZWJUb2tlblxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZSkgeyBcclxuICAgICAgICAgICAgICAgICAgICBhbGVydChcIuezu+e1seW/meeijOS4re+8jOiri+eojeW+jOWGjeippiFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0ubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLmxvZ2dlcigwLCBlLCBcIlNhdmVQcm9maWxlXCIpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcclxuICAgICAgICAgICAgICAgIGRhdGE6IHBvc3RfZGF0YSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAvLz09PT09Pea0u+WLleWujOaIkEFQST09PT0vL1xyXG4gICAgICAgIEZpbmlzaEFjdDogZnVuY3Rpb24gKCkgeyBcclxuICAgICAgICAgICAgbGV0IHZtID0gdGhpcztcclxuICAgICAgICAgICAgbGV0IHBvc3RfZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIFwiYWN0XCI6IHZtLmFjdCxcclxuICAgICAgICAgICAgICAgIFwibGluZWlkXCI6IHZtLmxpbmVpZCxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdm0ubG9nZ2VyKDMsIHBvc3RfZGF0YSwgXCJGaW5pc2hBY3RcIik7XHJcbiAgICAgICAgICAgIHJldHVybiAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiBmcmllbmRvX3VybCArIFwiQ2FyTWVtYmVyL0ZpbmlzaEFjdFwiLFxyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAnYXV0aCc6IHZtLndlYlRva2VuXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCLns7vntbHlv5nnoozkuK3vvIzoq4vnqI3lvozlho3oqaYhXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB2bS5sb2dnZXIoMCwgZSwgXCJGaW5pc2hBY3RcIik7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogcG9zdF9kYXRhLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8vPT09PT095rWB56iL5pON5L2cPT09PT0vL1xyXG4gICAgICAgIFNlbmRSZWdpc3RyeTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGxldCB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgIGxldCBpbnZfcnVsZSA9IC9eWzAtOV17Nn0kLztcclxuICAgICAgICAgICAgaWYodm0ub3RwID09IFwiXCIgfHwgIXZtLm90cC5tYXRjaChpbnZfcnVsZSkpIHtcclxuICAgICAgICAgICAgICAgIHZtLmVycm9yX21zZyA9IFwi6KqN6K2J56K85qC85byP6Yyv6KqkXCI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIXZtLmxvYWRpbmcpIHtcclxuICAgICAgICAgICAgICAgIHZtLmxvYWRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdm0uZ2FFdmFudChcImNsaWNrXCIsIFwicmVnaXN0cnlf6YCB5Ye66KqN6K2JXCIsIFwicmVnaXN0cnlf6YCB5Ye66KqN6K2JXCIpO1xyXG4gICAgICAgICAgICAgICAgdm0uU2F2ZVByb2ZpbGUoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2bS5sb2dnZXIoMywgcmVzdWx0LCBcIlNlbmRSZWdpc3RyeVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodm0uY2hlY2tSZXN1bHQocmVzdWx0KSAmJiByZXN1bHQuRGF0YSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZtLkZpbmlzaEFjdCgpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uZ2FFdmFudChcInJlc3VsdFwiLCBcInJlZ2lzdHJ5X+iqjeitieaIkOWKn1wiLCBcInJlZ2lzdHJ5X+iqjeitieaIkOWKn1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uID0gXCJlbmRpbmcuaHRtbFwiOyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdm0uZ2FFdmFudChcInJlc3VsdFwiLCBcInJlZ2lzdHJ5X+iqjeitieWkseaVl1wiLCBcInJlZ2lzdHJ5X+iqjeitieWkseaVl1wiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjaGVja1Jlc3VsdDogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICBsZXQgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICB2bS5sb2dnZXIoMywgSlNPTi5zdHJpbmdpZnkocmVzdWx0KSArIFwibGluZUlEOlwiK3ZtLmxpbmVpZCwgXCJjaGVja1Jlc3VsdFwiKTtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdC5TdWNjZXNzICYmIHJlc3VsdC5FcnJvckNvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5EYXRhID4gMCAmJiByZXN1bHQuRGF0YSA8IDYpIHtcclxuICAgICAgICAgICAgICAgICAgICB2bS5TTVNjb3VudCA9IHJlc3VsdC5EYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCF2bS5maXJzdENoZWNrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm0uZXJyb3JfbXNnID0gXCLpqZforYnnorzpjK/oqqTvvIzoq4vph43mlrDovLjlhaXvvIzlianppJjmrKHmlbjngro6XCIgKyByZXN1bHQuRGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5EYXRhID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHN3aXRjaCAocmVzdWx0LkRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIC0xOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5lcnJvcl9tc2cgPSBcIumpl+itieasoeaVuOW3sumBlOS4iue3mu+8jOiri+a0vU5JU1NBTuWuouacjTA4MDAtMDg4LTg4OOOAglwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIC0yOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5lcnJvcl9tc2cgPSBcIumpl+itieeivOmHjemAgeasoeaVuOW3sumBlOS4iue3mu+8jOiri+a0vU5JU1NBTuWuouacjTA4MDAtMDg4LTg4OOOAglwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIC0zOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5lcnJvcl9tc2cgPSBcIui3nembouS4iuasoemHjemAgeaZgumWk+mBjuefre+8jOiri+eojeW+jOWGjeippuOAglwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIC00OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5lcnJvcl9tc2cgPSBcIumpl+itieeivOW3sumBjuacn++8jOiri+mHjeaWsOeZvOmAgeOAglwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIC03OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5lcnJvcl9tc2cgPSBcIuizh+aWmeWhq+Wvq+mMr+iqpO+8jOiri+WGjeeiuuiqjeS4gOasoeOAglwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIC04OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5lcnJvcl9tc2cgPSBcIuatpOmbu+ipseiZn+eivOW3sue2geWumu+8jOiri+S9v+eUqOWFtuS7luiZn+eivOaIlua0vU5JU1NBTuWuouacjTA4MDAtMDg4LTg4OOOAglwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIC05OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbiA9IFwiZW5kaW5nLmh0bWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIC0xMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCLmgqjlsJrmnKrlkIzmhI9MSU5F5L2/55So5oKo55qE5YCL5Lq66LOH6KiK77yM6KuL6YeN5paw5o6I5qyK44CCXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbiA9ICcvQ2FyTWVtYmVyL0luZGV4P3N0YXRlPVA0ODZaR2htTzRLcUFKRHJyenNpblE9PSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlc3VsdC5FcnJvckNvZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQwMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCLmnKrmjojmrIrkvb/nlKjntrLnq5lcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcIuezu+e1seW/meeijOS4re+8jOiri+eojeW+jOWGjeippiFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLy89PT09PSBhcGkg6YCj5o6l5aSx5pWXID09PT0gXHJcbiAgICAgICAgUlNlcnJvcjogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICB0aGlzLmxvZ2dlcigwLCByZXN1bHQsIFwiUlNlcnJvclwiKTtcclxuICAgICAgICAgICAgc3dpdGNoIChyZXN1bHQuRXJyb3JDb2RlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQwMTpcclxuICAgICAgICAgICAgICAgICAgICBhbGVydChcIuacquaOiOasiuS9v+eUqOe2suermVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNTAyOlxyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwi55m86YCB6amX6K2J56K857O757Wx5b+Z56KM5LitXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBhbGVydChcIuezu+e1seW/meeijOS4re+8jOiri+eojeW+jOWGjeippiFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSxcclxuICAgICAgICByZWZpeDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBsZXQgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICB2bS5pc2Zvcm0xID0gdHJ1ZTtcclxuICAgICAgICAgICAgdm0uaXNmb3JtMiA9IGZhbHNlO1xyXG4gICAgICAgICAgICB2bS5maXJzdENoZWNrID0gdHJ1ZTtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh2bS5UTyk7XHJcbiAgICAgICAgIH0sXHJcbiAgICAgICAgZ2V0WWVhcjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGxldCB5ID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgICAgICBsZXQgeWxpc3QgPSAkKFwiLnNlbHllYXJcIik7XHJcbiAgICAgICAgICAgIGxldCBpO1xyXG4gICAgICAgICAgICBmb3IoaT15LTEwMDsgaTx5KzE7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgeWxpc3QuYXBwZW5kKFwiPG9wdGlvbj5cIitpK1wiPC9vcHRpb24+XCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRNb250aDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGxldCBpO1xyXG4gICAgICAgICAgICBsZXQgbWxpc3QgPSAkKFwiLnNlbG1vbnRoXCIpO1xyXG4gICAgICAgICAgICBmb3IoaT0xOyBpPDEzOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIG1saXN0LmFwcGVuZChcIjxvcHRpb24+XCIraStcIjwvb3B0aW9uPlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0RGF5OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbGV0IGk7XHJcbiAgICAgICAgICAgIGxldCBkbGlzdCA9ICQoXCIuc2VsZGF5XCIpO1xyXG4gICAgICAgICAgICBmb3IoaT0xOyBpPDMyOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGRsaXN0LmFwcGVuZChcIjxvcHRpb24+XCIraStcIjwvb3B0aW9uPlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbm90ZV90b2dnbGU6IGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAkKFwiLm5vdGVfX3RpdGxlXCIpLnRvZ2dsZUNsYXNzKFwibm90ZV9fdGl0bGUtLWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgdGhpcy5ub3RlYm94ID0gIXRoaXMubm90ZWJveFxyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgbW91bnRlZDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgbGV0IHZtID0gdGhpcztcclxuICAgICAgICAkKHdpbmRvdykub24oXCJvbmxpbmUgb2ZmbGluZVwiLCB2bS5jaGVja09ubGluZSk7XHJcbiAgICAgICAgaWYgKGZpbmRHZXRQYXJhbWV0ZXIoJ3Rva2VuJykpIHtcclxuICAgICAgICAgICAgdm0ubGluZWlkID0gZmluZEdldFBhcmFtZXRlcigndG9rZW4nKTtcclxuICAgICAgICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKCcnLCAnJywgJ3JlZ2lzdHJ5Lmh0bWwnKTtcclxuICAgICAgICAgICAgdm0uRXZlbnRTdGFydCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbG9jYXRpb24gPSAnL0Nhck1lbWJlci9JbmRleD9zdGF0ZT1QNDg2WkdobU80S3FBSkRycnpzaW5RPT0nO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbn0pOyJdfQ==
