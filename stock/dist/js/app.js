"use strict";var production="false"===$("#appjs").data("mode"),friendo_url=$("#appjs").data("site"),device=deviceCheck();Vue.config.devtools=!production,Vue.config.debug=!production,Vue.config.silent=!production;var md=new MobileDetect(window.navigator.userAgent),tag=document.createElement("script");function findGetParameter(e){var t=null,n=[];return location.search.substr(1).split("&").forEach(function(o){(n=o.split("="))[0]===e&&(t=decodeURIComponent(n[1]))}),t}function checkCookie(e){var t=null,n=[];return document.cookie.split(";").forEach(function(o){" "==o.charAt(0)&&(o=o.substring(1)),(n=o.split("="))[0]===e&&(t=n[1])}),t}function deviceCheck(){var o={},e=new MobileDetect(window.navigator.userAgent);return e.match(/android/i)?(o.os="android",o.version=e.version("android")):e.match(/(iphone|ipad|ipod);?/i)?(o.os="ios",o.version=e.version("iOS")):(o.os="pc",o.version=e.version("Chrome")),o}$(function(){console.log("v1.0"),console.log(device),$(".nav").menu()}),Vue.mixin({data:function(){return{status:"",start_date:"2100/08/09 12:09:10",error_msg:"",mode:production?"Started":"Testing",loading:!1,popuptop:"",navHeight:"",rewardShake:!0,lineHref:""}},computed:{openCome:function(){return!("Testing"==this.mode||start_date<=0)}},watch:{error_msg:function(o){$("body").toggleClass("_freeze")}},methods:{gaEvant:function(o){dataLayer.push({event:o}),console.log("ga:",o)},server_busy:function(){var o=this;o.error_msg="系統忙碌中，請稍後在試!",o.loading=!1,o.error_cou=6},setCookie:function(o,e,t){var n=new Date;n.setTime(n.getTime()+1e3*t);var r="expires="+n.toUTCString();document.cookie=o+"="+e+";"+r+";"},logger:function(o,e,t){if(production){_LTracker.push({level:["ERROR","DEBUG","WARNING","INFO","ALL"][o],content:JSON.stringify(e),path:window.location.href,tag:t||null,device:device,timestamp:Date.now()})}},errorDone:function(){this.error_msg=""},checkOnline:function(){navigator.onLine||alert("Internet 連線已斷開，請確認您的網路狀態。")},state_check:function(){var t=this;return $.ajax({method:"GET",url:friendo_url+"GetProjectInfo",success:function(o){var e=o.Data;t.start_date=e.StartDateTime,t.mode=e.Status}})},scrollTo:function(o){var e=this;e.room=null,e.allPopupClose(),$("html,body").animate({scrollTop:$(o).offset().top-e.navHeight},500)},popupOpen:function(){var o=this;o.popuptop&&0!==o.popuptop||(o.popuptop=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop)),$("body").addClass("_freeze")},popupClose:function(){$("body").removeClass("_freeze"),$("html, body").scrollTop(this.popuptop),this.popuptop=0},afterEnter:function(){this.popupOpen()},getToken:function(){return $.ajax({url:friendo_url+"api/auth/login?projectId=61",headers:{webtoken:"2YRiIGevkjZZ-S22iwwuSoajRcnZUSeEJ+dwslTtM+s="},method:"GET",dataType:"json"})}},components:{comingsoon:comingsoon},mounted:function(){var o=$(".window-top").height();this.navHeight=o-30,$("body").css("margin-top",this.navHeight),$(".nav-lock").click(function(){$("body").removeClass("_freeze")})}}),Vue.component("comingsoon",{template:"#comingsoon",props:["StartDate","mode"],data:function(){return{comingsoon:!1,date:{total:0,days:0,hours:0,minutes:0,seconds:0}}},mounted:function(){var i=function o(e,t){return(e=""+e).length>=t?e:o("0"+e,t)},a=this,s=setInterval(function(){var o=Date.parse(new Date(a.StartDate))-Date.parse(new Date),e=Math.floor(o/1e3%60),t=Math.floor(o/1e3/60%60),n=Math.floor(o/36e5%24),r=Math.floor(o/864e5);a.date={total:o,days:i(r,2),hours:i(n,2),minutes:i(t,2),seconds:i(e,2)},a.date.total<=0||"Testing"==a.mode?(clearInterval(s),a.comingsoon=!1):a.comingsoon=!0},1e3)}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJwcm9kdWN0aW9uIiwiJCIsImRhdGEiLCJkZXZpY2UiLCJkZXZpY2VDaGVjayIsIlZ1ZSIsImNvbmZpZyIsImRldnRvb2xzIiwiZGVidWciLCJtZCIsIk1vYmlsZURldGVjdCIsIndpbmRvdyIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRhZyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImZpbmRHZXRQYXJhbWV0ZXIiLCJwYXJhbWV0ZXJOYW1lIiwicmVzdWx0IiwidG1wIiwibG9jYXRpb24iLCJzZWFyY2giLCJpdGVtIiwic3BsaXQiLCJmb3JFYWNoIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiY29va2llIiwiY2hhckF0Iiwic3Vic3RyaW5nIiwidmVyc2lvbiIsInN0YXJ0X2RhdGUiLCJtYXRjaCIsIm9zIiwiY29uc29sZSIsImxvZyIsIm1vZGUiLCJsb2FkaW5nIiwicG9wdXB0b3AiLCJuYXZIZWlnaHQiLCJyZXdhcmRTaGFrZSIsImxpbmVIcmVmIiwiY29tcHV0ZWQiLCJvcGVuQ29tZSIsImVycm9yX21zZyIsInRoaXMiLCJnYUV2YW50IiwiZGF0YUxheWVyIiwidmFsIiwiZ3RtRGF0YSIsIm1ldGhvZHMiLCJ2bSIsInB1c2giLCJldmVudCIsImVycm9yX2NvdSIsInNldENvb2tpZSIsImQiLCJzZXRUaW1lIiwiZ2V0VGltZSIsImV4cGlyZXMiLCJsb2dnZXIiLCJjbmFtZSIsImxldmVsIiwiY29udGVudCIsInRpbWUiLCJsZXZlbF9pbmZvIiwidG9VVENTdHJpbmciLCJfTFRyYWNrZXIiLCJjdmFsdWUiLCJKU09OIiwic3RyaW5naWZ5IiwicGF0aCIsImhyZWYiLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwiZXJyb3JEb25lIiwic3RhdGVfY2hlY2siLCJvbkxpbmUiLCJhbGVydCIsImFqYXgiLCJ1cmwiLCJmcmllbmRvX3VybCIsInN1Y2Nlc3MiLCJyZXMiLCJEYXRhIiwiU3RhcnREYXRlVGltZSIsIlN0YXR1cyIsInNjcm9sbFRvIiwiZSIsInBvcHVwT3BlbiIsImFsbFBvcHVwQ2xvc2UiLCJNYXRoIiwicGFnZVlPZmZzZXQiLCJwb3B1cENsb3NlIiwicmVtb3ZlQ2xhc3MiLCJtYXgiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JvbGxUb3AiLCJib2R5IiwiYWZ0ZXJFbnRlciIsImdldFRva2VuIiwibWV0aG9kIiwiaGVhZGVycyIsIndlYnRva2VuIiwiY29taW5nc29vbiIsImRhdGFUeXBlIiwiY29tcG9uZW50cyIsImhlaWdodCIsImNzcyIsImNsaWNrIiwiY29tcG9uZW50IiwidG90YWwiLCJkYXlzIiwiaG91cnMiLCJtaW51dGVzIiwic2Vjb25kcyIsImRhdGUiLCJwYWRMZWZ0Iiwic3RyIiwibGVuZ3RoIiwibW91bnRlZCIsImxlbiIsInRpbWVpbnRlcnZhbCIsInNldEludGVydmFsIiwidCIsIlN0YXJ0RGF0ZSIsInBhcnNlIiwiZmxvb3IiLCJjbGVhckludGVydmFsIl0sIm1hcHBpbmdzIjoiYUFBQSxJQUNJQSxXQUEwQyxVQUE3QkMsRUFBRSxVQUFVQyxLQUFLLFFBQTlCRixZQUFhQyxFQUFFLFVBQVVDLEtBQUssUUFHNUJDLE9BQVNDLGNBRWZDLElBQUlDLE9BQU9DLFVBQVlQLFdBQXZCSyxJQUFJQyxPQUFPQyxPQUFYUCxXQUNBSyxJQUFJQyxPQUFPRSxRQUFTUixXQUdwQixJQUFJUyxHQUFLLElBQUlDLGFBQWFDLE9BQU9DLFVBQVVDLFdBRXZDQyxJQUFNQyxTQUFTQyxjQUFjLFVBU2pDLFNBQVNDLGlCQUFpQkMsR0FDdEIsSUFBSUMsRUFBUyxLQUNUQyxFQUFNLEdBYVYsT0FaQUMsU0FBU0MsT0FJREYsT0FBTUcsR0FDTkMsTUFBSUosS0FMWkssUUFBQSxTQUFBRixJQVFPSixFQUFQSSxFQUFBQyxNQUFBLE1BQ0gsS0FBQU4sSUFIZUMsRUFBU08sbUJBQW1CTixFQUFJLE9BTXhDRCxFQUdKUSxTQUFBQSxZQUFBVCxHQUVRLElBQUFDLEVBQVNTLEtBQ0xMLEVBQUFBLEdBWVJwQixPQVhLWSxT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VixFQUFBdkIsS0FBVzBCLE1BQVFILEVBQVIsSUFKTCxHQUFBLElBS05ELEVBQUF0QixLQUFXMEIsTUFBUUYsRUFBQUEsS0FBUixJQUxmSCxFQUFBckIsS0FBQW9DLE1BQUFILEVBQUFBLE9BT0ExRSxFQUFBa0UsS0FBT0EsQ0FDSFksTUFBQUEsRUFDQTlFLEtBQUdzRCxFQUFhUSxFQUFoQixHQUZKQyxNQUdPSSxFQUFBSixFQUFBLEdBQ0gvRCxRQUFHc0QsRUFBYVUsRUFBaEIsR0FDSEMsUUFBQUUsRUFBQUYsRUFBQSxJQUVMakUsRUFBQWtFLEtBQUFMLE9BQUEsR0FBQSxXQUFBN0QsRUFBQWYsTUFDSDZGLGNBQUFOLEdBakRMeEUsRUFBQXNELFlBQUEsR0E2Q2dCdEQsRUFBR3NELFlBQWEsR0FFckIiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3RcclxuICAgIHByb2R1Y3Rpb24gPSAkKFwiI2FwcGpzXCIpLmRhdGEoXCJtb2RlXCIpID09PSBcImZhbHNlXCIsXHJcbiAgICBmcmllbmRvX3VybCA9ICQoXCIjYXBwanNcIikuZGF0YShcInNpdGVcIik7XHJcblxyXG5jb25zdCBkZXZpY2UgPSBkZXZpY2VDaGVjaygpO1xyXG5cclxuVnVlLmNvbmZpZy5kZXZ0b29scyA9ICFwcm9kdWN0aW9uO1xyXG5WdWUuY29uZmlnLmRlYnVnID0gIXByb2R1Y3Rpb247XHJcblZ1ZS5jb25maWcuc2lsZW50ID0gIXByb2R1Y3Rpb247XHJcblxyXG52YXIgbWQgPSBuZXcgTW9iaWxlRGV0ZWN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KTtcclxuXHJcbnZhciB0YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc29sZS5sb2coXCJ2MS4wXCIpO1xyXG4gICAgY29uc29sZS5sb2coZGV2aWNlKTtcclxuICAgICQoXCIubmF2XCIpLm1lbnUoKTtcclxufSk7XHJcblxyXG5cclxuZnVuY3Rpb24gZmluZEdldFBhcmFtZXRlcihwYXJhbWV0ZXJOYW1lKSB7XHJcbiAgICB2YXIgcmVzdWx0ID0gbnVsbCxcclxuICAgICAgICB0bXAgPSBbXTtcclxuICAgIGxvY2F0aW9uLnNlYXJjaFxyXG4gICAgICAgIC5zdWJzdHIoMSlcclxuICAgICAgICAuc3BsaXQoXCImXCIpXHJcbiAgICAgICAgLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgdG1wID0gaXRlbS5zcGxpdChcIj1cIik7XHJcbiAgICAgICAgICAgIGlmICh0bXBbMF0gPT09IHBhcmFtZXRlck5hbWUpXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBkZWNvZGVVUklDb21wb25lbnQodG1wWzFdKTtcclxuICAgICAgICB9KTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoZWNrQ29va2llKHBhcmFtZXRlck5hbWUpIHtcclxuICAgIHZhciByZXN1bHQgPSBudWxsLFxyXG4gICAgICAgIHRtcCA9IFtdO1xyXG4gICAgdmFyIGNvb2tpZSA9IGRvY3VtZW50LmNvb2tpZTtcclxuICAgIGNvb2tpZS5zcGxpdChcIjtcIilcclxuICAgICAgICAuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICBpZiAoaXRlbS5jaGFyQXQoMCkgPT0gXCIgXCIpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0gPSBpdGVtLnN1YnN0cmluZygxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0bXAgPSBpdGVtLnNwbGl0KFwiPVwiKTtcclxuICAgICAgICAgICAgaWYgKHRtcFswXSA9PT0gcGFyYW1ldGVyTmFtZSlcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRtcFsxXTtcclxuICAgICAgICB9KVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5mdW5jdGlvbiBkZXZpY2VDaGVjaygpIHtcclxuICAgIHZhciBkZXZpY2UgPSB7fTtcclxuICAgIHZhciBtZCA9IG5ldyBNb2JpbGVEZXRlY3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG4gICAgaWYgKG1kLm1hdGNoKC9hbmRyb2lkL2kpKSB7XHJcbiAgICAgICAgZGV2aWNlLm9zID0gXCJhbmRyb2lkXCI7XHJcbiAgICAgICAgZGV2aWNlLnZlcnNpb24gPSBtZC52ZXJzaW9uKFwiYW5kcm9pZFwiKTtcclxuICAgIH0gZWxzZSBpZiAobWQubWF0Y2goLyhpcGhvbmV8aXBhZHxpcG9kKTs/L2kpKSB7XHJcbiAgICAgICAgZGV2aWNlLm9zID0gXCJpb3NcIjtcclxuICAgICAgICBkZXZpY2UudmVyc2lvbiA9IG1kLnZlcnNpb24oXCJpT1NcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGRldmljZS5vcyA9IFwicGNcIjtcclxuICAgICAgICBkZXZpY2UudmVyc2lvbiA9IG1kLnZlcnNpb24oXCJDaHJvbWVcIik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGV2aWNlO1xyXG59XHJcblZ1ZS5taXhpbih7XHJcbiAgICBkYXRhOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc3RhdHVzOiBcIlwiLFxyXG4gICAgICAgICAgICBzdGFydF9kYXRlOiBcIjIxMDAvMDgvMDkgMTI6MDk6MTBcIixcclxuICAgICAgICAgICAgZXJyb3JfbXNnOiBcIlwiLFxyXG4gICAgICAgICAgICBtb2RlOiBwcm9kdWN0aW9uID8gXCJTdGFydGVkXCIgOiBcIlRlc3RpbmdcIixcclxuICAgICAgICAgICAgbG9hZGluZzogZmFsc2UsXHJcbiAgICAgICAgICAgIHBvcHVwdG9wOiBcIlwiLFxyXG4gICAgICAgICAgICBuYXZIZWlnaHQ6IFwiXCIsXHJcbiAgICAgICAgICAgIHJld2FyZFNoYWtlOiB0cnVlLFxyXG4gICAgICAgICAgICBsaW5lSHJlZjogJycsXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGNvbXB1dGVkOiB7XHJcbiAgICAgICAgb3BlbkNvbWU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICEodGhpcy5tb2RlID09IFwiVGVzdGluZ1wiIHx8IHN0YXJ0X2RhdGUgPD0gMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHdhdGNoOiB7XHJcbiAgICAgICAgZXJyb3JfbXNnOiBmdW5jdGlvbiAodmFsKSB7XHJcbiAgICAgICAgICAgICQoJ2JvZHknKS50b2dnbGVDbGFzcygnX2ZyZWV6ZScpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBtZXRob2RzOiB7XHJcbiAgICAgICAgZ2FFdmFudDogZnVuY3Rpb24gKGd0bURhdGEpIHtcclxuICAgICAgICAgICAgZGF0YUxheWVyLnB1c2goeydldmVudCc6IGd0bURhdGF9KTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJnYTpcIiwgZ3RtRGF0YSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXJ2ZXJfYnVzeTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICB2bS5lcnJvcl9tc2cgPSBcIuezu+e1seW/meeijOS4re+8jOiri+eojeW+jOWcqOippiFcIjtcclxuICAgICAgICAgICAgdm0ubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB2bS5lcnJvcl9jb3UgPSA2O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0Q29va2llOiBmdW5jdGlvbiAoY25hbWUsIGN2YWx1ZSwgdGltZSkge1xyXG4gICAgICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIGQuc2V0VGltZShkLmdldFRpbWUoKSArICh0aW1lICogMTAwMCkpO1xyXG4gICAgICAgICAgICB2YXIgZXhwaXJlcyA9IFwiZXhwaXJlcz1cIiArIGQudG9VVENTdHJpbmcoKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gY25hbWUgKyBcIj1cIiArIGN2YWx1ZSArIFwiO1wiICsgZXhwaXJlcyArIFwiO1wiO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbG9nZ2VyOiBmdW5jdGlvbiAobGV2ZWwsIGNvbnRlbnQsIHRhZykge1xyXG4gICAgICAgICAgICBpZiAocHJvZHVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgLy8gbGV2ZWwgOiBbJ0VSUk9SJyA9PiAwLCBERUJVRycgPT4gMSwgJ1dBUk5JTkcnID0+IDIsICdJTkZPJyA9PiAzLCAnQUxMJyA9PiA0XVxyXG4gICAgICAgICAgICAgICAgdmFyIGxldmVsX2luZm8gPSBbJ0VSUk9SJywgJ0RFQlVHJywgJ1dBUk5JTkcnLCAnSU5GTycsICdBTEwnXTtcclxuICAgICAgICAgICAgICAgIF9MVHJhY2tlci5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAnbGV2ZWwnOiBsZXZlbF9pbmZvW2xldmVsXSxcclxuICAgICAgICAgICAgICAgICAgICAnY29udGVudCc6IEpTT04uc3RyaW5naWZ5KGNvbnRlbnQpLFxyXG4gICAgICAgICAgICAgICAgICAgICdwYXRoJzogd2luZG93LmxvY2F0aW9uLmhyZWYsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3RhZyc6IHRhZyB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICdkZXZpY2UnOiBkZXZpY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3RpbWVzdGFtcCc6IERhdGUubm93KClcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlcnJvckRvbmU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5lcnJvcl9tc2cgPSBcIlwiO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2hlY2tPbmxpbmU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCFuYXZpZ2F0b3Iub25MaW5lKSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydChcIkludGVybmV0IOmAo+e3muW3suaWt+mWi++8jOiri+eiuuiqjeaCqOeahOe2sui3r+eLgOaFi+OAglwiKTtcclxuICAgICAgICAgICAgICAgIC8vIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3RhdGVfY2hlY2s6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAgICAgcmV0dXJuICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgICAgICB1cmw6IGAke2ZyaWVuZG9fdXJsfUdldFByb2plY3RJbmZvYCxcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gcmVzLkRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0uc3RhcnRfZGF0ZSA9IGRhdGEuU3RhcnREYXRlVGltZTtcclxuICAgICAgICAgICAgICAgICAgICB2bS5tb2RlID0gZGF0YS5TdGF0dXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzY3JvbGxUbzogZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAgICAgdm0ucm9vbSA9IG51bGw7XHJcbiAgICAgICAgICAgIHZtLmFsbFBvcHVwQ2xvc2UoKTtcclxuICAgICAgICAgICAgJChcImh0bWwsYm9keVwiKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogJChlKS5vZmZzZXQoKS50b3AgLSB2bS5uYXZIZWlnaHRcclxuICAgICAgICAgICAgfSwgNTAwKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHBvcHVwT3BlbjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICBpZiAoIXZtLnBvcHVwdG9wIHx8IHZtLnBvcHVwdG9wID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB2bS5wb3B1cHRvcCA9IE1hdGgubWF4KHdpbmRvdy5wYWdlWU9mZnNldCwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3ApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnX2ZyZWV6ZScpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcG9wdXBDbG9zZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ19mcmVlemUnKTtcclxuICAgICAgICAgICAgJCgnaHRtbCwgYm9keScpLnNjcm9sbFRvcCh2bS5wb3B1cHRvcCk7XHJcbiAgICAgICAgICAgIHZtLnBvcHVwdG9wID0gMDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFmdGVyRW50ZXI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAgICAgdm0ucG9wdXBPcGVuKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRUb2tlbjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgLy8gdXJsOiBcImh0dHBzOi8vY2FycmVmb3VyMjAxOWNueS5henVyZXdlYnNpdGVzLm5ldC9hcGkvYXV0aC9sb2dpbj9wcm9qZWN0SWQ9NjFcIixcclxuICAgICAgICAgICAgICAgIHVybDogYCR7ZnJpZW5kb191cmx9YXBpL2F1dGgvbG9naW4/cHJvamVjdElkPTYxYCxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBcIndlYnRva2VuXCI6IFwiMllSaUlHZXZralpaLVMyMml3d3VTb2FqUmNuWlVTZUVKK2R3c2xUdE0rcz1cIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIlxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuICAgIGNvbXBvbmVudHM6IHtcclxuICAgICAgICBjb21pbmdzb29uOiBjb21pbmdzb29uXHJcbiAgICB9LFxyXG4gICAgbW91bnRlZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgLy8gZml4LWJvZHktc3BhY2VcclxuICAgICAgICB2YXIgbmF2SGVpZ2h0ID0gJCgnLndpbmRvdy10b3AnKS5oZWlnaHQoKTtcclxuICAgICAgICB2bS5uYXZIZWlnaHQgPSBuYXZIZWlnaHQgLSAzMDtcclxuICAgICAgICAkKCdib2R5JykuY3NzKCdtYXJnaW4tdG9wJywgdm0ubmF2SGVpZ2h0KTtcclxuICAgICAgICAkKFwiLm5hdi1sb2NrXCIpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICQoXCJib2R5XCIpLnJlbW92ZUNsYXNzKFwiX2ZyZWV6ZVwiKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC8vIGFsZXJ0KCdhJylcclxuICAgIH1cclxufSlcclxuXHJcblxyXG5WdWUuY29tcG9uZW50KCdjb21pbmdzb29uJywge1xyXG4gICAgdGVtcGxhdGU6IFwiI2NvbWluZ3Nvb25cIixcclxuICAgIHByb3BzOiBbJ1N0YXJ0RGF0ZScsICdtb2RlJ10sXHJcbiAgICBkYXRhOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY29taW5nc29vbjogZmFsc2UsXHJcbiAgICAgICAgICAgIGRhdGU6IHtcclxuICAgICAgICAgICAgICAgIHRvdGFsOiAwLFxyXG4gICAgICAgICAgICAgICAgZGF5czogMCxcclxuICAgICAgICAgICAgICAgIGhvdXJzOiAwLFxyXG4gICAgICAgICAgICAgICAgbWludXRlczogMCxcclxuICAgICAgICAgICAgICAgIHNlY29uZHM6IDBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gICBcclxuICAgIH0sXHJcbiAgICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHBhZExlZnQgPSBmdW5jdGlvbiAoc3RyLCBsZW4pIHtcclxuICAgICAgICAgICAgc3RyID0gJycgKyBzdHI7XHJcbiAgICAgICAgICAgIGlmIChzdHIubGVuZ3RoID49IGxlbikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0cjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwYWRMZWZ0KFwiMFwiICsgc3RyLCBsZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgIC8vIHZtLnN0YXRlX2NoZWNrKCkudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgLy8gICAgIHZhciBkYXRhID0gcmVzLkRhdGE7XHJcbiAgICAgICAgLy8gICAgIHZtLnN0YXJ0X2RhdGUgPSBkYXRhLlN0YXJ0RGF0ZVRpbWU7XHJcbiAgICAgICAgdmFyIHRpbWVpbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHQgPSBEYXRlLnBhcnNlKG5ldyBEYXRlKHZtLlN0YXJ0RGF0ZSkpIC0gRGF0ZS5wYXJzZShuZXcgRGF0ZSgpKTtcclxuICAgICAgICAgICAgdmFyIHNlY29uZHMgPSBNYXRoLmZsb29yKCh0IC8gMTAwMCkgJSA2MCk7XHJcbiAgICAgICAgICAgIHZhciBtaW51dGVzID0gTWF0aC5mbG9vcigodCAvIDEwMDAgLyA2MCkgJSA2MCk7XHJcbiAgICAgICAgICAgIHZhciBob3VycyA9IE1hdGguZmxvb3IoKHQgLyAoMTAwMCAqIDYwICogNjApKSAlIDI0KTtcclxuICAgICAgICAgICAgdmFyIGRheXMgPSBNYXRoLmZsb29yKHQgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpO1xyXG4gICAgICAgICAgICB2bS5kYXRlID0ge1xyXG4gICAgICAgICAgICAgICAgJ3RvdGFsJzogdCxcclxuICAgICAgICAgICAgICAgICdkYXlzJzogcGFkTGVmdChkYXlzLCAyKSxcclxuICAgICAgICAgICAgICAgICdob3Vycyc6IHBhZExlZnQoaG91cnMsIDIpLFxyXG4gICAgICAgICAgICAgICAgJ21pbnV0ZXMnOiBwYWRMZWZ0KG1pbnV0ZXMsIDIpLFxyXG4gICAgICAgICAgICAgICAgJ3NlY29uZHMnOiBwYWRMZWZ0KHNlY29uZHMsIDIpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmICh2bS5kYXRlLnRvdGFsIDw9IDAgfHwgdm0ubW9kZSA9PSBcIlRlc3RpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1laW50ZXJ2YWwpO1xyXG4gICAgICAgICAgICAgICAgdm0uY29taW5nc29vbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdm0uY29taW5nc29vbiA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCAxMDAwKTtcclxuICAgICAgICAvLyB9KTtcclxuICAgIH0sXHJcbn0pXHJcbiJdfQ==
